(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[31],{a16b:function(t,e,a){},ab76:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-page",{staticClass:"q-pa-sm"},[a("app-bar",[t._v("Nhập thông tin COC hàng ngày")]),a("div",{staticClass:"row justify-center q-ma-sm"},[a("div",{staticClass:"col-12 col-md-6"},[a("p",{staticClass:"woodText"},[t._v("Ngày :")]),a("q-input",{attrs:{filled:""},scopedSlots:t._u([{key:"append",fn:function(){return[a("q-icon",{staticClass:"cursor-pointer",attrs:{name:"event"}},[a("q-popup-proxy",{ref:"qDateProxy",attrs:{"transition-show":"scale","transition-hide":"scale"}},[a("q-date",{on:{input:function(){return t.$refs.qDateProxy.hide()}},model:{value:t.currentDate,callback:function(e){t.currentDate=e},expression:"currentDate"}})],1)],1)]},proxy:!0}]),model:{value:t.currentDate,callback:function(e){t.currentDate=e},expression:"currentDate"}})],1)]),a("div",{staticClass:"row justify-center q-ma-sm"},[a("div",{staticClass:"col-12 col-md-6"},[a("q-select",{staticStyle:{"font-family":"'Time New Roman'","font-size":"16px"},attrs:{"use-input":"","input-debounce":"0",behavior:"dialog",options:t.items,label:"Sản phẩm :"},on:{filter:t.searchItem},model:{value:t.item,callback:function(e){t.item=e},expression:"item"}})],1)]),a("div",{staticClass:"row justify-center q-ma-sm"},[a("div",{staticClass:"col-12 col-md-6"},[a("q-input",{attrs:{outlined:"",label:"Lệnh sản xuất"},model:{value:t.order,callback:function(e){t.order=e},expression:"order"}})],1)]),a("div",{staticClass:"row justify-center q-ma-sm"},[a("div",{staticClass:"col-12 col-md-6"},[a("q-input",{attrs:{outlined:"",label:"Dấu tuần"},model:{value:t.weekNum,callback:function(e){t.weekNum=e},expression:"weekNum"}})],1)]),a("div",{staticClass:"row justify-center q-ma-sm"},[a("div",{staticClass:"col-12 col-md-6"},[a("q-input",{attrs:{outlined:"",label:"Số lượng"},model:{value:t.qty,callback:function(e){t.qty=e},expression:"qty"}})],1)]),a("div",{staticClass:"row justify-center"},[a("div",{staticClass:"col-12 col-sm-6"},[a("q-separator")],1)]),a("div",{staticClass:"row justify-end woodText q-ma-sm"},[a("div",{staticClass:"col-3"},[a("a",{attrs:{href:"#"},on:{click:function(e){t.confirm=!0}}},[t._v("Thêm vật liệu")])])]),a("div",{staticClass:"row justify-center q-ma-sm"},[a("div",{staticClass:"col-12 col-md-6"},[a("table",{staticStyle:{width:"100%"}},[a("tr",[a("th",[t._v("STT")]),a("th",[t._v("Vật liệu")]),a("th",[t._v("Nhà cung cấp")]),a("th",[t._v("Số lô")]),a("th",[t._v("....")])]),t._l(t.info,(function(e,i){return a("tr",{key:i},[a("td",{staticStyle:{"text-align":"center"}},[t._v(t._s(i+1))]),a("td",[t._v(t._s(e.name))]),a("td",[t._v(t._s(e.vendor))]),a("td",[t._v(t._s(e.parcel))]),a("td",[a("a",{attrs:{href:"#"},on:{click:function(e){return t.removeInfo(i)}}},[t._v("Xóa")])])])})),a("tr",{directives:[{name:"show",rawName:"v-show",value:0===t.info.length,expression:"info.length===0"}]},[a("td",{staticClass:"woodText",staticStyle:{"text-align":"center"},attrs:{colspan:"5"}},[t._v("Không có dữ liệu !")])])],2)])]),a("div",{staticClass:"row justify-center q-mt-md"},[a("div",{staticClass:"col-12 col-md-6"},[a("q-btn",{staticClass:"full-width",attrs:{glossy:"",color:"primary",label:"Lưu lại"},on:{click:function(e){t.confirmSave=!0}}})],1)]),a("q-dialog",{attrs:{persistent:""},model:{value:t.confirm,callback:function(e){t.confirm=e},expression:"confirm"}},[a("q-card",{staticStyle:{"min-width":"100%"}},[a("q-card-section",{staticClass:"row items-center"},[a("span",{staticClass:"q-ml-sm"},[t._v("Điền thông tin.")])]),a("q-card-section",[a("div",{staticClass:"row justify-center"},[a("div",{staticClass:"col-12"},[a("q-select",{staticStyle:{"font-family":"'Time New Roman'","font-size":"16px"},attrs:{behavior:"dialog",options:t.supplies,label:"Chọn vật tư :","use-input":"","input-debounce":"0"},on:{filter:t.searchSupplies},model:{value:t.supplie,callback:function(e){t.supplie=e},expression:"supplie"}})],1)]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[a("q-select",{staticStyle:{"font-family":"'Time New Roman'","font-size":"16px"},attrs:{behavior:"dialog",options:t.providers,label:"Nhà cung cấp :","use-input":"","input-debounce":"0"},on:{filter:t.searchProvider},model:{value:t.provider,callback:function(e){t.provider=e},expression:"provider"}})],1)]),a("div",{staticClass:"row q-mt-sm"},[a("div",{staticClass:"col-12"},[a("q-input",{attrs:{outlined:"",label:"Số lô :"},on:{blur:t.saveLocalPracel},model:{value:t.parcelText,callback:function(e){t.parcelText=e},expression:"parcelText"}})],1)])]),a("q-card-actions",{attrs:{align:"right"}},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Hủy",color:"primary"}}),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Đồng ý",color:"primary"},on:{click:t.saveInfo}})],1)],1)],1),a("q-dialog",{attrs:{persistent:""},model:{value:t.confirmSave,callback:function(e){t.confirmSave=e},expression:"confirmSave"}},[a("q-card",{staticStyle:{"min-width":"100%","max-width":"500px"}},[a("q-card-section",{staticClass:"row items-center"},[a("span",{staticClass:"q-ml-sm"},[t._v("Bạn đã chắc chắn !")])]),a("q-card-actions",{attrs:{align:"right"}},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Hủy",color:"primary"}}),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Đồng ý",color:"primary"},on:{click:t.saveServe}})],1)],1)],1),a("q-dialog",{attrs:{persistent:""},model:{value:t.confirmLeave,callback:function(e){t.confirmLeave=e},expression:"confirmLeave"}},[a("q-card",{staticStyle:{"min-width":"100%","max-width":"500px"}},[a("q-card-section",{staticClass:"row items-center"},[a("span",{staticClass:"q-ml-sm"},[t._v("Dữ liệu chưa được lưu lại !")])]),a("q-card-section",{staticClass:"woodText"},[t._v("Bạn vẫn mướn thoát ?")]),a("q-card-actions",{attrs:{align:"right"}},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Hủy",color:"primary"}}),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Đồng ý",color:"primary"},on:{click:t.saveServe}})],1)],1)],1)],1)},s=[],n=(a("6b54"),a("7f7f"),a("551c"),a("ac6a"),a("cadf"),a("06db"),a("5df3"),a("a34a")),o=a.n(n),r=(a("96cf"),a("c973")),c=a.n(r),l=a("dd38"),u=a("fa7d"),p=a("d9b2"),d={components:{"app-bar":l["a"]},data:function(){return{currentDate:(new Date).toISOString().slice(0,10),items:[],item:null,order:"",weekNum:"",qty:"",supplies:[],supplie:null,confirm:!1,providers:[],provider:null,parcelText:"",info:[],confirmSave:!1,confirmLeave:!1}},created:function(){this.initData(),this.weekNum=Object(u["g"])(new Date)},beforeDestroy:function(){this.info.length>0&&(this.confirmLeave=!0)},methods:{removeInfo:function(t){this.info.splice(t,1)},saveServe:function(){var t=this;return c()(o.a.mark((function e(){var a,i;return o.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!(t.item&&t.currentDate&&t.weekNum&&t.qty&&t.info.length>0)){e.next=8;break}return a={date:t.currentDate,itemName:t.item.label,itemId:t.item.value,order:t.order,quantity:t.qty,info:t.info,factoryId:t.$store.getters["base/myFactoryInfor"].id},e.next=4,t.$store.dispatch("production/CREATE_COC_DONG_GOI",a);case 4:i=e.sent,!0===i.meta.success?(t.$q.notify({message:"Lưu thành công !",color:"green"}),t.$router.go(-1)):t.$q.notify({message:i.meta.messages.message||"Đã xảy ra lỗi !",color:"red"}),e.next=9;break;case 8:t.$q.notify({message:"Vui lòng điền đầy đủ thông tin !",color:"red"});case 9:case"end":return e.stop()}}),e)})))()},saveInfo:function(){if(this.parcelText&&this.provider&&this.supplie){var t={name:this.supplie.label,vendor:this.provider.label,parcel:this.parcelText};this.info.push(t),this.supplie=null,this.provider=null}else this.$q.notify({message:"Vui lòng nhập đầy đủ thông tin !",color:"red"})},saveLocalPracel:function(){},initData:function(){var t=this;return this.$q.loading.show({spinner:p["a"]}),Promise.all([this.$store.dispatch("production/ACTION_GET_SUPPLIES","undefined"),this.$store.dispatch("production/ACTION_GET_PROVIDERS","undefined"),this.$store.dispatch("production/ACTION_GET_PARCELS","undefined"),this.$store.dispatch("production/GET_PRODUCTS","xx")]).then((function(e){t.$q.loading.hide()}))},searchProvider:function(t,e){var a=this,i=[];this.$store.state.production.providers.forEach((function(t){var e={label:t.name,value:t.id};i.push(e)})),e(""!==t?function(){var e=t.toLowerCase();a.providers=i.filter((function(t){var a=t.label;if(a.toString().indexOf(e)>-1)return t}))}:function(){a.providers=i})},searchSupplies:function(t,e){var a=this,i=[];this.$store.state.production.supplies.forEach((function(t){var e={label:t.name||"??",value:t.id};i.push(e)})),e(""!==t?function(){var e=t.toLowerCase();a.supplies=i.filter((function(t){var a=t.label.toLowerCase();if(a.toString().indexOf(e)>-1)return t}))}:function(){a.supplies=i})},searchItem:function(t,e){var a=this,i=[];this.$store.state.production.products.forEach((function(t){var e={label:t.name+" -> "+t.height+" "+t.width+" "+t.length,value:t.id};i.push(e)})),e(""!==t?function(){var e=t.toLowerCase();a.items=i.filter((function(t){var a=t.label.toString().toLowerCase();if(a.toString().indexOf(e)>-1)return t}))}:function(){a.items=i})}}},f=d,m=(a("fe21"),a("2877")),v=a("9989"),h=a("27f9"),b=a("0016"),w=a("7cbe"),q=a("52ee"),y=a("ddd8"),g=a("eb85"),C=a("9c40"),x=a("24e8"),S=a("f09f"),_=a("a370"),k=a("4b7e"),N=a("7f67"),T=a("eebe"),D=a.n(T),I=Object(m["a"])(f,i,s,!1,null,"65fb834e",null);e["default"]=I.exports;D()(I,"components",{QPage:v["a"],QInput:h["a"],QIcon:b["a"],QPopupProxy:w["a"],QDate:q["a"],QSelect:y["a"],QSeparator:g["a"],QBtn:C["a"],QDialog:x["a"],QCard:S["a"],QCardSection:_["a"],QCardActions:k["a"]}),D()(I,"directives",{ClosePopup:N["a"]})},fe21:function(t,e,a){"use strict";var i=a("a16b"),s=a.n(i);s.a}}]);