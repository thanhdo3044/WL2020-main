(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[128],{"1ebc":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-page",{staticClass:"q-pa-md"},[a("div",{staticClass:"row justify-center"},[a("div",{staticClass:"page-title"},[a("div",{staticClass:"col-auto"},[t._v("Nhập tồn đầu kỳ")])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-12 q-pa-sm"},[a("q-select",{attrs:{options:t.congdoans,label:"Tổ"},on:{input:t.chonCongdoan},model:{value:t.congdoan,callback:function(e){t.congdoan=e},expression:"congdoan"}})],1)]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-12 q-pa-sm"},[a("q-select",{staticStyle:{"font-family":"'Time New Roman'","font-size":"16px"},attrs:{clearable:"","use-input":"","input-debounce":"0",behavior:"dialog",options:t.items,label:"Sản phẩm/Chi tiết"},on:{input:t.chonItem,filter:t.searchItem},model:{value:t.item,callback:function(e){t.item=e},expression:"item"}})],1)]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-12 q-pa-sm"},[a("q-select",{staticStyle:{"font-family":"'Time New Roman'","font-size":"16px"},attrs:{clearable:"",options:t.markets,label:"Màu"},model:{value:t.market,callback:function(e){t.market=e},expression:"market"}})],1)]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-6 q-pa-sm"},[a("q-input",{attrs:{type:"text",label:"Số lượng"},model:{value:t.quantity,callback:function(e){t.quantity=e},expression:"quantity"}})],1),a("div",{staticClass:"col-6 q-pa-sm"},[a("q-input",{attrs:{readonly:"",type:"text",label:"Đơn vị "},model:{value:t.unit,callback:function(e){t.unit=e},expression:"unit"}})],1)]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-12 q-pa-sm"},[a("q-select",{staticStyle:{"font-family":"'Time New Roman'","font-size":"16px"},attrs:{clearable:"",options:t.nguonPhois,label:"Nguồn phôi"},model:{value:t.nguonPhoi,callback:function(e){t.nguonPhoi=e},expression:"nguonPhoi"}})],1)]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[a("q-btn",{staticClass:"full-width",attrs:{color:"primary",label:"Nhập tồn đầu kỳ"},on:{click:t.onClick}})],1)])])},i=[],o=(a("6b54"),a("06db"),a("a34a")),s=a.n(o),l=(a("96cf"),a("c973")),c=a.n(l),u=(a("7f7f"),a("fa7d")),r={data:function(){return{congdoan:null,congdoans:[],item:null,items:[],unit:"",quantity:"",itemDupplicate:[],market:null,markets:[{label:"Màu Cafe",value:"CAFE"},{label:"Màu Xám",value:"XAM"},{label:"Màu Đen",value:"DEN"},{label:"Màu Trắng",value:"TRANG"}],nguonPhoi:null,nguonPhois:[{label:"Tại tổ",value:"Tại tổ"},{label:"Yên Sơn 1",value:"Yên Sơn 1"},{label:"Yên Sơn 4",value:"Yên Sơn 4"}],allMarket:[]}},created:function(){var t=this;this.$store.getters["base/mySources"].forEach((function(e){t.congdoans.push({value:e.id,label:e.name})})),this.loadItem(),this.getMarket()},methods:{loadItem:function(){var t=this;return c()(s.a.mark((function e(){var a;return s.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$store.dispatch("production/ACTION_FETCH_ITEMS",{factoryId:1e5});case 2:a=e.sent,a.forEach((function(e){var a="[".concat(e.code,"] ").concat(e.name," (").concat(e.height,"*").concat(e.width,"*").concat(e.length,")");t.items.push({label:a,value:e.id,unit:e.unit})})),t.itemDupplicate=t.items;case 5:case"end":return e.stop()}}),e)})))()},getMarket:function(){return c()(s.a.mark((function t(){return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})))()},chonItem:function(t){var e=this;return c()(s.a.mark((function t(){return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.market=null,e.nguonPhoi=null,e.item&&(e.unit="("+e.item.unit.name+")");case 3:case"end":return t.stop()}}),t)})))()},onClick:function(){var t=this;return c()(s.a.mark((function e(){var a,n;return s.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a={departmentId:t.congdoan.value,itemId:t.item.value,quantity:t.quantity,marketCode:t.market?t.market.value:null,nguonPhoi:t.nguonPhoi?t.nguonPhoi.value:null},e.next=3,t.$store.dispatch("production/NHAP_TON_DAU_KY",a);case 3:n=e.sent,n.meta.success&&(Object(u["o"])(),t.quantity="");case 5:case"end":return e.stop()}}),e)})))()},chonCongdoan:function(t){},searchItem:function(t,e){var a=this;e(""!==t?function(){var e=t.toLowerCase();a.items=a.itemDupplicate.filter((function(t){var a=t.label.toString().toLowerCase();if(a.indexOf(e)>-1)return t}))}:function(){a.items=a.itemDupplicate})}}},m=r,p=a("2877"),d=a("9989"),f=a("ddd8"),v=a("27f9"),h=a("9c40"),b=a("eebe"),g=a.n(b),w=Object(p["a"])(m,n,i,!1,null,null,null);e["default"]=w.exports;g()(w,"components",{QPage:d["a"],QSelect:f["a"],QInput:v["a"],QBtn:h["a"]})}}]);