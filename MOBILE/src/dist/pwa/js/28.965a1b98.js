(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[28],{"4cba":function(t,a,s){"use strict";s.r(a);var e=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("q-page",{staticClass:"q-pa-md"},[s("div",{staticClass:"row justify-center"},[s("div",{staticClass:"col-12 col-sm-6"},[s("q-card",{staticClass:"q-pa-md"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-12"},[s("p",{staticClass:"prodTextTitle"},[t._v("Kiểm tra thông tin pallet")])])]),s("div",{staticClass:"row"},[s("div",{staticClass:"col-8 q-pa-xs"},[s("q-input",{ref:"self1",attrs:{clearable:"",outlined:"",label:"Số pallet"},on:{clear:t.clearCode},model:{value:t.palletCode,callback:function(a){t.palletCode=t._n(a)},expression:"palletCode"}})],1),t.showButtonCheck?s("div",{staticClass:"col-4 q-pa-xs"},[s("q-btn",{staticClass:"full-width",staticStyle:{height:"100%"},attrs:{label:"Kiểm tra",stack:"",glossy:"",color:"blue"},on:{click:t.check}})],1):s("div",{staticClass:"col-4 q-pa-sm justify-center"},[s("q-spinner-ios",{attrs:{color:"primary",size:"4em"}})],1)])])],1)]),t.showFakeKeyboard?s("div",{staticClass:"row justify-center q-mt-md"},[s("div",{staticClass:"col-12 col-sm-6"},[s("div",{staticClass:"row justify-center",staticStyle:{"text-align":"center"}},t._l(12,(function(a){return s("div",{key:a,staticClass:"col-4 q-ms-sm"},[a<10?s("div",{staticClass:"fakeKeyboard",on:{click:function(s){return t.inputCode(a)}}},[t._v(t._s(a))]):t._e(),11===a?s("div",{staticClass:"fakeKeyboard",on:{click:function(a){return t.inputCode(0)}}},[t._v("0")]):t._e(),10===a?s("div",{staticStyle:{"min-height":"80px"}}):t._e(),12===a?s("div",{staticClass:"fakeKeyboard",staticStyle:{"background-color":"red"},on:{click:t.clearCode}},[t._v("Xóa")]):t._e()])})),0)])]):t._e(),t.showDetail?s("div",[s("div",{staticClass:"row justify-center"},[s("div",{staticClass:"col-12 col-sm-6"},[t.showButtonConfirm&&""===t.toStep.package.find((function(a){return a.destinationId===t.toStep.stepNextId})).verifyBy?s("div",{staticClass:"row q-ma-sm"},[s("q-btn",{staticClass:"full-width",staticStyle:{height:"100%"},attrs:{label:"Nhận pallet",stack:"",glossy:"",color:"secondary"},on:{click:function(a){t.showDialog=!0}}})],1):s("div",[s("div",{directives:[{name:"show",rawName:"v-show",value:t.showPendingConfirm,expression:"showPendingConfirm"}],staticClass:"col-12 q-pa-sm",staticStyle:{"text-align":"center"}},[s("q-spinner-ios",{attrs:{color:"primary",size:"4em"}})],1)]),s("div",{staticClass:"row q-mt-sm"},[s("div",{staticClass:"prodTextTitle",staticStyle:{color:"orange"}},[t._v("Thông tin pallet "+t._s(t.pallet.code))])]),void 0!==t.pallet.item&&t.pallet.item.length>1?s("div",{staticClass:"row mobile-only"},t._l(t.pallet.item,(function(a){return s("div",{key:a.id,staticClass:"col-12 col-md-6 q-mt-md"},[s("q-card",{staticClass:"my-card",staticStyle:{"min-width":"100%"}},[s("q-card-section",[s("p",{staticClass:"prodTextTitle"},[t._v(t._s(a.name||"????"))]),s("p",{staticClass:"prodTextTitle"},[t._v("(QC: "+t._s(a.height+" "+a.width+" "+a.length)+")")]),s("div",{staticClass:"text-subtitle2"},[t._v("Số lượng : "+t._s(a.quantity)+" ("+t._s(a.unit.name||"Thanh")+")")])])],1)],1)})),0):s("div",{staticClass:"row justify-center"},[s("div",{staticClass:"col-12"},[s("q-card",{staticClass:"my-card q-mt-md",staticStyle:{"min-width":"100%"}},[s("q-card-section",[s("div",{staticClass:"prodTextTitle"},[t._v(t._s(t.pallet.item[0].name||"????")+" (QC: "+t._s(t.pallet.item[0].height+" "+t.pallet.item[0].width+" "+t.pallet.item[0].length)+")")]),s("div",{staticClass:"text-subtitle2"},[t._v("Số lượng : "+t._s(t.pallet.inventory)+" ("+t._s(t.pallet.item[0].unit.name||"Thanh")+")")])])],1)],1)])]),s("div",{staticClass:"col-12 col-sm-6 q-ma-sm"},[s("q-card",{staticClass:"my-card q-pa-xs"},[s("q-card-section",[s("div",{staticClass:"prodTextTitle"},[t._v("Thông tin các công đoạn đã qua")])]),t._l(t.pallet.step,(function(a,e){return s("div",{key:a.id},[s("q-item",[s("q-item-section",{attrs:{avatar:""}},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-12"},[s("q-chip",[s("q-avatar",{attrs:{color:"blue"}},[t._v(t._s(e+1))]),s("div",{staticClass:"prodTextTitle"},[t._v(t._s(a.stepName))])],1)],1)])])],1),s("q-card-section",[s("div",{staticClass:"row"},[s("div",{staticClass:"col-6"},[s("div",{staticClass:"prodTextTitle",staticStyle:{"background-color":"#52f783",padding:"10px"}},[t._v("SL đạt : "+t._s(a.pass))])]),s("div",{staticClass:"col-6"},[s("div",{staticClass:"prodTextTitle",staticStyle:{"background-color":"#faa652",padding:"10px"}},[t._v("SL lỗi : "+t._s(a.notPass))])])]),s("div",{staticClass:"row"},[s("div",{staticClass:"col-12"},[t._v("Ngày làm việc : "+t._s(a.package[0].createDate))])]),s("div",{staticClass:"row"},[s("div",{staticClass:"col-12"},[t._v("Người làm : "+t._s(a.package[0].createName))])]),s("div",{staticClass:"row"},[s("div",{staticClass:"col-12"},[t._v("Xuất đến  : "+t._s(a.stepNextName))])]),s("div",{directives:[{name:"show",rawName:"v-show",value:a.package[0].verifyName,expression:"step.package[0].verifyName"}],staticClass:"row"},[s("div",{staticClass:"col-12"},[t._v("Nhân bởi   : "+t._s(a.package[0].verifyName))])]),s("div",{staticClass:"row"},[s("div",{staticClass:"col-12"},[t._v("Ngày nhận  : "+t._s(a.package[0].verifyDate||"Chưa nhận")+" ")])])]),s("q-separator")],1)}))],2)],1)])]):t._e(),s("q-dialog",{attrs:{persistent:""},model:{value:t.showDialog,callback:function(a){t.showDialog=a},expression:"showDialog"}},[s("q-card",{staticStyle:{"min-width":"300px"}},[s("q-card-section",{staticClass:"row items-center"},[s("span",{staticClass:"q-ml-sm prodTextTitle"},[t._v("Bạn đã chắc chắn ? !")])]),s("q-card-actions",{attrs:{align:"right"}},[s("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Hủy",color:"primary"}}),s("q-btn",{attrs:{flat:"",label:"Đồng Ý",color:"primary"},on:{click:t.recive}})],1)],1)],1)],1)},i=[],o=(s("6b54"),s("06db"),s("a34a")),l=s.n(o),c=(s("7514"),s("96cf"),s("c973")),n=s.n(c),r=(s("20d6"),s("889c")),d={components:{"table-coc":r["a"]},data:function(){return{palletCode:"",showButtonCheck:!0,pallet:{},showDetail:!1,showButtonConfirm:!1,mySources:[],showDialog:!1,toStep:{},showPendingConfirm:!1,stepTarget:{},path:null,showFakeKeyboard:!0}},created:function(){var t=this.$route.query.code,a=this.$route.query.path;if(a&&(this.path=a),t&&8===t.length){this.palletCode=t;var s={token:this.$store.state.production.userInfo.token,palletCode:t.trim()};this.loaData(s)}this.mySources=this.$store.getters["production/mySources"]},methods:{clearCode:function(){this.$refs.self1.blur(),this.showFakeKeyboard=!0,this.palletCode=""},loaData:function(t){var a=this;this.showFakeKeyboard=!1,this.$store.dispatch("production/ACTION_GET_DETAIL_PALLET",t).then((function(t){if(!0===t.data.meta.success){a.pallet=t.data.data,a.showButtonCheck=!0,a.$root.$emit("reload"),a.showDetail=!0;var s=t.data.data.step.slice(-1).pop();a.stepTarget=s,a.toStep=t.data.data.step.slice(-1).pop(),-1!==a.mySources.findIndex((function(t){return t.id===s.stepNextId}))&&(a.showButtonConfirm=!0,a.showFakeKeyboard=!1)}else a.$q.notify({message:t.data.meta.messages.message,color:"red"}),a.showButtonCheck=!0,a.showFakeKeyboard=!0})).catch((function(t){a.showButtonCheck=!0,a.showFakeKeyboard=!0,a.palletCode="",a.$q.notify({message:"Không tìm thấy pallet",color:"red"})}))},recive:function(){var t=this;return n()(l.a.mark((function a(){var s,e,i;return l.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.showDialog=!1,t.showButtonConfirm=!1,t.showPendingConfirm=!0,s=t.toStep.package.find((function(a){return a.destinationId==t.stepTarget.stepNextId})),e={token:t.$store.state.production.userInfo.token,packageId:s.id},a.next=7,t.$store.dispatch("production/ACTION_RECIVED_PALLET",e);case 7:i=a.sent,!0===i.meta.success?(t.$q.notify({message:"Đã nhận pallet về công đoạn "+t.toStep.stepNextName,color:"green"}),t.showPendingConfirm=!1,t.path&&t.$router.push("/"+t.path)):(t.$q.notify({message:i.meta.messages.message,color:"red"}),t.showButtonConfirm=!0,t.showPendingConfirm=!1);case 9:case"end":return a.stop()}}),a)})))()},inputCode:function(t){null===this.palletCode&&(this.palletCode=""),this.palletCode+=t.toString()},check:function(){if(8===this.palletCode.toString().length){this.showButtonCheck=!1;var t={token:this.$store.state.production.userInfo.token,palletCode:this.palletCode};this.loaData(t)}else this.$q.notify({message:"Số pallet không chính xác !",color:"red"})}}},p=d,h=(s("7651"),s("2877")),u=s("9989"),m=s("f09f"),v=s("27f9"),C=s("9c40"),f=s("d9b2"),g=s("a370"),w=s("66e5"),y=s("4074"),_=s("b047"),k=s("cb32"),q=s("eb85"),b=s("24e8"),x=s("4b7e"),S=s("7f67"),T=s("eebe"),N=s.n(T),I=Object(h["a"])(p,e,i,!1,null,null,null);a["default"]=I.exports;N()(I,"components",{QPage:u["a"],QCard:m["a"],QInput:v["a"],QBtn:C["a"],QSpinnerIos:f["a"],QCardSection:g["a"],QItem:w["a"],QItemSection:y["a"],QChip:_["a"],QAvatar:k["a"],QSeparator:q["a"],QDialog:b["a"],QCardActions:x["a"]}),N()(I,"directives",{ClosePopup:S["a"]})},"6da3":function(t,a,s){},7651:function(t,a,s){"use strict";var e=s("6da3"),i=s.n(e);i.a}}]);