(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[33],{"06e9":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-page",{staticClass:"q-pa-sm"},[a("app-bar",[t._v("Nhập thông tin COC hàng ngày")]),a("div",{staticClass:"row justify-center q-ma-sm"},[a("div",{staticClass:"col-12 col-md-6"},[a("p",{staticClass:"woodText"},[t._v(t._s(t.dcoc.itemName))])])]),a("div",{staticClass:"row justify-center q-ma-sm"},[a("div",{staticClass:"col-12 col-md-6"},[a("q-input",{attrs:{outlined:"",readonly:!0,label:"Lệnh sản xuất"},model:{value:t.dcoc.order,callback:function(e){t.$set(t.dcoc,"order",e)},expression:"dcoc.order"}})],1)]),a("div",{staticClass:"row justify-center q-ma-sm"},[a("div",{staticClass:"col-12 col-md-6"},[a("q-input",{attrs:{readonly:!0,outlined:"",label:"Số lượng"},model:{value:t.dcoc.quantity,callback:function(e){t.$set(t.dcoc,"quantity",e)},expression:"dcoc.quantity"}})],1)]),a("div",{staticClass:"row justify-center"},[a("div",{staticClass:"col-12 col-sm-6"},[a("q-separator")],1)]),a("div",{staticClass:"row justify-end woodText q-ma-sm"},[a("div",{staticClass:"col-3"},[a("a",{attrs:{href:"#"},on:{click:function(e){t.confirm=!0}}},[t._v("Thêm vật liệu")])])]),a("div",{staticClass:"row justify-center q-ma-sm"},[a("div",{staticClass:"col-12 col-md-6"},[a("table",{staticStyle:{width:"100%"}},[a("tr",[a("th",[t._v("STT")]),a("th",[t._v("Vật liệu")]),a("th",[t._v("Nhà cung cấp")]),a("th",[t._v("Số lô")]),a("th",[t._v("....")])]),t._l(t.dcoc.info,(function(e,i){return a("tr",{key:i},[a("td",{staticStyle:{"text-align":"center"}},[t._v(t._s(i+1))]),a("td",[t._v(t._s(e.name))]),a("td",[t._v(t._s(e.vendor))]),a("td",[t._v(t._s(e.parcel))]),a("td",[a("a",{attrs:{href:"#"},on:{click:function(e){return t.removeInfo(i)}}},[t._v("Xóa")])])])}))],2)])]),a("div",{staticClass:"row justify-center q-mt-md"},[a("div",{staticClass:"col-12 col-md-6"},[a("q-btn",{staticClass:"full-width",attrs:{glossy:"",color:"primary",label:"Lưu lại"},on:{click:function(e){t.confirmSave=!0}}})],1)]),a("q-dialog",{attrs:{persistent:""},model:{value:t.confirm,callback:function(e){t.confirm=e},expression:"confirm"}},[a("q-card",{staticStyle:{"min-width":"100%"}},[a("q-card-section",{staticClass:"row items-center"},[a("span",{staticClass:"q-ml-sm"},[t._v("Điền thông tin.")])]),a("q-card-section",[a("div",{staticClass:"row justify-center"},[a("div",{staticClass:"col-12"},[a("q-select",{staticStyle:{"font-family":"'Time New Roman'","font-size":"16px"},attrs:{behavior:"dialog",options:t.supplies,label:"Chọn vật tư :","use-input":"","input-debounce":"0"},on:{filter:t.searchSupplies},model:{value:t.supplie,callback:function(e){t.supplie=e},expression:"supplie"}})],1)]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[a("q-select",{staticStyle:{"font-family":"'Time New Roman'","font-size":"16px"},attrs:{behavior:"dialog",options:t.providers,label:"Nhà cung cấp :","use-input":"","input-debounce":"0"},on:{filter:t.searchProvider},model:{value:t.provider,callback:function(e){t.provider=e},expression:"provider"}})],1)]),a("div",{staticClass:"row q-mt-sm"},[a("div",{staticClass:"col-12"},[a("q-input",{attrs:{outlined:"",label:"Số lô :"},model:{value:t.parcelText,callback:function(e){t.parcelText=e},expression:"parcelText"}})],1)])]),a("q-card-actions",{attrs:{align:"right"}},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Hủy",color:"primary"}}),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Đồng ý",color:"primary"},on:{click:t.saveInfo}})],1)],1)],1),a("q-dialog",{attrs:{persistent:""},model:{value:t.confirmSave,callback:function(e){t.confirmSave=e},expression:"confirmSave"}},[a("q-card",{staticStyle:{"min-width":"100%","max-width":"500px"}},[a("q-card-section",{staticClass:"row items-center"},[a("span",{staticClass:"q-ml-sm"},[t._v("Bạn đã chắc chắn !")])]),a("q-card-actions",{attrs:{align:"right"}},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Hủy",color:"primary"}}),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Đồng ý",color:"primary"},on:{click:t.saveServe}})],1)],1)],1)],1)},s=[],o=(a("6b54"),a("7f7f"),a("551c"),a("ac6a"),a("cadf"),a("06db"),a("5df3"),a("a34a")),c=a.n(o),n=(a("96cf"),a("c973")),r=a.n(n),l=a("dd38"),d=a("d9b2"),p={components:{"app-bar":l["a"]},data:function(){return{dcoc:{},confirm:!1,supplies:[],supplie:null,providers:[],provider:null,parcelText:"",confirmSave:!1}},created:function(){var t=this.$store.state.production.dcocSelect;this.dcoc=t,this.loadData()},methods:{saveServe:function(){var t=this;return r()(c.a.mark((function e(){var a,i;return c.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a={id:t.dcoc._id,data:{date:t.dcoc.date,itemName:t.dcoc.itemName,itemId:t.dcoc.itemId,order:t.dcoc.order,quantity:t.dcoc.quantity,info:t.dcoc.info}},e.next=3,t.$store.dispatch("production/UPDATE_DCOC",a);case 3:i=e.sent,!0===i.meta.success?(t.$q.notify({message:"Lưu thành công !",color:"green"}),t.$router.go(-1)):t.$q.notify({message:i.meta.messages.message||"Đã xảy ra lỗi !",color:"red"});case 5:case"end":return e.stop()}}),e)})))()},loadData:function(){var t=this;return r()(c.a.mark((function e(){return c.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.$q.loading.show({spinner:d["a"]}),e.abrupt("return",Promise.all([t.$store.dispatch("production/ACTION_GET_SUPPLIES","undefined"),t.$store.dispatch("production/ACTION_GET_PROVIDERS","undefined"),t.$store.dispatch("production/ACTION_GET_PARCELS","undefined")]).then((function(e){t.$q.loading.hide()})));case 2:case"end":return e.stop()}}),e)})))()},removeInfo:function(t){this.dcoc.info.splice(t,1)},saveInfo:function(){if(this.parcelText&&this.provider&&this.supplie){var t={name:this.supplie.label,vendor:this.provider.label,parcel:this.parcelText};this.dcoc.info.push(t),this.supplie=null,this.provider=null}else this.$q.notify({message:"Vui lòng nhập đầy đủ thông tin !",color:"red"})},searchSupplies:function(t,e){var a=this,i=[];this.$store.state.production.supplies.forEach((function(t){var e={label:t.name||"??",value:t.id};i.push(e)})),e(""!==t?function(){var e=t.toLowerCase();a.supplies=i.filter((function(t){var a=t.label.toLowerCase();if(a.toString().indexOf(e)>-1)return t}))}:function(){a.supplies=i})},searchProvider:function(t,e){var a=this,i=[];this.$store.state.production.providers.forEach((function(t){var e={label:t.name,value:t.id};i.push(e)})),e(""!==t?function(){var e=t.toLowerCase();a.providers=i.filter((function(t){var a=t.label;if(a.toString().indexOf(e)>-1)return t}))}:function(){a.providers=i})}}},u=p,f=(a("1596"),a("2877")),v=a("9989"),m=a("27f9"),h=a("eb85"),b=a("9c40"),C=a("24e8"),q=a("f09f"),w=a("a370"),y=a("ddd8"),g=a("4b7e"),_=a("7f67"),S=a("eebe"),x=a.n(S),T=Object(f["a"])(u,i,s,!1,null,null,null);e["default"]=T.exports;x()(T,"components",{QPage:v["a"],QInput:m["a"],QSeparator:h["a"],QBtn:b["a"],QDialog:C["a"],QCard:q["a"],QCardSection:w["a"],QSelect:y["a"],QCardActions:g["a"]}),x()(T,"directives",{ClosePopup:_["a"]})},1596:function(t,e,a){"use strict";var i=a("d7d1"),s=a.n(i);s.a},d7d1:function(t,e,a){}}]);