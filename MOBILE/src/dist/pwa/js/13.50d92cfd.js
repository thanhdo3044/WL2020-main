(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[13],{"30ed":function(t,a,e){"use strict";e.r(a);var n=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("q-page",{staticClass:"q-pa-sm"},[e("div",{staticClass:"row justify-center"},[e("div",{staticClass:"col-6 prodTextTitle"},[e("q-select",{attrs:{options:t.regions,label:"Chọn bảng giá"},model:{value:t.region,callback:function(a){t.region=a},expression:"region"}})],1),e("div",{staticClass:"col-6",attrs:{align:"right"}},[e("q-btn",{staticStyle:{color:"#FF0080"},attrs:{flat:"",label:"Cập nhật bảng giá"},on:{click:t.goUpdate}})],1)]),e("div",{staticClass:"row justify-center q-ma-sm"},[e("div",{staticClass:"col-12"},[e("q-card",{staticClass:"q-my-lg q-pa-md"},[e("q-card-section",[e("DxPivotGrid",{ref:"grid",attrs:{id:"pivotgrid","data-source":t.dataSource,"allow-filtering":!0,"show-borders":!0,"show-column-grand-totals":!1,"show-row-grand-totals":!1,"show-row-totals":!1,"show-column-totals":!1}})],1)],1)],1)]),e("div",{staticClass:"row justify-start"},[e("div",{staticClass:"col-10"},[e("h5",[t._v("Các điều kiện tính toán")])])]),e("div",{staticClass:"row justify-start"},[e("div",{staticClass:"col-12"},[e("table",{staticStyle:{width:"96%"}},[e("tr",[e("th",[t._v("STT")]),e("th",[t._v("Mô tả")]),e("th",[t._v("Hành động")])]),t._l(t.options,(function(a,n){return e("tr",{key:n},[e("td",[t._v(t._s(n+1))]),e("td",[e("p",[t._v(t._s(a.DESCRIPTION))])]),e("td",[e("q-checkbox",{on:{input:function(e){return t.checkOption(n,a.CID,a.OID)}},model:{value:a.USE_FLAG,callback:function(e){t.$set(a,"USE_FLAG",e)},expression:"item.USE_FLAG"}})],1)])}))],2)])]),e("q-dialog",{attrs:{persistent:""},model:{value:t.showAddCondition,callback:function(a){t.showAddCondition=a},expression:"showAddCondition"}},[e("q-card",[e("q-card-section",{staticClass:"row items-center"},[e("span",{staticClass:"q-ml-sm"},[t._v("Bạn đã chắc chắn !")])]),e("q-card-section",[e("div",[t._v(t._s(t.messageDialog))])]),e("q-card-actions",{attrs:{align:"right"}},[e("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Hủy",color:"primary"},on:{click:t.cancel}}),e("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Đồng ý",color:"primary"},on:{click:t.saveMapOption}})],1)],1)],1)],1)},o=[],i=e("a34a"),s=e.n(i),c=(e("96cf"),e("c973")),r=e.n(c),d=e("61f7"),l={components:{DxPivotGrid:d["DxPivotGrid"],DxFieldChooser:d["DxFieldChooser"]},data:function(){return{priceLists:[],regions:[],region:null,showAddCondition:!1,dataSource:{},options:[],changeStatus:!1,cid:null,oid:null,currentIndexOption:null,messageDialog:""}},created:function(){this.loadRegion()},mounted:function(){},watch:{region:function(t){t.value&&this.loadPrice(t.value)}},methods:{saveOption:function(){},cancel:function(){this.options[this.currentIndexOption].USE_FLAG=!this.options[this.currentIndexOption].USE_FLAG},saveMapOption:function(){var t=this;return r()(s.a.mark((function a(){var e,n;return s.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e={cid:t.cid,oid:t.oid,rid:t.region.value},a.next=3,t.$store.dispatch("wood/CHANGE_MAP_CONDITION",e);case 3:n=a.sent,console.log(n.data),n.data[0].RESULT?t.$q.notify({message:n.data[0].MESSAGE,color:"green"}):t.$q.notify({message:n.data[0].MESSAGE,color:"red"});case 6:case"end":return a.stop()}}),a)})))()},checkOption:function(t,a,e){this.currentIndexOption=t,this.cid=a,this.oid=e||0;var n=this.options[t].USE_FLAG?"Thêm điều kiện":"Bỏ điều kiện",o=this.options[t].DESCRIPTION;this.messageDialog=n+"\n"+o,this.showAddCondition=!0},loadRegion:function(){var t=this;return r()(s.a.mark((function a(){var e;return s.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.$store.dispatch("wood/GET_REGION",t.$store.state.base.moduleSelected.id);case 2:e=a.sent,e.data.forEach((function(a){var e={value:a.ID,label:a.NAME};t.regions.push(e)})),t.regions.length>0&&(t.region=t.regions[0]);case 5:case"end":return a.stop()}}),a)})))()},goUpdate:function(){this.$router.push("/wood-price-update")},loadPrice:function(t){var a=this;return r()(s.a.mark((function e(){var n,o,i,c;return s.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=a.$store.state.base.moduleSelected.id,a.changeStatus=!1,o={moduleId:n,regionId:t},e.next=5,a.$store.dispatch("wood/GET_PRICE_RAW_DATA",o);case 5:i=e.sent,i.data.options.forEach((function(t){0===t.USE_FLAG?t.USE_FLAG=!1:t.USE_FLAG=!0})),a.options=i.data.options,c={fields:[{caption:"ITYPE_NAME",width:120,dataField:"ITYPE_NAME",area:"row",expanded:!0},{caption:"HEIGHT",area:"row",width:150,expanded:!0,selector:function(t){return"".concat(t.HEIGHT,"*").concat(t.WIDTH,"*").concat(t.LENGTH)}},{dataField:"WTYPE_NAME",area:"column",expanded:!0},{dataField:"DTYPE_NAME",area:"column",expanded:!0},{caption:"Price",dataField:"PRICE",dataType:"number",summaryType:"sum",area:"data",format:"fixedPoint"}],store:i.data.data},a.dataSource=c;case 10:case"end":return e.stop()}}),e)})))()}}},u=l,p=(e("31a0"),e("d1e0"),e("2877")),h=e("9989"),f=e("ddd8"),v=e("9c40"),g=e("f09f"),w=e("a370"),m=e("8f8e"),E=e("24e8"),C=e("4b7e"),_=e("7f67"),S=e("eebe"),b=e.n(S),x=Object(p["a"])(u,n,o,!1,null,"f0f3f6a2",null);a["default"]=x.exports;b()(x,"components",{QPage:h["a"],QSelect:f["a"],QBtn:v["a"],QCard:g["a"],QCardSection:w["a"],QCheckbox:m["a"],QDialog:E["a"],QCardActions:C["a"]}),b()(x,"directives",{ClosePopup:_["a"]})},"31a0":function(t,a,e){"use strict";var n=e("36b2"),o=e.n(n);o.a},"36b2":function(t,a,e){},"38cc":function(t,a,e){},d1e0:function(t,a,e){"use strict";var n=e("38cc"),o=e.n(n);o.a}}]);