(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[68],{ac9f:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-page",[a("order-header",{attrs:{order:e.order}}),a("q-card",{staticClass:"my-card"},[a("q-card-section",["Không được duyệt"==e.order.status?a("div",[a("div",{staticClass:"row"},[a("div",{staticClass:"col"},[a("q-input",{attrs:{label:"Họ và tên:",readonly:""},model:{value:e.userInfo.lastName,callback:function(t){e.$set(e.userInfo,"lastName",t)},expression:"userInfo.lastName"}})],1),a("div",{staticClass:"col"},[a("q-input",{attrs:{label:"Chức vụ:",readonly:""},model:{value:e.userInfo.position,callback:function(t){e.$set(e.userInfo,"position",t)},expression:"userInfo.position"}})],1),a("div",{staticClass:"col"},[a("q-input",{attrs:{label:"Phòng ban:",readonly:""},model:{value:e.nameDepartmentName.NAME,callback:function(t){e.$set(e.nameDepartmentName,"NAME",t)},expression:"nameDepartmentName.NAME"}})],1)]),a("DxDataGrid",{attrs:{id:"gridContainer","data-source":e.metaValuesFilter,"allow-column-reordering":!0,"show-borders":!0,"key-expr":"id"},on:{"init-new-row":e.initNewRow,"row-inserted":e.rowInserted,"row-updated":e.rowUpdated,"row-removed":e.rowRemoved}},[a("DxEditing",{attrs:{"allow-updating":!e.order.Requests.length||"Không được duyệt"==e.order.status,"allow-deleting":!e.order.Requests.length||"Không được duyệt"==e.order.status,"allow-adding":!e.order.Requests.length||"Không được duyệt"==e.order.status,mode:"row"}}),a("DxColumn",{attrs:{"data-field":"STT",caption:"STT"}}),a("DxColumn",{attrs:{"data-field":"tenThietBiVP",caption:"Tên thiết bị VPP"}}),a("DxColumn",{attrs:{"data-field":"donViTinh",caption:"ĐVT"}}),a("DxColumn",{attrs:{"data-field":"soLuongDeXuat",caption:"Số lượng đề xuất"}}),a("DxColumn",{attrs:{"data-field":"soLuongCap",caption:"Số lượng cấp"}}),a("DxColumn",{attrs:{caption:"Ghi chú","data-field":"description"}})],1),a("q-btn",{staticClass:"q-mt-sm",attrs:{color:"primary","text-color":"white",label:"Sửa"},on:{click:e.updatedOrderMeta}})],1):a("div",[a("div",{staticClass:"row"},[a("div",{staticClass:"col"},[a("q-input",{attrs:{label:"Họ và tên:",readonly:""},model:{value:e.userInfo.lastName,callback:function(t){e.$set(e.userInfo,"lastName",t)},expression:"userInfo.lastName"}})],1),a("div",{staticClass:"col"},[a("q-input",{attrs:{label:"Chức vụ:",readonly:""},model:{value:e.userInfo.position,callback:function(t){e.$set(e.userInfo,"position",t)},expression:"userInfo.position"}})],1),a("div",{staticClass:"col"},[a("q-input",{attrs:{label:"Phòng ban:",readonly:""},model:{value:e.nameDepartmentName.NAME,callback:function(t){e.$set(e.nameDepartmentName,"NAME",t)},expression:"nameDepartmentName.NAME"}})],1)]),a("DxDataGrid",{attrs:{id:"gridContainer","data-source":e.metaValuesFilter,"allow-column-reordering":!0,"show-borders":!0,"key-expr":"id"},on:{"init-new-row":e.initNewRow,"row-inserted":e.rowInserted,"row-updated":e.rowUpdated,"row-removed":e.rowRemoved}},[a("DxEditing",{attrs:{"allow-updating":!e.order.Requests.length||"Không được duyệt"==e.order.status,"allow-deleting":!e.order.Requests.length||"Không được duyệt"==e.order.status,"allow-adding":!e.order.Requests.length||"Không được duyệt"==e.order.status,mode:"row"}}),a("DxColumn",{attrs:{"data-field":"STT",caption:"STT"}}),a("DxColumn",{attrs:{"data-field":"tenThietBiVP",caption:"Tên thiết bị VPP"}}),a("DxColumn",{attrs:{"data-field":"donViTinh",caption:"ĐVT"}}),a("DxColumn",{attrs:{"data-field":"soLuongDeXuat",caption:"Số lượng đề xuất"}}),a("DxColumn",{attrs:{"data-field":"soLuongCap",caption:"Số lượng cấp"}}),a("DxColumn",{attrs:{caption:"Ghi chú","data-field":"description"}})],1)],1)])],1),a("q-card"),a("order-approved",{attrs:{order:e.order,metaValue:e.metaValues[0]}}),a("send-message",{attrs:{order:e.order}})],1)},n=[],o=(a("8e6e"),a("8a81"),a("ac6a"),a("cadf"),a("456d"),a("a34a")),s=a.n(o),i=(a("6b54"),a("06db"),a("96cf"),a("c973")),d=a.n(i),l=(a("f751"),a("9523")),u=a.n(l),c=a("2f62"),p=a("bc3a"),m=a.n(p),f=a("d30a"),h=a("932a"),g=a("6664"),w=a("0ac8");function b(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function D(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?b(Object(a),!0).forEach((function(t){u()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):b(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var v={data:function(){return{disable:!1,departmentDis:null,metaValues:[],nameDepartmentName:null,metaValue:{kinhGui:"Ban TGĐ - Trưởng phòng/phó phòng ban :  -\tGĐSX/Phó GĐSX/Phụ trách nhà máy :",noiDungTT:"",soTien:0,vietBangChu:"",kemTheo:"",STT:"12",locationWork:"",position:"",position2:"",number:"",timeRecruit:"",description:"",fullName:"",fullName2:"",maNV:"",department:"",department2:"",stepDepartment:"",lyDo:"",dateStart:"",dateEnd:"",selection1:null,selection2:null,selection3:null,selection4:null,selection:null,thoiGianMangThai:"",xinRaCong:""}}},components:{SendMessage:h["a"],OrderHeader:g["a"],OrderApproved:w["a"],DxDataGrid:f["DxDataGrid"],DxColumn:f["DxColumn"],DxEditing:f["DxEditing"]},methods:D(D(D(D(D({},Object(c["b"])("orders",["getOneOrder","getAllRequests"])),Object(c["b"])("orderMetas",["getOneOrderMeta","addorderMeta","taoOrderMeta","deleteOrderMeta","updateOrderMeta"])),Object(c["b"])("requests",["deleteRequest","resetOrder"])),Object(c["b"])("base",["GET_DEPARTMENTSBYID"])),{},{initNewRow:function(e){var t=e.data;Object.assign(t,{STT:this.order.OrderMeta.length,tenThietBiVP:"Tên",donViTinh:"C",soLuongDeXuat:"1",soLuongCap:1,description:"Ghi chú"})},rowInserted:function(e){var t=this;return d()(s.a.mark((function a(){var r,n,o,i,d;return s.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r=e.data,n=t.userInfo.lastName,o=t.userInfo.PHONE,i=t.userInfo.position,a.next=6,t.getDepartmentById(t.userInfo.department);case 6:return a.sent,d=t.nameDepartmentName.NAME.toString(),a.next=10,t.taoOrderMeta(D(D({},r),{},{orderId:t.order.id,metaValue:JSON.stringify([{selection:t.selection}]),selection:t.selection,fullName:n,phoneNumber:o,position:i,department:d}));case 10:return a.next=12,t.loadData(t.$route.query.id);case 12:console.log("OK");case 13:case"end":return a.stop()}}),a)})))()},updatedOrderMeta:function(){var e=this;return d()(s.a.mark((function t(){return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,m.a.put("/api/v2/orders?orderId=".concat(e.order.id));case 2:return t.next=4,e.deleteRequest(e.order.id);case 4:location.reload();case 5:case"end":return t.stop()}}),t)})))()},rowUpdated:function(e){var t=this;return d()(s.a.mark((function a(){var r,n,o,i;return s.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r=e.data,n=t.userInfo.lastName,o=t.userInfo.PHONE,i=t.userInfo.position,a.next=6,t.updateOrderMeta(r,n,o,i);case 6:return a.next=8,t.loadData(t.$route.query.id);case 8:console.log("OK");case 9:case"end":return a.stop()}}),a)})))()},rowRemoved:function(e){var t=this;return d()(s.a.mark((function a(){var r;return s.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r=e.data,a.next=3,t.deleteOrderMeta(r.id);case 3:return a.next=5,t.loadData(t.$route.query.id);case 5:console.log("OK");case 6:case"end":return a.stop()}}),a)})))()},loadData:function(e){var t=this;return d()(s.a.mark((function a(){var r;return s.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r=null,a.prev=1,a.next=4,t.getOneOrder(e);case 4:r=a.sent,a.next=10;break;case 7:a.prev=7,a.t0=a["catch"](1),console.log(a.t0);case 10:r||t.$router.push({path:"/tao-de-xuat"}),t.metaValues=r.data.data.OrderMeta,console.log(r);case 13:case"end":return a.stop()}}),a,null,[[1,7]])})))()}}),computed:D(D(D(D({},Object(c["c"])("orders",["order"])),Object(c["c"])("ordersm",["getDepartmentById"])),Object(c["c"])("base",["userInfo","myFactoryInfor"])),{},{metaValuesFilter:function(){return this.metaValues.filter((function(e){return e.STT})).sort((function(e,t){return e.STT-t.STT}))}}),created:function(){var e=this;return d()(s.a.mark((function t(){return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.$route.query.id&&e.loadData(e.$route.query.id),t.next=3,e.GET_DEPARTMENTSBYID(e.userInfo.department);case 3:e.nameDepartmentName=t.sent,console.log("this.nameDepartmentName",e.nameDepartmentName.NAME);case 5:case"end":return t.stop()}}),t)})))()}},x=v,O=a("2877"),T=a("9989"),y=a("f09f"),N=a("a370"),C=a("27f9"),I=a("9c40"),q=a("8f8e"),M=a("eebe"),S=a.n(M),E=Object(O["a"])(x,r,n,!1,null,null,null);t["default"]=E.exports;S()(E,"components",{QPage:T["a"],QCard:y["a"],QCardSection:N["a"],QInput:C["a"],QBtn:I["a"],QCheckbox:q["a"]})}}]);