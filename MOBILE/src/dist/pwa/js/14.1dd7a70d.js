(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[14],{1730:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.task.conThucHien&&t.task.conThucHien>0?a("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{clickable:""},on:{click:function(e){return t.goDetail(t.task.code)}}},[a("q-item-section",[a("q-item-label",{staticClass:"text-subtitle2"},[t._v("\n        ["+t._s(t.task.itemCode)+"] - "+t._s(t.task.itemName)+" ("+t._s(t.task.itemHeight)+"*"+t._s(t.task.itemWidth)+"*"+t._s(t.task.itemLength)+")\n      ")]),a("q-item-label",{attrs:{caption:"",lines:"2"}},[a("q-badge",{attrs:{color:t.task.loiCongDon?"orange-10":"teal"}},[t._v("\n          "+t._s(t.task.number.toUpperCase())+t._s(t.task.market?" * "+t.task.root:"")+"\n        ")])],1)],1),a("q-item-section",{attrs:{side:"",top:""}},[a("q-item-label",{attrs:{caption:""}},[t._v(t._s(t.moment(t.task.ngayDongGoi).subtract(Math.ceil(t.task.thoiGianBatDau+ +t.task.thoiGianCho),"days").format("L")))]),a("q-badge",{attrs:{color:t.task.loiCongDon?"orange-10":"teal",label:t.task.conThucHien}})],1)],1):t._e()],1)},s=[],r={props:["task","id","completed","searchQuery"],methods:{goDetail:function(t){this.$router.push({name:"confirm-po",params:{code:t+"_"+this.task.number+"_"+this.searchQuery}})}}},o=r,i=a("2877"),u=a("66e5"),c=a("4074"),l=a("0170"),d=a("58a8"),h=a("714f"),m=a("eebe"),p=a.n(m),f=Object(i["a"])(o,n,s,!1,null,null,null);e["default"]=f.exports;p()(f,"components",{QItem:u["a"],QItemSection:c["a"],QItemLabel:l["a"],QBadge:d["a"]}),p()(f,"directives",{Ripple:h["a"]})},"1f0c":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"q-mt-lg"},[a("q-list",{attrs:{separator:"",bordered:""}},t._l(t.tasksCompleted,(function(t,e){return a("task",{key:e,attrs:{task:t,id:e,completed:!0}})})),1)],1)},s=[],r={props:["tasksCompleted"],components:{task:a("1730").default}},o=r,i=a("2877"),u=a("1c1c"),c=a("eebe"),l=a.n(c),d=Object(i["a"])(o,n,s,!1,null,null,null);e["default"]=d.exports;l()(d,"components",{QList:u["a"]})},"1f87":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("q-list",{attrs:{separator:"",bordered:""}},t._l(t.dataPlan,(function(e,n){return a("task",{key:n,attrs:{task:e,id:n,searchQuery:t.searchQuery,completed:!1}})})),1)],1)},s=[],r={props:["dataPlan","searchQuery"],components:{task:a("1730").default}},o=r,i=a("2877"),u=a("1c1c"),c=a("eebe"),l=a.n(c),d=Object(i["a"])(o,n,s,!1,null,null,null);e["default"]=d.exports;l()(d,"components",{QList:u["a"]})},"90b0":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-page",{staticClass:"q-pa-sm"},[a("q-input",{attrs:{outlined:"",dense:""},scopedSlots:t._u([{key:"prepend",fn:function(){return[a("q-icon",{attrs:{name:"search"}})]},proxy:!0}]),model:{value:t.searchQuery,callback:function(e){t.searchQuery=e},expression:"searchQuery"}}),Object.keys(t.planCompleted).length?a("tasks-completed",{attrs:{tasksCompleted:t.planCompleted}}):t._e(),Object.keys(t.planTodo).length?a("tasks-todo",{attrs:{searchQuery:t.searchQuery,dataPlan:t.planTodo}}):a("no-tasks"),a("div",{staticClass:"inline rounded-borders cursor-pointer",staticStyle:{"max-width":"300px"}},[a("div",{staticClass:"fit flex flex-center text-center non-selectable q-pa-md"},[t._v("\n      Công đoạn: ("+t._s(t.congdoan.label)+")\n    ")]),a("q-menu",{attrs:{"touch-position":""}},[a("q-list",{staticStyle:{"min-width":"100px"}},t._l(t.congdoans,(function(e){return a("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],key:e.value,attrs:{clickable:""}},[a("q-item-section",{on:{click:function(a){return t.chonCongdoan(e)}}},[t._v("\n            "+t._s(e.label)+"\n          ")])],1)})),1)],1)],1)],1)},s=[],r=a("448a"),o=a.n(r),i=(a("a481"),a("6762"),a("2fdb"),a("4917"),a("551c"),a("ac6a"),a("cadf"),a("5df3"),a("a34a")),u=a.n(i),c=(a("96cf"),a("c973")),l=a.n(c),d=(a("6b54"),a("06db"),a("20d6"),a("7f7f"),a("fa7d")),h={data:function(){return{dataPlan:[],congdoan:null,congdoans:[],week:null,year:null,dautuan:"",todayThu:"",status:null,options:[{label:"Tất cả",value:"all"},{label:"Hoàn thành",value:"completed"},{label:"Chưa hoàn thành",value:"pending"}],dupplicate:[],searchQuery:sessionStorage.getItem("search"),dataNumbers:[],lsx:null}},created:function(){var t=this;this.$store.getters["base/mySources"].forEach((function(e){t.congdoans.push({value:e.id,label:e.name})}));var e=this.$route.query.stepId,a=this.$route.query.year,n=this.$route.query.week,s=this.$route.query.search_query;if(s&&(this.searchQuery=s),this.status="pending",e&&a&&n){this.year=a,this.week=n;var r=this.congdoans.findIndex((function(t){return t.value===parseInt(e)}));r>-1&&(this.congdoan=this.congdoans[r])}else{var o=new Date,i=o.getFullYear();this.year=i,this.week=Object(d["g"])(o),this.dautuan=this.year.toString().substring(2,4)+""+this.week,this.congdoans.length>0&&(this.congdoan=this.congdoans[0])}this.congdoan&&this.week&&this.year&&this.loadNumberAndLoadData()},methods:{loadNumber:function(){var t=this;return l()(u.a.mark((function e(){var a,n;return u.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.lsx=null,t.dataNumbers=[],a={year:t.year,week:t.week},e.next=5,t.$store.dispatch("production/GET_NUMBER_PO",a);case 5:n=e.sent,n.data.forEach((function(e){t.dataNumbers.push({label:"LSX "+e.number,value:e.number})})),t.dataNumbers.length>0&&(t.lsx=t.dataNumbers[0]);case 8:case"end":return e.stop()}}),e)})))()},chonLenhSX:function(t){this.lsx=t,this.load()},loadNumberAndLoadData:function(){var t=this;this.loadNumber().then((function(){Promise.all([t.load()])}))},fliterOptions:function(){var t=this,e=this.dupplicate,a={path:this.$route.fullPath,query:{week:this.week,year:this.year,stepId:this.congdoan.value}};if(null!==this.status)switch(a.query.status=this.status,this.status){case"all":break;case"completed":e=e.filter((function(t){return"Hoàn thành"===t.status}));break;default:e=e.filter((function(t){return"Đang sản xuất"===t.status}));break}this.searchQuery&&(this.searchQuery=sessionStorage.getItem("search"),a.query.search_query=this.searchQuery,e=e.filter((function(e){var a=e.itemName.toString().toLowerCase()+" "+e.itemHeight+" "+e.itemWidth+" "+e.itemLength;e.match=a;var n=e.match.includes(t.searchQuery.toString().toLowerCase());return n}))),this.$router.replace(a),this.dataPlan=e},chonCongdoan:function(t){this.searchQuery="",this.load(),this.congdoan=t,this.loadNumberAndLoadData()},goDetail:function(t){this.$router.push({name:"confirm-po",params:{code:t+"_"+this.lsx.value}})},format:function(t){return Object(d["d"])(t)},load:function(){var t=this;return l()(u.a.mark((function e(){var a,n;return u.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.lsx){e.next=11;break}return Object(d["m"])(),a={stepId:t.congdoan.value,year:t.year,week:t.week,number:t.lsx.value},t.$router.replace({path:t.$route.fullPath,query:{stepId:t.congdoan.value,year:t.year,week:t.week,status:t.status}}),e.next=6,t.$store.dispatch("production/GET_LIST_SAN_LUONG",a);case 6:n=e.sent,t.dataPlan=n.data,t.dataPlan.forEach((function(t){null===t.totalQuantity&&(t.totalQuantity=0),null===t.quantityByDay&&(t.quantityByDay=0)})),t.dupplicate=t.dataPlan,Object(d["a"])();case 11:case"end":return e.stop()}}),e)})))()}},components:{"tasks-todo":a("1f87").default,"tasks-completed":a("1f0c").default,"no-tasks":a("734f").default},computed:{planTodo:function(){var t=this,e=this.dataPlan.filter((function(t){return!t.loiCongDon}));return this.searchQuery&&(e=e.filter((function(e){var a=e.itemName.toString().toLowerCase()+" "+e.itemHeight+" "+e.itemWidth+" "+e.itemLength;e.match=a;var n=e.match.includes(t.searchQuery.toString().toLowerCase());return n}))),e.reduce((function(t,e){return t.map((function(t){return t.itemId+t.market})).includes(e.itemId+e.market)?t:[].concat(o()(t),[e])}),[])},planCompleted:function(){var t=this,e=this.dataPlan.filter((function(t){return t.loiCongDon}));return this.searchQuery&&(e=e.filter((function(e){var a=e.itemName.toString().toLowerCase()+" "+e.itemHeight+" "+e.itemWidth+" "+e.itemLength;e.match=a;var n=e.match.includes(t.searchQuery.toString().toLowerCase());return n}))),e.reduce((function(t,e){return t.map((function(t){return t.itemId+t.market})).includes(e.itemId+e.market)?t:[].concat(o()(t),[e])}),[])}}},m=h,p=a("2877"),f=a("9989"),k=a("27f9"),g=a("0016"),y=a("4e73"),b=a("1c1c"),v=a("66e5"),_=a("4074"),w=a("7f67"),Q=a("eebe"),q=a.n(Q),C=Object(p["a"])(m,n,s,!1,null,null,null);e["default"]=C.exports;q()(C,"components",{QPage:f["a"],QInput:k["a"],QIcon:g["a"],QMenu:y["a"],QList:b["a"],QItem:v["a"],QItemSection:_["a"]}),q()(C,"directives",{ClosePopup:w["a"]})}}]);