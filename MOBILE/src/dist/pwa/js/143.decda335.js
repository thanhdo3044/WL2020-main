(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[143],{fb9e:function(a,t,e){"use strict";e.r(t);var o=function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("q-page",{staticClass:"q-pa-md"},[e("div",{staticClass:"row justify-center"},[e("div",{staticClass:"col-8 col-sm-6 prodTextTitle"},[a._v("\n            Bảng giá chờ duyệt\n        ")])]),e("div",{staticClass:"row justify-center q-mt-md"},[e("div",{staticClass:"col-12 col-sm-8"},[e("q-card",{staticClass:"my-card"},[e("q-card-section",[e("div",{staticClass:"text-h6"},[a._v("Yêu cầu phê duyệt số "+a._s(a.info.ID))]),e("div",{staticClass:"text-subtitle2"},[a._v(a._s(a.info.CREATED_AT))])]),e("q-card-section",[e("DxPivotGrid",{ref:"grid",attrs:{id:"pivotgrid","data-source":a.dataSource,"allow-filtering":!0,"show-borders":!0,"show-column-grand-totals":!1,"show-row-grand-totals":!1,"show-row-totals":!1,"show-column-totals":!1}}),e("q-separator",{attrs:{spaced:""}}),e("h5",[a._v("Lý do cập nhật : ")]),e("p",[a._v(a._s(a.info.REQ_NOTE))])],1)],1)],1),e("div",{staticClass:"col-12 col-sm-3 q-ml-sm"},[e("q-card",{staticClass:"my-card"},[e("q-card-section",[e("div",{staticClass:"text-h6"},[a._v("Phê duyệt")])]),e("q-card-section",[e("p",{staticClass:"woodText"},[a._v("Ngày Áp dụng")]),e("q-input",{attrs:{filled:"",mask:"date",rules:["date"]},scopedSlots:a._u([{key:"append",fn:function(){return[e("q-icon",{staticClass:"cursor-pointer",attrs:{name:"event"}},[e("q-popup-proxy",{ref:"qDateProxy",attrs:{"transition-show":"scale","transition-hide":"scale"}},[e("q-date",{on:{input:function(){return a.$refs.qDateProxy.hide()}},model:{value:a.approvalDate,callback:function(t){a.approvalDate=t},expression:"approvalDate"}})],1)],1)]},proxy:!0}]),model:{value:a.approvalDate,callback:function(t){a.approvalDate=t},expression:"approvalDate"}}),e("p",{staticClass:"woodText"},[a._v("Lý do")]),e("q-input",{attrs:{filled:"",type:"textarea"},model:{value:a.app_reason,callback:function(t){a.app_reason=t},expression:"app_reason"}}),e("div",{staticClass:"row q-mt-sm"},[e("div",{staticClass:"col-6"},[e("q-btn",{directives:[{name:"show",rawName:"v-show",value:a.showApproval,expression:"showApproval"}],attrs:{icon:"close",color:"amber",glossy:"",label:"Từ chối"},on:{click:function(t){a.confirm_reject=!0}}})],1),e("div",{staticClass:"col-6",attrs:{align:"right"}},[e("q-btn",{directives:[{name:"show",rawName:"v-show",value:a.showApproval,expression:"showApproval"}],attrs:{icon:"check",color:"primary",glossy:"",label:"Duyệt"},on:{click:function(t){a.confirm_approval=!0}}})],1)])],1)],1)],1)]),e("q-dialog",{attrs:{persistent:""},model:{value:a.confirm_approval,callback:function(t){a.confirm_approval=t},expression:"confirm_approval"}},[e("q-card",{staticStyle:{"min-width":"300px"}},[e("q-card-section",{staticClass:"row items-center"},[e("span",{staticClass:"q-ml-sm"},[a._v("Bạn đã chắc chắn !")])]),e("q-card-actions",{attrs:{align:"right"}},[e("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Hủy",color:"primary"}}),e("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Đồng Ý",color:"primary"},on:{click:a.approval_confirm}})],1)],1)],1),e("q-dialog",{attrs:{persistent:""},model:{value:a.confirm_reject,callback:function(t){a.confirm_reject=t},expression:"confirm_reject"}},[e("q-card",{staticStyle:{"min-width":"300px"}},[e("q-card-section",{staticClass:"row items-center"},[e("span",{staticClass:"q-ml-sm"},[a._v("Bạn đã chắc chắn !")])]),e("q-card-actions",{attrs:{align:"right"}},[e("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Hủy",color:"primary"}}),e("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Đồng Ý",color:"primary"},on:{click:a.approval_reject}})],1)],1)],1)],1)},s=[],r=e("a34a"),i=e.n(r),c=(e("96cf"),e("c973")),n=e.n(c),l=e("61f7"),p=e("bd4c"),d=(e("d9b2"),{components:{DxPivotGrid:l["DxPivotGrid"],DxFieldChooser:l["DxFieldChooser"]},data:function(){return{dataPrices:[],dataSource:[],confirm_reject:!1,confirm_approval:!1,info:{},showApproval:!1,approvalDate:"",app_reason:""}},created:function(){var a=new Date,t=p["b"].formatDate(a,"YYYY/MM/DD");this.approvalDate=t;var e=this.$route.params.id;this.initData(e)},methods:{approval_confirm:function(){this.approval(1)},approval_reject:function(){this.approval(2)},approval:function(a){var t=this;return n()(i.a.mark((function e(){var o,s;return i.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return o={reqId:t.$route.params.id,status:a,approvalDate:t.approvalDate,approvalReson:t.app_reason},e.next=3,t.$store.dispatch("wood/APPROVAL_PRICE",o);case 3:s=e.sent,!0===s.meta.success?(t.$q.notify({message:"Phê duyệt thành công !",color:"green"}),t.$router.push("/wood-price-list")):t.$q.notify({message:s.meta.messages.message,color:"red"});case 5:case"end":return e.stop()}}),e)})))()},initData:function(a){var t=this;return n()(i.a.mark((function e(){var o,s;return i.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$store.dispatch("wood/GET_PRICE_BY_REQID",a);case 2:o=e.sent,t.dataPrices=o.data.detail,t.info=o.data.info,0===t.info.APPROVAL_STATUS&&(t.showApproval=!0),s={fields:[{caption:"ITYPE",width:120,dataField:"ITYPE",area:"row",expanded:!0},{caption:"ITEM_NAME",dataField:"ITEM_NAME",area:"row",width:150,expanded:!0},{dataField:"WTYPE_NAME",area:"column",expanded:!0},{dataField:"DTYPE_NAME",area:"column",expanded:!0},{caption:"ĐG Hiện tại",dataField:"CUR_PRICE",dataType:"number",summaryType:"sum",area:"data",format:"fixedPoint"},{caption:"ĐG mới",dataField:"PRICE",dataType:"number",summaryType:"sum",area:"data",format:"fixedPoint"}],store:o.data.detail},t.dataSource=s;case 8:case"end":return e.stop()}}),e)})))()}}}),u=d,m=e("2877"),v=e("9989"),f=e("9c40"),h=e("f09f"),w=e("a370"),_=e("eb85"),q=e("27f9"),x=e("0016"),y=e("7cbe"),b=e("52ee"),C=e("24e8"),g=e("4b7e"),D=e("7f67"),P=e("eebe"),E=e.n(P),T=Object(m["a"])(u,o,s,!1,null,null,null);t["default"]=T.exports;E()(T,"components",{QPage:v["a"],QBtn:f["a"],QCard:h["a"],QCardSection:w["a"],QSeparator:_["a"],QInput:q["a"],QIcon:x["a"],QPopupProxy:y["a"],QDate:b["a"],QDialog:C["a"],QCardActions:g["a"]}),E()(T,"directives",{ClosePopup:D["a"]})}}]);