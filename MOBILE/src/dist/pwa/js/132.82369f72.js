(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[132],{ae82:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-page",{staticClass:"q-pa-sm"},[a("app-bar",[t._v("Chỉnh sửa dữ liệu ")]),a("div",{staticClass:"row justify-center q-mt-sm"},[a("div",{staticClass:"col-12 col-sm-6"},[a("q-select",{attrs:{outlined:"",options:t.woodsType,label:"Phận loại"},model:{value:t.wtype,callback:function(e){t.wtype=e},expression:"wtype"}})],1)]),a("div",{staticClass:"row justify-center q-mt-sm"},[a("div",{staticClass:"col-12 col-sm-6"},[a("q-select",{attrs:{outlined:"",options:t.wtype2s,label:"Loại gỗ"},model:{value:t.wtype2,callback:function(e){t.wtype2=e},expression:"wtype2"}})],1)]),a("div",{staticClass:"row justify-center q-mt-sm"},[a("div",{staticClass:"col-12 col-sm-6"},[a("q-select",{attrs:{outlined:"",options:t.dtypes,label:"Tình trạng gỗ"},model:{value:t.dtype,callback:function(e){t.dtype=e},expression:"dtype"}})],1)]),a("div",{staticClass:"row justify-center q-mt-md"},[a("div",{staticClass:"col-12 col-sm-6"},[a("q-select",{attrs:{outlined:"",options:t.items,label:"Chọn qui cách"},model:{value:t.item,callback:function(e){t.item=e},expression:"item"}})],1)]),a("div",{staticClass:"row justify-center q-mt-sm"},[a("div",{staticClass:"col-12 col-sm-6"},[a("q-input",{attrs:{outlined:"",type:"number",label:"Số bó"},model:{value:t.packageQuantity,callback:function(e){t.packageQuantity=t._n(e)},expression:"packageQuantity"}})],1)]),a("div",{staticClass:"row justify-center q-mt-sm"},[a("div",{staticClass:"col-12 col-sm-6"},[a("q-input",{attrs:{outlined:"",type:"number",label:"Số tờ/bó"},model:{value:t.pcsPerPackage,callback:function(e){t.pcsPerPackage=t._n(e)},expression:"pcsPerPackage"}})],1)]),a("div",{staticClass:"row justify-center q-mt-sm"},[a("div",{staticClass:"col-12 col-sm-6"},[a("q-input",{attrs:{outlined:"",label:"Ghi chú"},model:{value:t.note,callback:function(e){t.note=e},expression:"note"}})],1)]),a("div",{staticClass:"row justify-center q-mt-sm"},[a("div",{staticClass:"col-12 col-sm-6"},[a("q-btn",{staticClass:"full-width",attrs:{color:"primary",glossy:"",label:"Lưu lại"},on:{click:function(e){t.confirm=!0}}})],1)]),a("q-dialog",{attrs:{persistent:""},model:{value:t.confirm,callback:function(e){t.confirm=e},expression:"confirm"}},[a("q-card",{staticStyle:{"min-width":"300px"}},[a("q-card-section",{staticClass:"row items-center"},[a("span",{staticClass:"q-ml-sm"},[t._v("Bạn đã chắc chắn ?.")])]),a("q-card-actions",{attrs:{align:"right"}},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Hủy",color:"primary"}}),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Đồng Ý",color:"primary"},on:{click:t.submit}})],1)],1)],1)],1)},s=[],r=(a("7f7f"),a("20d6"),a("a34a")),i=a.n(r),c=(a("551c"),a("ac6a"),a("cadf"),a("06db"),a("5df3"),a("96cf"),a("c973")),o=a.n(c),l=a("dd38"),u={components:{"app-bar":l["a"]},data:function(){return{items:[],item:null,packageQuantity:"",pcsPerPackage:"",woodsType:[],wtype:null,note:"",wtype2s:[],wtype2:null,confirm:!1,dtypes:[],dtype:null}},created:function(){this.initData()},methods:{initData:function(){var t=this;return o()(i.a.mark((function e(){return i.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.all([t.loadWoodTypes(),t.loadInputType(),t.loadItems(),t.loadDType()]).then((function(e){t.loadCurrentData()})));case 1:case"end":return e.stop()}}),e)})))()},loadCurrentData:function(){var t=this,e=this.$route.params.id;return new Promise(function(){var a=o()(i.a.mark((function a(n,s){var r,c,o,l,u,p;return i.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.$store.dispatch("wood/GET_DETAIL_DLT",e);case 2:r=a.sent,r.data.length>0&&(c=r.data[0],o=t.woodsType.findIndex((function(t){return t.value===c.INPUT_TYPE_ID})),t.wtype=t.woodsType[o],l=t.wtype2s.findIndex((function(t){return t.value===c.WOOD_TYPE_ID})),t.wtype2=t.wtype2s[l],u=t.dtypes.findIndex((function(t){return t.value===c.DTYPE})),t.dtype=t.dtypes[u],p=t.items.findIndex((function(t){return t.value=c.ITEM_ID})),t.item=t.items[p],t.packageQuantity=c.PACKAGE_QUANTITY,t.pcsPerPackage=c.PCS_PER_PACKAGE,t.note=c.NOTE),n(!0);case 5:case"end":return a.stop()}}),a)})));return function(t,e){return a.apply(this,arguments)}}())},loadWoodTypes:function(){var t=this;return new Promise(function(){var e=o()(i.a.mark((function e(a,n){var s;return i.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$store.dispatch("wood/GET_WOOD_TYPE");case 2:s=e.sent,s.data.length>0&&s.data.forEach((function(e){var a={value:e.ID,label:e.NAME};t.wtype2s.push(a)})),a(!0);case 5:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}())},loadDType:function(){var t=this;return new Promise(function(){var e=o()(i.a.mark((function e(a,n){var s;return i.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$store.dispatch("wood/GET_DTYPE","vcn");case 2:s=e.sent,s.data.forEach((function(e){var a={label:e.NAME,value:e.CODE};t.dtypes.push(a)})),t.dtypes.length>0&&(t.dtype=t.dtypes[0]),a(!0);case 6:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}())},loadInputType:function(){var t=this;return new Promise(function(){var e=o()(i.a.mark((function e(a,n){var s,r;return i.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return s={moduleCode:"vcn",type:void 0},e.next=3,t.$store.dispatch("wood/GET_INPUT_TYPE",s);case 3:r=e.sent,r.data.forEach((function(e){var a={label:e.NAME,value:e.ID};t.woodsType.push(a)})),t.woodsType.length>0&&(t.wtype=t.woodsType),a(!0);case 7:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}())},loadItems:function(){var t=this;return new Promise(function(){var e=o()(i.a.mark((function e(a,n){var s,r,c;return i.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return s=100010,r={typeId:s},e.next=4,t.$store.dispatch("wood/GET_ITEM_BY_TYPE",r);case 4:c=e.sent,c.data.length>0&&c.data.forEach((function(e){var a={value:e.id,label:e.height+"*"+e.width+"*"+e.length+" ("+e.name+")"};t.items.push(a)})),a(c);case 7:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}())},submit:function(){var t=this;return o()(i.a.mark((function e(){var a,n,s;return i.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.validate){e.next=7;break}return a=t.$route.params.id,n={data:{itemId:t.item.value,pcsPackage:t.pcsPerPackage,packageQuantity:t.packageQuantity,inputTypeId:t.wtype.value,note:t.note,wType:t.wtype2.value,dType:t.dtype.value,iType:t.wtype.value},id:a},e.next=5,t.$store.dispatch("wood/UPDATE_DETAIL_RECEIPT",n);case 5:s=e.sent,s.data[0].RESULT?(t.$q.notify({message:"Thành công !",color:"green"}),t.$router.go(-1)):t.$q.notify({message:s.data[0].MESSAGE,color:"red"});case 7:case"end":return e.stop()}}),e)})))()},validate:function(){return!!(this.item&&this.woodsType&&this.wtype2&&this.pcsPerPackage&&this.packageQuantity)}}},p=u,d=a("2877"),f=a("9989"),m=a("ddd8"),y=a("27f9"),w=a("9c40"),v=a("24e8"),h=a("f09f"),T=a("a370"),b=a("4b7e"),g=a("7f67"),P=a("eebe"),k=a.n(P),E=Object(d["a"])(p,n,s,!1,null,null,null);e["default"]=E.exports;k()(E,"components",{QPage:f["a"],QSelect:m["a"],QInput:y["a"],QBtn:w["a"],QDialog:v["a"],QCard:h["a"],QCardSection:T["a"],QCardActions:b["a"]}),k()(E,"directives",{ClosePopup:g["a"]})}}]);