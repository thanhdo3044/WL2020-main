(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[34],{"0c0e":function(t,n,a){"use strict";a.r(n);var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("q-page",{staticClass:"q-pa-md q-gutter-sm"},[n("q-banner",{staticClass:"bg-primary text-white"},[n("div",{staticClass:"text-h5"},[e._v("Kết thúc lệnh sản xuất")])]),n("q-card",{staticClass:"my-card"},[n("q-separator",{attrs:{spaced:""}}),n("q-card-section",[n("div",{staticClass:"row widget-container q-pa-sm"},[n("div",{staticClass:"col-12 col-md-3 q-pa-sm"},[n("q-select",{attrs:{disable:"",color:"grey-3","label-color":"orange",filled:"",options:e.factories,label:"Chọn nhà máy"},model:{value:e.factory,callback:function(t){e.factory=t},expression:"factory"}})],1),n("div",{staticClass:"col-12 col-md-3 q-pa-sm"},[n("q-input",{attrs:{color:"grey-3","label-color":"orange",outlined:"",value:e.ngayDongGoi?e.moment(e.ngayDongGoi).format("w"):"",label:"Tuần"},on:{keyup:function(t){return e.load(e.week)}},scopedSlots:e._u([{key:"append",fn:function(){return[n("q-icon",{attrs:{name:"next_week",color:"orange"}})]},proxy:!0}]),model:{value:e.week,callback:function(t){e.week=t},expression:"week"}})],1),n("div",{staticClass:"col-12 col-md-3 q-pa-sm"},[n("div",{staticClass:"col-12 q-pa-sm"},[n("q-select",{staticStyle:{width:"100%"},attrs:{options:e.optionNumber,label:"Lệnh sản xuất"},model:{value:e.numberPO,callback:function(t){e.numberPO=t},expression:"numberPO"}})],1)])])]),n("div",{staticClass:"row widget-container q-pa-lg"},[n("div",{staticClass:"col-12 col-md-3 q-pa-sm text-weight-medium"},[n("q-btn",{staticClass:"q-mr-sm q-mb-sm q-pa-sm text-primary shadow-10 text-weight-medium borders-radius-inherit text-h8",attrs:{"text-color":"purple",glossy:"",unelevated:"",label:"Kết thúc","icon-right":"send","no-caps":""},on:{click:function(t){return e.confirm(e.week)}}}),n("q-btn",{staticClass:"q-mr-sm q-mb-sm q-pa-sm text-primary shadow-10 text-weight-medium borders-radius-inherit text-h8",attrs:{"text-color":"purple",glossy:"",unelevated:"",label:"Mở lại","icon-right":"send","no-caps":""},on:{click:function(t){return e.unConfirm(e.week)}}})],1)]),n("q-card-section",{directives:[{name:"show",rawName:"v-show",value:e.showProgress,expression:"showProgress"}]},[n("div",{staticClass:"row"},[n("div",{staticClass:"col-12"},[n("q-linear-progress",{attrs:{size:"25px",value:e.progress1,color:"darkcyan"}},[n("div",{staticClass:"absolute-full flex flex-center"},[n("q-badge",{attrs:{color:"white","text-color":"black",label:e.progressLabel1}})],1)])],1)])]),n("q-card-section")],1)],1)},r=[],s=(a("8e6e"),a("8a81"),a("ac6a"),a("cadf"),a("06db"),a("456d"),a("a34a")),c=a.n(s),i=(a("96cf"),a("c973")),l=a.n(i),u=a("9523"),d=a.n(u),p=a("c1df"),h=a.n(p),m=a("2f62"),f=a("d30a"),b=a("7db7"),g=a("9fc8"),w=a("fa7d");a("cf57");function x(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?x(Object(n),!0).forEach((function(t){d()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var y={components:{DxDataGrid:f["DxDataGrid"],DxColumn:f["DxColumn"],DxEditing:f["DxEditing"],DxPaging:f["DxPaging"],DxLookup:f["DxLookup"],DxRequiredRule:f["DxRequiredRule"],DxScrolling:f["DxScrolling"],DxSearchPanel:f["DxSearchPanel"],DxTextBox:g["DxTextBox"],DxSelection:b["DxSelection"],DxTreeList:b["DxTreeList"]},data:function(){return{week:h()().format("w"),edit:!0,markets:[],markets1:[],dataSource:[],numberPO:"",dscongdoan:[{id:100057,name:"Đóng gói X2(Thuận Hưng)",type:"th"},{id:100069,name:"Đóng gói X3(Thuận Hưng)",type:"th"}],optionNumber:[],congdoan:100069,year:null,allDataPlan:[],marketSelect:{name:""},payloadCreatePlan:[],showDetail:!1,type:"th",progress1:0,showProgress:!1,showStatus:!1,showCreateButton:!0,countDown:5,countFail:0,soLenh:"",hienThiXacNhan:!1,hienThiCongDoan:!1,deptExpandedRowKeys:[],deptOks:[],thucHienTiep:!0,deptSelectedRowKeys:[],departments:[],factory:{label:"NM Thuận Hưng",value:"100000",code:"TH"},factories:[{label:"NM Thuận Hưng",value:"100000",code:"TH"},{label:"NM Quang Minh 1",value:"100002",code:"QM1"}]}},created:function(){var e=new Date;this.week=Object(w["g"])(e);var t=e.getFullYear();this.year=t;var n=this.$route.query.type;n&&(this.dscongdoan=this.dscongdoan.filter((function(e){return e.type===n}))),this.load(this.week)},computed:v(v({},Object(m["c"])("base",["myFactoryInfor"])),{},{grid:function(){return this.$refs.grid.instance},progressLabel1:function(){return(100*this.progress1).toFixed(2)+"%"},myPos:function(){console.log(this.markets)}}),methods:{confirm:function(e){var t=this;return l()(c.a.mark((function n(){var a,o;return c.a.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a={number:t.numberPO||Math.floor(1e7*Math.random()),week:e},n.next=3,t.$store.dispatch("production/CONFIRM_END_PO",a);case 3:o=n.sent,1==o.data[0].result?Object(w["o"])():Object(w["n"])();case 5:case"end":return n.stop()}}),n)})))()},unConfirm:function(e){var t=this;return l()(c.a.mark((function n(){var a,o;return c.a.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a={number:t.numberPO||Math.floor(1e7*Math.random()),week:e},n.next=3,t.$store.dispatch("production/UNCOMFIRM_END_PO",a);case 3:o=n.sent,1==o.data[0].result?Object(w["o"])():t.$q.notify({message:"Chọn sai LSX hoặc tuần",caption:"change again",color:"secondary"});case 5:case"end":return n.stop()}}),n)})))()},load:function(e){var t=this;return l()(c.a.mark((function n(){var a,o;return c.a.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t.optionNumber=[],a={week:e,factoryId:t.myFactoryInfor.factoryId},n.next=4,t.$store.dispatch("production/GET_PO",a);case 4:return o=n.sent,t.numberPO=o.data,n.next=8,t.numberPO.forEach((function(e){t.optionNumber.push(e.number)}));case 8:t.optionNumber.length>0&&(t.numberPO=t.optionNumber[0]);case 9:case"end":return n.stop()}}),n)})))()},chonWeek:function(e){console.log("e.chonWeek",e.value),this.week=e.value},chonNumber:function(t){console.log("e.chonNumber",e.value),this.load()},chonCongDoan:function(e){this.congdoan=e.value},chonYear:function(e){console.log("e.value",e.value),this.year=e.value},chonSoLenh:function(e){this.soLenh=e.value},onSelectionChanged:function(e){var t=e.selectedRowsData;console.log(t),this.marketSelect=t[0]}}},D=y,k=(a("b5b6"),a("2877")),O=a("9989"),q=a("54e1"),P=a("f09f"),C=a("eb85"),S=a("a370"),j=a("ddd8"),N=a("27f9"),Q=a("0016"),T=a("7cbe"),M=a("52ee"),L=a("9c40"),E=a("6b1d"),_=a("58a8"),R=a("eebe"),I=a.n(R),F=Object(k["a"])(D,o,r,!1,null,"602cb84e",null);n["default"]=F.exports;I()(F,"components",{QPage:O["a"],QBanner:q["a"],QCard:P["a"],QSeparator:C["a"],QCardSection:S["a"],QSelect:j["a"],QInput:N["a"],QIcon:Q["a"],QPopupProxy:T["a"],QDate:M["a"],QBtn:L["a"],QLinearProgress:E["a"],QBadge:_["a"]})},b5b6:function(e,t,n){"use strict";var a=n("e4c5"),o=n.n(a);o.a},e4c5:function(e,t,n){}}]);