(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[44],{"4c64":function(t,e,a){},bc7e:function(t,e,a){"use strict";var s=a("4c64"),i=a.n(s);i.a},e779:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-page",{staticClass:"q-pa-ma-sm"},[a("div",{staticClass:"row justify-center",attrs:{id:"topbb"}},[a("div",{staticClass:"col-3",attrs:{align:"left"}},[a("img",{attrs:{src:"/statics/app-logo-128x128.png",alt:""}})]),a("div",{staticClass:"col-9"},[a("p",{staticClass:"bbTitle"},[t._v("BIÊN BẢN GIAO NHẬN GỖ")]),a("p",{staticClass:"bbSubTitle"},[t._v("(KIÊM PHIẾU NHẬP KHO)")])])]),a("q-separator",{staticStyle:{"margin-top":"-23px"}}),a("div",{staticClass:"row justify-center q-ma-sm"},[a("div",{staticClass:"col-6 woodText"},[t._v("\n           Số phiếu nhập :\n        ")]),a("div",{staticClass:"col-6 woodText"},[t._v("\n            "+t._s(t.receipt?t.receipt.YEAR+"."+t.receipt.NUMBER_OF_MONTH+"/"+t.receipt.MONTH+t.receipt.WH_CODE:"")+"\n        ")]),a("div",{staticClass:"col-6 woodText"},[t._v("\n            Nhà cung cấp :\n        ")]),a("div",{staticClass:"col-6 woodText"},[t._v("\n            "+t._s(t.receipt?t.receipt.VENDOR_NAME:"")+"\n        ")]),a("div",{staticClass:"col-6 woodText"},[t._v("\n            Địa chỉ :\n        ")]),a("div",{staticClass:"col-6 woodText"},[t._v("\n            "+t._s(t.receipt?t.receipt.VENDOR_ADDRESS:"")+"\n        ")]),a("div",{staticClass:"col-6 woodText"},[t._v("\n            Nhập tại kho :\n        ")]),a("div",{staticClass:"col-6 woodText"},[t._v("\n            "+t._s(t.receipt?t.receipt.WAREHOUSE_NAME:"")+"\n        ")]),a("div",{staticClass:"col-12 woodText"},[t._v("\n            Cùng nhau kiểm đếm khối lượng gỗ như sau :\n        ")])]),a("div",{staticClass:"row justify-center q-ma-sm"},[a("table",{staticStyle:{width:"100%","font-family":"'Time New Roman'"}},[a("tr",[a("th",{staticClass:"text-center",staticStyle:{width:"10px","text-align":"center"},attrs:{rowspan:"2",colspan:"1"}},[t._v("STT")]),a("th",{staticClass:"text-center",attrs:{rowspan:"1",colspan:"3"}},[t._v("Qui cách")]),a("th",{staticClass:"text-center",attrs:{rowspan:"2",colspan:"1"}},[t._v("Số bó")]),a("th",{staticClass:"text-center",attrs:{rowspan:"2",colspan:"1"}},[t._v("Số tờ/bó")]),a("th",{staticClass:"text-center",attrs:{rowspan:"2",colspan:"1"}},[t._v("Tổng số tờ")]),a("th",{staticClass:"text-center",attrs:{rowspan:"2",colspan:"1"}},[t._v("KL thực nhập(m³)")]),a("th",{staticClass:"text-center",attrs:{rowspan:"2",colspan:"1"}},[t._v("Ghi chú")])]),a("tr",[a("th",[t._v("Dày")]),a("th",[t._v("Rộng")]),a("th",[t._v("Dài")])]),t._l(t.detail,(function(e,s){return a("tr",{key:e.ID},[a("td",{staticStyle:{"text-align":"center"}},[t._v(t._s(s+1))]),a("td",{staticStyle:{"text-align":"center"}},[t._v(t._s(e.HEIGHT))]),a("td",{staticStyle:{"text-align":"center"}},[t._v(t._s(e.WIDTH))]),a("td",{staticStyle:{"text-align":"center"}},[t._v(t._s(e.LENGTH))]),a("td",{staticStyle:{"text-align":"center"}},[t._v(t._s(t.format(e.PACKAGE_QUANTITY)))]),a("td",{staticStyle:{"text-align":"center"}},[t._v(t._s(e.PCS_PER_PACKAGE))]),a("td",{staticStyle:{"text-align":"center"}},[t._v(t._s(t.format(e.PACKAGE_QUANTITY*e.PCS_PER_PACKAGE)))]),a("td",{staticStyle:{"text-align":"center"}},[t._v(t._s(e.VOLUMN.toFixed(4)))]),a("td",{staticStyle:{"text-align":"center"}},[t._v(t._s(e.NOTE)+","+t._s(e.WOOD_TYPE)+"\n                    "),a("br"),0===t.receipt.LOCK&&!1===t.receipt.ALLOW_PAY?a("span",{staticClass:"fake-link print-hide",on:{click:function(a){return t.goEdit(e.ID)}}},[t._v(" Sửa")]):t._e()])])})),t.detail.length>0?a("tr",{staticStyle:{"background-color":"darkgray"}},[a("td",{staticClass:"text-center",attrs:{colspan:"6"}},[t._v("Tổng cộng")]),a("td",{staticClass:"text-right"}),a("td",{staticClass:"text-right",staticStyle:{"text-align":"center"}},[t._v(t._s(t.sumVolumn))]),a("td",{staticClass:"text-right"})]):a("tr",[a("td",{staticStyle:{"text-align":"center"},attrs:{colspan:"9"}},[t._v("\n                    không có dữ liệu !\n                ")])])],2)]),a("div",{staticClass:"row woodText",staticStyle:{"font-weight":"600"}},[a("div",{staticClass:"col-1"}),a("div",{staticClass:"col-2"},[t._v("\n            Người giao\n        ")]),a("div",{staticClass:"col-3"},[t._v("\n            Kế toán\n        ")]),a("div",{staticClass:"col-3"},[t._v("\n            Thủ kho\n        ")]),a("div",{staticClass:"col-3"},[t._v("\n            Xưởng\n        ")])]),t.receipt?a("q-page-sticky",{staticClass:"print-hide",attrs:{position:"bottom-right",offset:[18,18]}},[t.receipt.ALLOW_PAY?a("q-btn",{attrs:{fab:"",icon:"print",color:"accent"},on:{click:t.print}}):a("q-btn",{attrs:{fab:"",icon:"add",color:"accent"},on:{click:t.goAdd}})],1):t._e(),t.detail.length>0&&!1===t.receipt.ALLOW_PAY?a("q-page-sticky",{attrs:{position:"top-right",offset:[18,58]}},[a("q-btn",{attrs:{label:"Hoàn thành",color:"primary","label-position":"left",icon:"save_alt"},on:{click:function(e){t.confirm=!0}},model:{value:t.fab1,callback:function(e){t.fab1=e},expression:"fab1"}})],1):t._e(),a("q-dialog",{attrs:{persistent:""},model:{value:t.confirm,callback:function(e){t.confirm=e},expression:"confirm"}},[a("q-card",[a("q-card-section",{staticClass:"row items-center"},[a("div",{staticClass:"top-title"},[t._v("Xác nhận hoàn thành biên bản")])]),a("q-card-section",[a("h6",[t._v("Sau khi hoàn thành bạn sẽ không còn cơ hội sửa dữ liệu biên bản !")])]),a("q-card-actions",{attrs:{align:"right"}},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Hủy",color:"primary"}}),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Đồng Ý",color:"primary"},on:{click:t.save}})],1)],1)],1)],1)},i=[],n=a("a34a"),c=a.n(n),r=(a("96cf"),a("c973")),o=a.n(r),l=a("dd38"),d=a("fa7d"),p={components:{"app-bar":l["a"]},data:function(){return{receipt:null,showAdd:!1,detail:[],fab1:!0,confirm:!1}},created:function(){this.initData()},computed:{numberReceipt:function(){return this.receipt?this.receipt.YEAR+"."+this.receipt.NUMBER_OF_MONTH+"/"+this.receipt.MONTH:"....."},sumVolumn:function(){var t=0;return this.detail.length>0&&this.detail.forEach((function(e){t+=e.VOLUMN})),t.toFixed(4)}},methods:{format:function(t){return Object(d["d"])(t)},print:function(){window.print()},initData:function(){var t=this;return o()(c.a.mark((function e(){var a,s;return c.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t.$route.params.id,e.next=3,t.$store.dispatch("wood/GET_DETAIL_RECEIPT",a);case 3:if(s=e.sent,!(s.data.length>0)){e.next=8;break}return t.receipt=s.data[0],e.next=8,t.loadDetailReceipt(t.receipt.ID);case 8:case"end":return e.stop()}}),e)})))()},loadDetailReceipt:function(t){var e=this;return o()(c.a.mark((function a(){var s;return c.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,e.$store.dispatch("wood/GET_DETAIL_RECEIPT_BY_RECEIPT",t);case 2:s=a.sent,e.detail=s.data;case 4:case"end":return a.stop()}}),a)})))()},goAdd:function(){var t=this.$route.params.id;this.$router.push({name:"add-wh-detail",params:{id:t}})},goEdit:function(t){this.$router.push({name:"edit-wh-detail",params:{id:t}})},save:function(){var t=this;return o()(c.a.mark((function e(){var a,s,i,n,r,o,l,p,h;return c.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a="",s="",t.detail.length>0)for(i=0;i<t.detail.length;i++)n=t.detail[i],n.PACKAGE_QUANTITY>0&&n.PCS_PER_PACKAGE>0&&(a+=n.ITEM_ID+",",s+=n.PCS_PER_PACKAGE*n.PACKAGE_QUANTITY+",");return e.next=4,t.$store.dispatch("wood/LOCK_RECEIPT",t.receipt.ID);case 4:r=e.sent,r.meta.success?(o=t.$store.getters["base/myWarehouses"][0].id,t.$store.getters["base/myDestinations"][0].id,l=a.slice(0,-1),p=s.slice(0,-1),h={sourceId:null,destinationId:o,itemId:l,quantity:p,receiptId:t.receipt.ID},t.$store.dispatch("production/ACTION_CREATE_PALLET",h).then((function(e){!0===e.meta.success?t.$q.notify({message:"Hoàn thành",color:"green"}):Object(d["n"])("Đã xảy ra lỗi !")})),t.$router.push("/wood-list-receipt?type=wh")):Object(d["n"])("Hoàn thành lỗi !");case 6:case"end":return e.stop()}}),e)})))()}}},h=p,u=(a("bc7e"),a("2877")),_=a("9989"),v=a("eb85"),f=a("de5e"),C=a("9c40"),g=a("24e8"),m=a("f09f"),w=a("a370"),b=a("4b7e"),x=a("7f67"),E=a("eebe"),T=a.n(E),A=Object(u["a"])(h,s,i,!1,null,"45607f00",null);e["default"]=A.exports;T()(A,"components",{QPage:_["a"],QSeparator:v["a"],QPageSticky:f["a"],QBtn:C["a"],QDialog:g["a"],QCard:m["a"],QCardSection:w["a"],QCardActions:b["a"]}),T()(A,"directives",{ClosePopup:x["a"]})}}]);