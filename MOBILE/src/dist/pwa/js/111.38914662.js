(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[111],{"4a77":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-page",{staticClass:"q-pa-md"},[a("div",{staticClass:"row justify-center"},[a("div",[a("q-avatar",{attrs:{size:"200px"}},[a("img",{attrs:{src:"https://cdn.pixabay.com/photo/2016/08/08/09/17/avatar-1577909_960_720.png"}})]),a("br"),a("br"),a("q-separator")],1)]),a("div",{staticClass:"row justify-center q-mt-sm"},[a("div",{staticClass:"col-12 col-sm-6"},[a("q-card",{staticClass:"prodTextNormal"},[a("q-card-section",[a("q-toggle",{attrs:{label:"Chế độ nền tối"},model:{value:e.darkMode,callback:function(t){e.darkMode=t},expression:"darkMode"}})],1)],1)],1)]),a("div",{staticClass:"row justify-center q-mt-md"},[a("div",{staticClass:"col-12 col-sm-6"},[a("q-input",{attrs:{outlined:"",readonly:"",label:"Họ tên"},model:{value:e.fullname,callback:function(t){e.fullname=t},expression:"fullname"}}),a("br"),a("q-input",{attrs:{outlined:"",readonly:"",label:"Bộ phận"},model:{value:e.department.NAME,callback:function(t){e.$set(e.department,"NAME",t)},expression:"department.NAME"}}),a("br"),a("q-input",{attrs:{outlined:"",readonly:"",label:"Email"},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),a("br")],1)]),a("div",{staticClass:"row justify-center q-mt-sm"},[a("div",{staticClass:"col-12 col-sm-6"},[a("q-card",[a("q-card-section",[a("p",{staticClass:"prodTextTitle"},[e._v("Đổi mật khẩu")])]),a("q-separator"),a("q-card-section",[a("q-input",{attrs:{outlined:"",type:"password",label:"Mật khẩu đang sử dụng"},model:{value:e.curPass,callback:function(t){e.curPass=t},expression:"curPass"}}),a("br"),a("q-input",{attrs:{outlined:"",type:"password",label:"Mật khẩu mới"},model:{value:e.newPass,callback:function(t){e.newPass=t},expression:"newPass"}}),a("br"),a("q-input",{attrs:{outlined:"",type:"password",label:"Nhập lại mật khẩu mới"},model:{value:e.newPass2,callback:function(t){e.newPass2=t},expression:"newPass2"}})],1),a("q-card-actions",[a("q-btn",{attrs:{color:"primary full-width",glossy:"",label:"Đổi mật khẩu"},on:{click:function(t){e.showDialog=!0}}})],1)],1)],1)]),a("q-dialog",{attrs:{persistent:""},model:{value:e.showDialog,callback:function(t){e.showDialog=t},expression:"showDialog"}},[a("q-card",{staticStyle:{"min-width":"300px"}},[a("q-card-section",{staticClass:"row items-center"},[a("span",{staticClass:"q-ml-sm prodTextTitle"},[e._v("Chắc chưa nè ?")])]),a("q-card-actions",{attrs:{align:"right"}},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Hủy",color:"primary"}}),a("q-btn",{attrs:{flat:"",label:"Đồng Ý",color:"primary"},on:{click:e.confirm}})],1)],1)],1),a("q-inner-loading",{attrs:{showing:e.showLoading}},[a("q-spinner-gears",{attrs:{size:"150px",color:"primary"}})],1)],1)},n=[],r=(a("8e6e"),a("8a81"),a("ac6a"),a("cadf"),a("06db"),a("456d"),a("9523")),o=a.n(r),i=a("a34a"),c=a.n(i),l=(a("96cf"),a("c973")),u=a.n(l),d=a("2f62");function p(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,s)}return a}function m(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?p(Object(a),!0).forEach((function(t){o()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):p(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var f={data:function(){return{text:"",curPass:"",newPass:"",newPass2:"",fullname:"",department:"",email:"",showLoading:!1,showDialog:!1,userInfo:{},darkMode:!1}},watch:{darkMode:function(e){e?(localStorage.setItem("theme","dark"),this.$q.dark.set(!0)):(localStorage.setItem("theme","light"),this.$q.dark.set(!1))}},created:function(){var e=this;return u()(c.a.mark((function t(){var a;return c.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.initTheme(),a=e.$store.state.base.userInfo,e.userInfo=a,e.email=a.email||"Chưa có",e.fullname=a.firstName||" "+a.lastName,t.next=6,e.GET_DEPARTMENTSBYID(e.userInfo.department);case 6:e.department=t.sent,console.log("bộ phận",e.department);case 8:case"end":return t.stop()}}),t)})))()},methods:m(m({},Object(d["b"])("base",["GET_DEPARTMENTSBYID"])),{},{initTheme:function(){var e=localStorage.getItem("theme");"dark"===e&&(this.darkMode=!0)},confirm:function(){var e=this;return u()(c.a.mark((function t(){var a;return c.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.showDialog=!1,e.showLoading=!0,!(e.curPass&&e.newPass&&e.newPass2)){t.next=17;break}if(e.newPass.trim()!==e.newPass2.trim()){t.next=13;break}return a={data:{username:e.userInfo.account,oldPassword:e.curPass,newPassword:e.newPass},token:e.userInfo.token},t.next=7,e.$store.dispatch("production/ACTION_CHANGE_PASS",a).then((function(t){!0===t.meta.success?(e.$q.notify({message:"Đổi mật khẩu thành công !",color:"green"}),setTimeout((function(){e.$store.dispatch("production/ACTION_LOGOUT")}),1500)):e.$q.notify({message:t.meta.messages.message,color:"red"})})).catch((function(t){e.$q.notify({message:t.data.meta.messages.message,color:"red"})}));case 7:e.showLoading=!1,e.curPass="",e.newPass="",e.newPass2="",t.next=15;break;case 13:e.$q.notify({message:"Mật khẩu mới không giống nhau !",color:"red"}),e.showLoading=!1;case 15:t.next=19;break;case 17:e.$q.notify({message:"Vui lòng nhập đủ thông tin ",color:"red"}),e.showLoading=!1;case 19:case"end":return t.stop()}}),t)})))()}})},h=f,g=a("2877"),w=a("9989"),b=a("cb32"),k=a("eb85"),q=a("f09f"),v=a("a370"),P=a("9564"),y=a("27f9"),x=a("4b7e"),O=a("9c40"),C=a("24e8"),T=a("74f7"),j=a("cf57"),D=a("7f67"),I=a("eebe"),E=a.n(I),M=Object(g["a"])(h,s,n,!1,null,null,null);t["default"]=M.exports;E()(M,"components",{QPage:w["a"],QAvatar:b["a"],QSeparator:k["a"],QCard:q["a"],QCardSection:v["a"],QToggle:P["a"],QInput:y["a"],QCardActions:x["a"],QBtn:O["a"],QDialog:C["a"],QInnerLoading:T["a"],QSpinnerGears:j["a"]}),E()(M,"directives",{ClosePopup:D["a"]})}}]);