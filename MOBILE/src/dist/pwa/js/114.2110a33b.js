(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[114],{"01bd":function(t,s,e){"use strict";e.r(s);var a=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("q-page",{staticClass:"q-md-pa"},[e("div",{staticClass:"row justify-center q-mt-sm"},[e("div",{staticClass:"col-12 col-sm-6"},[e("div",{staticClass:"prodTextTitle",staticStyle:{"text-align":"center","font-size":"20px"}},[t._v("\n                Tạo pallet\n            ")])])]),t.showProjectInfo?e("div",{staticClass:"row justify-center q-pa-sm q-ma-sm"},[e("div",{staticClass:"col-12 col-sm-6"},[e("q-card",[e("q-card-section",[e("div",{staticClass:"row"},[e("div",{staticClass:"col-10"},[e("div",{staticClass:"prodTextTitle"},[t._v("\n                            Thông tin dự án\n                        ")])]),e("div",{staticClass:"col-2"},[e("q-btn",{attrs:{flat:"",icon:"refresh"},on:{click:t.goSelectProject}})],1)])]),e("q-separator"),e("q-card-section",{staticClass:"prodTextNormal"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-6"},[t._v("Mã dự án : ")]),e("div",{staticClass:"col-6"},[t._v(t._s(this.$store.state.funiture.projectSelected.code))])]),e("div",{staticClass:"row"},[e("div",{staticClass:"col-6"},[t._v("Tên dự án :")]),e("div",{staticClass:"col-6"},[t._v(t._s(this.$store.state.funiture.projectSelected.name))])]),this.$store.state.funiture.projectSelected.customer.id?e("div",{staticClass:"row"},[e("div",{staticClass:"col-6"},[t._v("Khách hàng :")]),e("div",{staticClass:"col-6"},[t._v(t._s(this.$store.state.funiture.projectSelected.customer.name))])]):t._e()])],1)],1)]):e("div",{staticClass:"row q-mt-md justify-center"},[e("div",{staticClass:"col-10 col-sm-6"},[e("q-btn",{attrs:{color:"primary full-width",glossy:"",label:"Chọn dự án"},on:{click:t.goSelectProject}})],1)]),e("div",{directives:[{name:"show",rawName:"v-show",value:t.showProjectInfo,expression:"showProjectInfo"}]},[null===t.item?e("div",{staticClass:"row justify-center q-ma-sm q-pa-sm"},[e("div",{staticClass:"col-12"},[e("q-select",{staticStyle:{"font-family":"'Time New Roman'","font-size":"16px"},attrs:{disable:t.disableSelectItem,"use-input":"","input-debounce":"0",behavior:"dialog",options:t.items,label:"Qui cách tinh :"},on:{filter:t.searchItem},model:{value:t.item,callback:function(s){t.item=s},expression:"item"}})],1)]):e("div",{staticClass:"row justify-center q-ma-sm q-pa-sm"},[e("div",{staticClass:"col-12 col-sm-6"},[e("q-card",[e("q-card-section",[e("p",{staticClass:"prodTextTitle"},[t._v(t._s(t.item.name)+" ")])]),e("q-separator"),e("q-card-section",{staticClass:"prodTextNormal"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-6"}),e("div",{staticClass:"col-6"})]),e("div",{staticClass:"row"},[e("div",{staticClass:"col-6"},[t._v("Mã sản phẩm : ")]),e("div",{staticClass:"col-6"},[t._v(t._s(t.item.code))])]),e("div",{staticClass:"row"},[e("div",{staticClass:"col-4"},[t._v("Dầy :")]),e("div",{staticClass:"col-4"},[t._v("Rộng : ")]),e("div",{staticClass:"col-4"},[t._v("Dài : ")])]),e("div",{staticClass:"row"},[e("div",{staticClass:"col-4"},[t._v(t._s(t.item.height||"0"))]),e("div",{staticClass:"col-4"},[t._v(t._s(t.item.width||"0")+" ")]),e("div",{staticClass:"col-4"},[t._v(t._s(t.item.length||"0"))])]),e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("q-select",{staticStyle:{"font-family":"'Time New Roman'","font-size":"16px"},attrs:{behavior:"dialog",options:t.sources,label:"Xuất từ công đoạn :"},model:{value:t.source,callback:function(s){t.source=s},expression:"source"}})],1)]),e("div",{directives:[{name:"show",rawName:"v-show",value:t.showDes,expression:"showDes"}],staticClass:"row"},[e("div",{staticClass:"col-12"},[e("q-select",{staticStyle:{"font-family":"'Time New Roman'","font-size":"16px"},attrs:{behavior:"dialog",options:t.destinations,label:"Xuất đến công đoạn :"},model:{value:t.destination,callback:function(s){t.destination=s},expression:"destination"}})],1)])]),e("q-separator"),e("q-card-section",[e("div",{staticClass:"row justify-center"},[e("div",{staticClass:"col-8 q-pa-md"},[e("q-input",{attrs:{outlined:"",label:"Số lượng"},model:{value:t.qty,callback:function(s){t.qty=t._n(s)},expression:"qty"}})],1)])]),e("q-card-actions",[e("q-btn",{staticClass:"glossy full-width",attrs:{color:"secondary",label:"Tạo palllet"},on:{click:t.valid}})],1)],1)],1)])]),e("q-dialog",{attrs:{persistent:""},model:{value:t.showDialog,callback:function(s){t.showDialog=s},expression:"showDialog"}},[e("q-card",{staticStyle:{"min-width":"300px"}},[e("q-card-section",{staticClass:"row items-center"},[e("span",{staticClass:"q-ml-sm prodTextTitle"},[t._v("Bạn đã chắc chắn ? !")])]),e("q-card-actions",{attrs:{align:"right"}},[e("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Hủy",color:"primary"}}),e("q-btn",{attrs:{flat:"",label:"Đồng Ý",color:"primary"},on:{click:t.create}})],1)],1)],1),e("dialog-success",{attrs:{show:t.showSuccess,palletCode:t.palletCode,closeDialog:t.closeDialog}})],1)},i=[],o=(e("6b54"),e("06db"),e("a34a")),c=e.n(o),l=(e("7f7f"),e("96cf"),e("c973")),n=e.n(l),r=e("c0af"),d={components:{"dialog-success":r["a"]},data:function(){return{showProjectInfo:!1,showLoadItems:!1,item:null,items:[],qty:"",disableSelectItem:!1,sources:[],source:null,destinations:[],destination:null,showDialog:!1,showSuccess:!1,palletCode:"",showDes:!0}},created:function(){void 0!==this.$store.state.funiture.projectSelected.id&&(this.showProjectInfo=!0,this.loadItems(this.$store.state.funiture.projectSelected.id))},watch:{source:function(t){100317===t.value?(this.showDes=!1,this.destination=t):this.showDes=!0}},methods:{valid:function(){this.source&&this.destination&&this.item&&parseFloat(this.qty)>0?this.showDialog=!0:this.$q.notify({message:"Thiếu thông tin !",color:"red"})},goSelectProject:function(){this.$router.push("/funiture-select-project")},loadItems:function(t){var s=this;return n()(c.a.mark((function e(){var a;return c.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return s.showLoadItems=!0,e.next=3,s.$store.dispatch("funiture/ACTION_LOAD_ITEM_FROM_PROJECT",t);case 3:a=e.sent,!0===a.meta.success?(a.data.forEach((function(t){var e=t.height||"0",a=t.width||"0",i=t.length||"0",o={label:t.name+" -> Dầy :"+e+" Rộng: "+a+" Dài: "+i,value:t.id,name:t.name,code:t.code,width:t.width,height:t.height,length:t.length,itemId:t.itemId};s.items.push(o)})),1===s.items.length&&(s.item=s.items[0],s.disableSelectItem=!0),s.$store.getters["production/mySources"].forEach((function(t){var e={label:t.name,value:t.id};s.sources.push(e)})),s.$store.getters["production/myDestinations"].forEach((function(t){var e={label:t.name,value:t.id};s.destinations.push(e)})),s.showLoadItems=!1):s.$q.notify({message:a.meta.messages.message,color:"red"});case 5:case"end":return e.stop()}}),e)})))()},searchItem:function(t,s){var e=this,a=[];this.$store.state.funiture.items.forEach((function(t){var s={label:t.name+" -> Dầy :"+t.height+" Rộng: "+t.width+" Dài: "+t.length,value:t.id,name:t.name,code:t.code,width:t.width,height:t.height,length:t.length,itemId:t.itemId};a.push(s)})),s(""!==t?function(){var s=t.toLowerCase();e.items=a.filter((function(t){var e=t.label;if(e.toString().indexOf(s)>-1)return t}))}:function(){e.items=a})},create:function(){var t=this;return n()(c.a.mark((function s(){var e,a,i,o,l,n;return c.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return e={sourceId:t.source.value,destinationId:t.destination.value,projectProductId:t.item.value,itemId:t.item.itemId,quantity:t.qty},t.showDialog=!1,s.next=4,t.$store.dispatch("production/ACTION_CREATE_PALLET",e);case 4:a=s.sent,!0===a.meta.success?(console.log(a.data),t.palletCode=a.data[0].code,t.showSuccess=!0,t.$q.notify({message:"Tạo pallet thành công !",color:"green"}),i=t.destination.value.toString()+"-RECIVED-PALLET",o="Đã nhận được pallet số "+t.palletCode,l="Nhận được pallet từ công đoạn "+t.source.label+" chuyển đến công đoạn "+t.destination.label,n="/#/production-dashboard?code="+t.palletCode,t.$sendFcm(o,l,n,i,{}).then((function(t){console.log("send fcm success",t)})).catch((function(t){console.log("send Error: "+t)})),t.destination=null,t.qty=""):t.$q.notify({message:a.meta.messages.message,color:"red"});case 6:case"end":return s.stop()}}),s)})))()},closeDialog:function(){this.showSuccess=!1}}},u=d,h=e("2877"),m=e("9989"),v=e("f09f"),p=e("a370"),f=e("9c40"),w=e("eb85"),g=e("ddd8"),C=e("27f9"),q=e("4b7e"),b=e("24e8"),y=e("7f67"),_=e("eebe"),I=e.n(_),S=Object(h["a"])(u,a,i,!1,null,null,null);s["default"]=S.exports;I()(S,"components",{QPage:m["a"],QCard:v["a"],QCardSection:p["a"],QBtn:f["a"],QSeparator:w["a"],QSelect:g["a"],QInput:C["a"],QCardActions:q["a"],QDialog:b["a"]}),I()(S,"directives",{ClosePopup:y["a"]})}}]);