(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[56],{e795:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-page",[a("order-header",{attrs:{order:e.order}}),a("q-card",{staticClass:"my-card"},[a("ChuyenNhanVien",{attrs:{status:e.status,order:e.order,metaValue:e.metaValue.selection,metaValue:e.metaValue,disable:e.disable}})],1),a("q-card",[a("q-card-section",[void 0==e.order.Requests||e.order.Requests&&!Object.keys(e.order.Requests).length?a("q-checkbox",{attrs:{label:"Đồng ý"},model:{value:e.disable,callback:function(t){e.disable=t},expression:"disable"}}):e._e()],1)],1),e.disable?a("order-approved",{attrs:{metaValue:e.metaValue,order:e.order}}):e._e(),a("send-message",{attrs:{order:e.order}})],1)},r=[],s=(a("8e6e"),a("8a81"),a("ac6a"),a("cadf"),a("456d"),a("f751"),a("6b54"),a("06db"),a("a34a")),l=a.n(s),o=(a("7f7f"),a("96cf"),a("c973")),i=a.n(o),u=a("9523"),d=a.n(u),c=a("2f62"),m=a("932a"),p=a("6664"),h=a("0ac8"),f=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-card-section",[a("div",{staticClass:"q-gutter-sm text-primary text-h6"},[e._v("\n      Chọn loại mẫu điều chuyển nhân viên :\n      "),a("br")]),a("div",{staticClass:"q-gutter-sm q-mt-sm"},[null==e.order.OrderMeta[0].selection?a("div",[a("q-radio",{attrs:{dense:"",val:"Điều chuyển cá nhân",label:"Điều chuyển cá nhân",color:"teal"},model:{value:e.metaValue.selection,callback:function(t){e.$set(e.metaValue,"selection",t)},expression:"metaValue.selection"}}),a("q-radio",{attrs:{dense:"",val:"Điều chuyển tập thể",label:"Điều chuyển tập thể",color:"red"},model:{value:e.metaValue.selection,callback:function(t){e.$set(e.metaValue,"selection",t)},expression:"metaValue.selection"}})],1):a("div",["Điều chuyển tập thể"==e.order.OrderMeta[0].selection?a("span",[a("q-radio",{attrs:{dense:"",val:"Điều chuyển tập thể",color:"red"},model:{value:e.metaValue.selection,callback:function(t){e.$set(e.metaValue,"selection",t)},expression:"metaValue.selection"}})],1):a("span",[a("q-radio",{attrs:{dense:"",val:"Điều chuyển cá nhân",color:"red"},model:{value:e.metaValue.selection,callback:function(t){e.$set(e.metaValue,"selection",t)},expression:"metaValue.selection"}})],1),a("span",{staticClass:"q-ml-sm",staticStyle:{"font-size":"20px"}},[e._v(e._s(e.metaValue.selection))])])]),"Điều chuyển tập thể"==e.metaValue.selection&&null!=e.metaValue.selection?a("div",["Không được duyệt"==e.order.status?a("div",[a("q-input",{staticClass:"q-mt-sm",attrs:{outlined:"",label:"Kính gửi : ",readonly:!e.disable},model:{value:e.metaValue.kinhGui,callback:function(t){e.$set(e.metaValue,"kinhGui",t)},expression:"metaValue.kinhGui"}}),a("q-input",{staticClass:"q-mt-sm",attrs:{outlined:"",label:"Tên tôi là : ",readonly:!e.disable},model:{value:e.userInfo.lastName,callback:function(t){e.$set(e.userInfo,"lastName",t)},expression:"userInfo.lastName"}}),a("q-input",{staticClass:"q-mt-sm",attrs:{outlined:"",label:"Chức danh : ",readonly:!e.disable},model:{value:e.userInfo.position,callback:function(t){e.$set(e.userInfo,"position",t)},expression:"userInfo.position"}}),a("q-input",{staticClass:"q-mt-sm",attrs:{outlined:"",label:"Phòng ban/bộ phận : ",readonly:!e.disable},model:{value:e.nameDepartmentName.NAME,callback:function(t){e.$set(e.nameDepartmentName,"NAME",t)},expression:"nameDepartmentName.NAME"}}),a("div",{staticClass:"q-mt-sm",attrs:{outlined:""}},[e._v("Căn cứ vào tình hình thực tế công việc và nguyện vọng của người lao động,\n  "),a("br"),e._v("Nay tôi làm đơn này, kính xin Ban Tổng giám đốc cho tôi được điều chuyển các cá nhân có tên sau sang vị trí công tác mới, gồm: \n  ")]),a("DxDataGrid",{attrs:{id:"gridContainer","data-source":e.order.OrderMeta,"allow-column-reordering":!0,"show-borders":!0,"show-row-lines":!0,"word-wrap-enabled":!0},on:{"init-new-row":e.initNewRow,"row-inserted":e.RowInserted,"row-updated":e.RowUpdated,"row-removed":e.RowDelted}},[a("DxPaging",{attrs:{enabled:!0}}),a("DxEditing",{attrs:{"allow-updating":!e.order.Requests.length||"Không được duyệt"==e.order.status,"allow-deleting":!e.order.Requests.length||"Không được duyệt"==e.order.status,"allow-adding":!e.order.Requests.length||"Không được duyệt"==e.order.status,mode:"row"}}),a("DxColumn",{attrs:{"data-field":"STT",caption:"STT","data-type":"number"}}),a("DxColumn",{attrs:{caption:"Mã NV","data-field":"maNV"}}),a("DxColumn",{attrs:{caption:"Họ và tên","data-field":"fullName2"}}),a("DxColumn",{attrs:{caption:"Vị trí hiện tại","data-field":"department2"}}),a("DxColumn",{attrs:{"data-field":"stepDepartment",caption:"Vị trí đề xuất điều chuyển sang"}})],1),a("div",{staticClass:"q-mt-sm",attrs:{outlined:""}},[e._v("\n      Vậy, kính mong Ban Tổng Giám đốc xem xét, điều chuyển các nhân sự trên./.\n      "),a("br"),e._v("Trân trọng cảm ơn !    \n  ")]),a("q-btn",{staticClass:"q-mt-sm",attrs:{color:"primary","text-color":"white",label:"Sửa"},on:{click:e.updatedOrderMeta}})],1):a("div",[a("q-input",{staticClass:"q-mt-sm",attrs:{outlined:"",label:"Kính gửi : ",readonly:e.disable},model:{value:e.metaValue.kinhGui,callback:function(t){e.$set(e.metaValue,"kinhGui",t)},expression:"metaValue.kinhGui"}}),a("q-input",{staticClass:"q-mt-sm",attrs:{outlined:"",label:"Tên tôi là : ",readonly:e.disable},model:{value:e.userInfo.lastName,callback:function(t){e.$set(e.userInfo,"lastName",t)},expression:"userInfo.lastName"}}),a("q-input",{staticClass:"q-mt-sm",attrs:{outlined:"",label:"Chức danh : ",readonly:e.disable},model:{value:e.userInfo.position,callback:function(t){e.$set(e.userInfo,"position",t)},expression:"userInfo.position"}}),a("q-input",{staticClass:"q-mt-sm",attrs:{outlined:"",label:"Phòng ban/bộ phận : ",readonly:e.disable},model:{value:e.nameDepartmentName.NAME,callback:function(t){e.$set(e.nameDepartmentName,"NAME",t)},expression:"nameDepartmentName.NAME"}}),a("div",{staticClass:"q-mt-sm",attrs:{outlined:""}},[e._v("Căn cứ vào tình hình thực tế công việc và nguyện vọng của người lao động,\n  "),a("br"),e._v("Nay tôi làm đơn này, kính xin Ban Tổng giám đốc cho tôi được điều chuyển các cá nhân có tên sau sang vị trí công tác mới, gồm: \n  ")]),a("DxDataGrid",{attrs:{id:"gridContainer","data-source":e.order.OrderMeta,"allow-column-reordering":!0,"show-borders":!0,"show-row-lines":!0,"word-wrap-enabled":!0},on:{"init-new-row":e.initNewRow,"row-inserted":e.RowInserted,"row-updated":e.RowUpdated,"row-removed":e.RowDelted}},[a("DxPaging",{attrs:{enabled:!0}}),a("DxEditing",{attrs:{"allow-updating":!e.order.Requests.length||"Không được duyệt"==e.order.status,"allow-deleting":!e.order.Requests.length||"Không được duyệt"==e.order.status,"allow-adding":!e.order.Requests.length||"Không được duyệt"==e.order.status,mode:"row"}}),a("DxColumn",{attrs:{"data-field":"STT",caption:"STT","data-type":"number"}}),a("DxColumn",{attrs:{caption:"Mã NV","data-field":"maNV"}}),a("DxColumn",{attrs:{caption:"Họ và tên","data-field":"fullName2"}}),a("DxColumn",{attrs:{caption:"Vị trí hiện tại","data-field":"department2"}}),a("DxColumn",{attrs:{"data-field":"stepDepartment",caption:"Vị trí đề xuất điều chuyển sang"}})],1),a("div",{staticClass:"q-mt-sm",attrs:{outlined:""}},[e._v("\n      Vậy, kính mong Ban Tổng Giám đốc xem xét, điều chuyển các nhân sự trên./.\n      "),a("br"),e._v("Trân trọng cảm ơn !    \n  ")])],1)]):e._e(),"Điều chuyển cá nhân"==e.metaValue.selection&&null!=e.metaValue.selection?a("div",["Không được duyệt"==e.order.status?a("div",[a("q-input",{staticClass:"q-mt-sm",attrs:{outlined:"",label:"Kính gửi : ",readonly:!e.disable},model:{value:e.metaValue.kinhGui,callback:function(t){e.$set(e.metaValue,"kinhGui",t)},expression:"metaValue.kinhGui"}}),a("q-input",{staticClass:"q-mt-sm",attrs:{outlined:"",label:"Tên tôi là : ",readonly:!e.disable},model:{value:e.userInfo.lastName,callback:function(t){e.$set(e.userInfo,"lastName",t)},expression:"userInfo.lastName"}}),a("q-input",{staticClass:"q-mt-sm",attrs:{outlined:"",label:"Chức danh : ",readonly:!e.disable},model:{value:e.userInfo.position,callback:function(t){e.$set(e.userInfo,"position",t)},expression:"userInfo.position"}}),a("q-input",{staticClass:"q-mt-sm",attrs:{outlined:"",label:"Phòng ban/bộ phận : ",readonly:!e.disable},model:{value:e.nameDepartmentName.NAME,callback:function(t){e.$set(e.nameDepartmentName,"NAME",t)},expression:"nameDepartmentName.NAME"}}),a("div",{staticClass:"q-mt-sm"},[e._v("Phòng ban/bộ phận cần chuyển đến :")]),a("q-select",{staticStyle:{width:"250px"},attrs:{filled:"","use-input":"","input-debounce":"0",label:"Phòng ban/bộ phận chuyển đến",options:e.options,behavior:"dialog",readonly:!e.disable},on:{filter:e.filterFn},scopedSlots:e._u([{key:"no-option",fn:function(){return[a("q-item",[a("q-item-section",{staticClass:"text-grey"},[e._v("\n                  No results\n                ")])],1)]},proxy:!0}],null,!1,3665793935),model:{value:e.metaValue.stepDepartment,callback:function(t){e.$set(e.metaValue,"stepDepartment",t)},expression:"metaValue.stepDepartment"}}),a("q-input",{staticClass:"q-mt-sm",attrs:{outlined:"",label:"Lí do : ",readonly:!e.disable},model:{value:e.metaValue.lyDo,callback:function(t){e.$set(e.metaValue,"lyDo",t)},expression:"metaValue.lyDo"}}),a("div",{staticClass:"q-mt-sm",attrs:{outlined:""}},[e._v("\n            Vậy, kính mong Tổng Giám đốc, Cán bộ quản lý trực tiếp và Trưởng phòng Nhân sự xem xét cho tôi được điều chuyển sang vị trí công tác mới.\n            "),a("br"),e._v("Trân trọng cảm ơn !    \n        ")]),a("q-btn",{staticClass:"q-mt-sm",attrs:{color:"primary","text-color":"white",label:"Sửa"},on:{click:e.updatedOrderMeta}})],1):a("div",[a("q-input",{staticClass:"q-mt-sm",attrs:{outlined:"",label:"Kính gửi : ",readonly:e.disable},model:{value:e.metaValue.kinhGui,callback:function(t){e.$set(e.metaValue,"kinhGui",t)},expression:"metaValue.kinhGui"}}),a("q-input",{staticClass:"q-mt-sm",attrs:{outlined:"",label:"Tên tôi là : ",readonly:e.disable},model:{value:e.userInfo.lastName,callback:function(t){e.$set(e.userInfo,"lastName",t)},expression:"userInfo.lastName"}}),a("q-input",{staticClass:"q-mt-sm",attrs:{outlined:"",label:"Chức danh : ",readonly:e.disable},model:{value:e.userInfo.position,callback:function(t){e.$set(e.userInfo,"position",t)},expression:"userInfo.position"}}),a("q-input",{staticClass:"q-mt-sm",attrs:{outlined:"",label:"Phòng ban/bộ phận : ",readonly:e.disable},model:{value:e.nameDepartmentName.NAME,callback:function(t){e.$set(e.nameDepartmentName,"NAME",t)},expression:"nameDepartmentName.NAME"}}),a("div",{staticClass:"q-mt-sm"},[e._v("Phòng ban/bộ phận cần chuyển đến :")]),a("q-select",{staticStyle:{width:"250px"},attrs:{filled:"","use-input":"","input-debounce":"0",label:"Phòng ban/bộ phận chuyển đến",options:e.options,behavior:"dialog",readonly:e.disable},on:{filter:e.filterFn},scopedSlots:e._u([{key:"no-option",fn:function(){return[a("q-item",[a("q-item-section",{staticClass:"text-grey"},[e._v("\n                  No results\n                ")])],1)]},proxy:!0}],null,!1,3665793935),model:{value:e.metaValue.stepDepartment,callback:function(t){e.$set(e.metaValue,"stepDepartment",t)},expression:"metaValue.stepDepartment"}}),a("q-input",{staticClass:"q-mt-sm",attrs:{outlined:"",label:"Lí do : ",readonly:e.disable},model:{value:e.metaValue.lyDo,callback:function(t){e.$set(e.metaValue,"lyDo",t)},expression:"metaValue.lyDo"}}),a("div",{staticClass:"q-mt-sm",attrs:{outlined:""}},[e._v("\n            Vậy, kính mong Tổng Giám đốc, Cán bộ quản lý trực tiếp và Trưởng phòng Nhân sự xem xét cho tôi được điều chuyển sang vị trí công tác mới.\n            "),a("br"),e._v("Trân trọng cảm ơn !    \n        ")])],1)]):e._e()])},b=[],g=a("6191"),D=a.n(g),v=a("bc3a"),y=a.n(v),N=a("d30a");function x(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function V(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?x(Object(a),!0).forEach((function(t){d()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):x(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var w={components:{DxDataGrid:N["DxDataGrid"],DxColumn:N["DxColumn"],DxEditing:N["DxEditing"],DxPaging:N["DxPaging"],DxButton:D.a,DxLookup:N["DxLookup"]},props:["metaValue","status","disable"],data:function(){return{myDepartment:null,stepDepartment:null,departments:[],events:[],options:null,nameDepartmentName:null,active:!1,status:""}},created:function(){var e=this;return i()(l.a.mark((function t(){var a;return l.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.GET_DEPARTMENTSALL();case 2:return a=t.sent,console.log("dataa",a),t.next=6,e.GET_DEPARTMENTSBYID(e.userInfo.department);case 6:return e.nameDepartmentName=t.sent,t.next=9,a.forEach((function(t){e.departments.push({value:t.ID,label:t.NAME})}));case 9:console.log("options",e.departments);case 10:case"end":return t.stop()}}),t)})))()},methods:V(V(V(V(V({loadData:function(e){var t=this;return i()(l.a.mark((function a(){var n;return l.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return n=null,a.prev=1,a.next=4,t.getOneOrder(e);case 4:n=a.sent,a.next=10;break;case 7:a.prev=7,a.t0=a["catch"](1),console.log(a.t0);case 10:n||t.$router.push({path:"/tao-de-xuat"}),t.order=n.data.data,console.log(n);case 13:case"end":return a.stop()}}),a,null,[[1,7]])})))()},filterFn:function(e,t){var a=this;t(""!==e?function(){var t=e.toLowerCase();a.options=a.departments.filter((function(e){return e.label.toLowerCase().indexOf(t)>-1}))}:function(){a.options=a.departments})}},Object(c["b"])("base",["GET_DEPARTMENTSBYID","GET_DEPARTMENTSALL"])),Object(c["b"])("orders",["getOneOrder","getAllRequests"])),Object(c["b"])("orderMetas",["getOneOrderMeta","addorderMeta","deleteOrderMeta","updateOrderMeta"])),Object(c["b"])("requests",["deleteRequest","resetOrder"])),{},{chonCongDoan:function(){console.log("myDepartment",this.myDepartment.value)},loadDepartment:function(){var e=this;return i()(l.a.mark((function t(){var a;return l.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("base/GET_DEPARTMENTS",{factoryId:e.myFactoryInfor.id});case 2:return a=t.sent,console.log("data",a.data),t.next=6,a.data.forEach((function(t){e.departments.push({id:t.id,value:t.name})}));case 6:console.log("this.departments",e.departments);case 7:case"end":return t.stop()}}),t)})))()},RowInserted:function(e){var t=this;return i()(l.a.mark((function a(){var n,r,s,o,i,u,d,c,m,p;return l.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return console.log("STT",e.data.STT),console.log("STT",e.data.id),n=e.data.STT.toString(),r=t.metaValue.kinhGui,s=e.data.maNV,o=t.userInfo.lastName,i=e.data.fullName2,u=null!=e.data.department2?e.data.department2:"",d=t.metaValue.selection,c=t.userInfo.position,m=null!=t.nameDepartmentName.NAME?t.nameDepartmentName.NAME:"",p=null!=e.data.stepDepartment?e.data.stepDepartment:"",a.next=14,t.addorderMeta(V(V({},t.order.OrderMeta[0]),{},{metaValue:JSON.stringify([t.metaValue]),STT:n,maNV:s,fullName:o,fullName2:i,kinhGui:r,department2:u,selection:d,department:m,stepDepartment:p,position:c}));case 14:return a.next=16,t.loadData(t.$route.query.id);case 16:case"end":return a.stop()}}),a)})))()},RowDelted:function(e){var t=this;return i()(l.a.mark((function a(){return l.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return console.log("STT",e.data.STT),console.log("STT",e.data.id),a.next=4,t.deleteOrderMeta(e.data.id);case 4:case"end":return a.stop()}}),a)})))()},RowUpdated:function(e){var t=this;return i()(l.a.mark((function a(){var n,r,s,o,i,u,d,c,m,p;return l.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return n=e.data.STT.toString(),r=t.metaValue.kinhGui,s=e.data.maNV,o=t.userInfo.lastName,i=e.data.fullName2,u=null!=e.data.department2?e.data.department2:"",d=t.metaValue.selection,c=t.userInfo.position,m=null!=t.nameDepartmentName.NAME?t.nameDepartmentName.NAME:"",p=null!=e.data.stepDepartment?e.data.stepDepartment:"",a.next=12,t.updateOrderMeta(V(V({},t.order.OrderMeta[0]),{},{metaValue:JSON.stringify([t.metaValue]),STT:n,maNV:s,fullName:o,fullName2:i,kinhGui:r,department2:u,selection:d,department:m,stepDepartment:p,position:c}));case 12:return a.next=14,t.loadData(t.$route.query.id);case 14:case"end":return a.stop()}}),a)})))()},initNewRow:function(e){var t=e.data;console.log("vao initNewRow"),Object.assign(t,{STT:this.order.OrderMeta.length+1})},updatedOrderMeta:function(){var e=this;return i()(l.a.mark((function t(){var a,n,r,s,o,i,u,c,m;return l.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.active=!1,e.disable=!0,n=e.userInfo.lastName,r=e.metaValue.kinhGui,s=e.metaValue.lyDo,o=e.metaValue.selection,i=e.userInfo.position,u=null==e.metaValue.lyDo?" ":e.metaValue.lyDo,c=null!=e.nameDepartmentName.NAME?e.nameDepartmentName.NAME:"",m=null!=e.metaValue.stepDepartment.label?e.metaValue.stepDepartment.label:"",e.updateOrderMeta(V(V({},e.order.OrderMeta[0]),{},(a={metaValue:JSON.stringify([e.metaValue]),fullName:n,position:i,description:u,selection:o,department:c,stepDepartment:m},d()(a,"position",i),d()(a,"kinhGui",r),d()(a,"lyDo",s),a))),t.next=13,y.a.put("/api/v2/orders?orderId=".concat(e.order.id));case 13:return t.next=15,e.deleteRequest(e.order.id);case 15:location.reload();case 16:case"end":return t.stop()}}),t)})))()}}),watch:{disable:function(e){var t;this.active=!1,this.disable=!0;var a=this.userInfo.lastName,n=this.metaValue.kinhGui,r=this.metaValue.lyDo,s=this.metaValue.selection,l=this.userInfo.position,o=null==this.metaValue.lyDo?" ":this.metaValue.lyDo,i=null!=this.nameDepartmentName.NAME?this.nameDepartmentName.NAME:"",u=null!=this.metaValue.stepDepartment.label?this.metaValue.stepDepartment.label:"";this.updateOrderMeta(V(V({},this.order.OrderMeta[0]),{},(t={metaValue:JSON.stringify([this.metaValue]),fullName:a,position:l,description:o,selection:s,department:i,stepDepartment:u},d()(t,"position",l),d()(t,"kinhGui",n),d()(t,"lyDo",r),t)))}},computed:V(V({},Object(c["c"])("orders",["order"])),Object(c["c"])("base",["myFactoryInfor","userInfo","dsCongDoans"]))},T=w,O=a("2877"),q=a("a370"),k=a("3786"),M=a("27f9"),E=a("9c40"),C=a("ddd8"),S=a("66e5"),I=a("4074"),G=a("eebe"),A=a.n(G),R=Object(O["a"])(T,f,b,!1,null,null,null),P=R.exports;function j(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function _(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?j(Object(a),!0).forEach((function(t){d()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):j(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}A()(R,"components",{QCardSection:q["a"],QRadio:k["a"],QInput:M["a"],QBtn:E["a"],QSelect:C["a"],QItem:S["a"],QItemSection:I["a"]});var $={data:function(){return{myDepartment:null,stepDepartment:null,departments:[],events:[],options:null,nameDepartmentName:null,active:!1,disable:!1,status:!1,metaValue:{kinhGui:"Ban TGĐ - Trưởng phòng :  Trưởng phòng Nhân sự :",noiDungTT:"",soTien:0,vietBangChu:"",kemTheo:"",STT:"12",locationWork:"",position:"",number:"",timeRecruit:"",description:"",fullName:"",maNV:"",department:"",stepDepartment:"",lyDo:"",selection1:null,selection2:null,selection3:null,selection4:null,selection:null}}},components:{SendMessage:m["a"],OrderHeader:p["a"],OrderApproved:h["a"],ChuyenNhanVien:P,DxDataGrid:N["DxDataGrid"],DxColumn:N["DxColumn"],DxEditing:N["DxEditing"],DxPaging:N["DxPaging"],DxLookup:N["DxLookup"]},methods:_(_(_(_({filterFn:function(e,t){var a=this;t(""!==e?function(){var t=e.toLowerCase();a.options=a.departments.filter((function(e){return e.label.toLowerCase().indexOf(t)>-1}))}:function(){a.options=a.departments})}},Object(c["b"])("base",["GET_DEPARTMENTSBYID","GET_DEPARTMENTSALL"])),Object(c["b"])("orders",["getOneOrder","getAllRequests"])),Object(c["b"])("orderMetas",["getOneOrderMeta","addorderMeta","deleteOrderMeta","updateOrderMeta"])),{},{chonCongDoan:function(){console.log("myDepartment",this.myDepartment.value)},loadDepartment:function(){var e=this;return i()(l.a.mark((function t(){var a;return l.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("base/GET_DEPARTMENTS",{factoryId:e.myFactoryInfor.id});case 2:return a=t.sent,console.log("data",a.data),t.next=6,a.data.forEach((function(t){e.departments.push({id:t.id,value:t.name})}));case 6:console.log("this.departments",e.departments);case 7:case"end":return t.stop()}}),t)})))()},RowInserted:function(e){console.log("STT",e.data.STT),console.log("STT",e.data.id);var t=e.data.STT.toString(),a=this.metaValue.kinhGui,n=e.data.maNV,r=this.userInfo.lastName,s=e.data.fullName2,l=null!=e.data.department2?e.data.department2:"",o=this.metaValue.selection,i=this.userInfo.position,u=null!=this.nameDepartmentName.NAME?this.nameDepartmentName.NAME:"",d=null!=e.data.stepDepartment?e.data.stepDepartment:"";this.addorderMeta(_(_({},this.order.OrderMeta[0]),{},{metaValue:JSON.stringify([this.metaValue]),STT:t,maNV:n,fullName:r,fullName2:s,kinhGui:a,department2:l,selection:o,department:u,stepDepartment:d,position:i}))},RowDelted:function(e){console.log("STT",e.data.STT),console.log("STT",e.data.id),this.deleteOrderMeta(e.data.id)},RowUpdated:function(e){var t=e.data.STT.toString(),a=this.metaValue.kinhGui,n=e.data.maNV,r=this.userInfo.lastName,s=e.data.fullName2,l=null!=e.data.department2?e.data.department2:"",o=this.metaValue.selection,i=this.userInfo.position,u=null!=this.nameDepartmentName.NAME?this.nameDepartmentName.NAME:"",d=null!=e.data.stepDepartment?e.data.stepDepartment:"";this.updateOrderMeta(_(_({},this.order.OrderMeta[0]),{},{metaValue:JSON.stringify([this.metaValue]),STT:t,maNV:n,fullName:r,fullName2:s,kinhGui:a,department2:l,selection:o,department:u,stepDepartment:d,position:i}))},updatedOrderMeta:function(){var e;this.active=!1,this.disable=!0;var t=this.userInfo.lastName,a=this.metaValue.kinhGui,n=this.metaValue.lyDo,r=this.metaValue.selection,s=this.userInfo.position,l=null==this.metaValue.lyDo?" ":this.metaValue.lyDo,o=null!=this.nameDepartmentName.NAME?this.nameDepartmentName.NAME:"",i=null!=this.metaValue.stepDepartment.label?this.metaValue.stepDepartment.label:"";this.updateOrderMeta(_(_({},this.order.OrderMeta[0]),{},(e={metaValue:JSON.stringify([this.metaValue]),fullName:t,position:s,description:l,selection:r,department:o,stepDepartment:i},d()(e,"position",s),d()(e,"kinhGui",a),d()(e,"lyDo",n),e)))},initNewRow:function(e){var t=e.data;console.log("vao initNewRow"),Object.assign(t,{STT:this.order.OrderMeta.length+1})}}),computed:_(_({},Object(c["c"])("orders",["order"])),Object(c["c"])("base",["userInfo","myFactoryInfor"])),mounted:function(){"Không được duyệt"==this.order.status?(this.active=!0,this.disable=!1,console.log("Không được duyệt")):"Đã được duyệt"==this.order.status&&(this.active=!1,this.disable=!0,console.log("Đã được duyệt"))},created:function(){var e=this;return i()(l.a.mark((function t(){var a;return l.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.GET_DEPARTMENTSALL();case 2:return a=t.sent,console.log("dataa",a),t.next=6,e.GET_DEPARTMENTSBYID(e.userInfo.department);case 6:return e.nameDepartmentName=t.sent,t.next=9,a.forEach((function(t){e.departments.push({value:t.ID,label:t.NAME})}));case 9:console.log("options",e.departments),e.$route.query.id?e.getOneOrder(e.$route.query.id).then((function(t){t.data.data.Requests.length&&(e.disable=!0),e.metaValue=Object.assign(e.metaValue,JSON.parse(t.data.data.OrderMeta[0].metaValue)[0])})):e.$router.push({path:"/tao-de-xuat"});case 11:case"end":return t.stop()}}),t)})))()}},L=$,K=a("9989"),B=a("f09f"),Q=a("8f8e"),J=Object(O["a"])(L,n,r,!1,null,null,null);t["default"]=J.exports;A()(J,"components",{QPage:K["a"],QCard:B["a"],QCardSection:q["a"],QCheckbox:Q["a"]})}}]);