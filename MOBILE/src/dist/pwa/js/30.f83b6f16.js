(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[30],{"2c84":function(t,e,s){},"9c02":function(t,e,s){"use strict";var o=s("2c84"),i=s.n(o);i.a},c1d5:function(t,e,s){"use strict";s.r(e);var o=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("q-page",{staticClass:"q-pa-md"},[s("div",{staticClass:"row justify-end print-hide"},[s("div",{staticClass:"col-12 col-sm-6"},[s("q-btn-group",{attrs:{push:""}},[t.showButton?s("q-btn",{attrs:{color:"secondary",push:"",label:"Thêm mã",icon:"add"},on:{click:function(e){t.showDialogAdd=!0}}}):t._e(),t.showCompletedButton?s("q-btn",{attrs:{color:"primary",push:"",label:"Hoàn thành",icon:"check"},on:{click:function(e){t.showDialog=!0}}}):t._e(),t.showQCVerify?s("q-btn",{attrs:{color:"primary",push:"",label:"Xác nhận QC",icon:"check"},on:{click:function(e){t.showDialogQCVerify=!0}}}):t._e(),t.showReciverVerify?s("q-btn",{attrs:{color:"warning",push:"",label:"Xác nhận Người nhận",icon:"check"},on:{click:function(e){t.showDialogRecivedVerify=!0}}}):t._e(),t.showXuongVerify?s("q-btn",{attrs:{color:"primary",push:"",label:"Xác nhận Xưởng",icon:"check"},on:{click:function(e){t.showDialogXuongVerify=!0}}}):t._e(),s("q-btn",{attrs:{color:"secondary",push:"",label:"In Biên bản",icon:"print"},on:{click:t.showPrint}})],1)],1)]),s("div",{staticClass:"row justify-center q-mt-md"},[s("div",{staticClass:"col-12",staticStyle:{"text-align":"center"}},[s("div",{staticClass:"prodTextTitle"},[t._v("\n                BIÊN BẢN BÀN GIAO HÀNG HÓA\n                \n            ")])]),s("div",{staticClass:"col-12",staticStyle:{"text-align":"center"}},[s("div",{staticClass:"prodTextNormal"},[t._v("\n                (KIÊM PHIẾU XUẤT KHO)\n            ")])])]),s("div",{staticClass:"row"},[s("div",{staticClass:"col-12",staticStyle:{"background-color":"black",height:"1px"}})]),s("div",{staticClass:"row q-mt-sm prodTextNormal"},[s("div",{staticClass:"col-12",staticStyle:{"text-align":"center"}},[t._v("\n            SỐ PHIẾU : "+t._s(t.goodIssue.goodsIssueNumber)+"\n        ")])]),s("div",{staticClass:"row q-mt-sm prodTextNormal"},[s("div",{staticClass:"col-6"},[t._v("Tên khách hàng :")]),s("div",{staticClass:"col-6",staticStyle:{"font-weight":"600"}},[t._v("????")])]),s("div",{staticClass:"row prodTextNormal"},[s("div",{staticClass:"col-6"},[t._v("Địa chỉ :")]),s("div",{staticClass:"col-6",staticStyle:{"font-weight":"600"}},[t._v(t._s(t.goodIssue.address))])]),s("div",{staticClass:"row prodTextNormal"},[s("div",{staticClass:"col-6"},[t._v("Lệnh xuất hàng ngày :")]),s("div",{staticClass:"col-6",staticStyle:{"font-weight":"600"}},[t._v(t._s(t.goodIssue.orderedGoods))])]),s("div",{staticClass:"row prodTextNormal"},[s("div",{staticClass:"col-6"},[t._v("Ngày giao hàng :")]),s("div",{staticClass:"col-6",staticStyle:{"font-weight":"600"}},[t._v(t._s(t.goodIssue.deliverDate))])]),s("div",{staticClass:"row prodTextNormal"},[s("div",{staticClass:"col-6"},[t._v("Xuất tại kho :")]),s("div",{staticClass:"col-6",staticStyle:{"font-weight":"600"}},[t._v(" NAM HỒNG")])]),s("div",{staticClass:"row prodTextNormal"},[s("div",{staticClass:"col-6"},[t._v("Biển số xe, Số Con't :")]),s("div",{staticClass:"col-6",staticStyle:{"font-weight":"600"}},[t._v(t._s(t.goodIssue.numberPalte))])]),s("div",{staticClass:"row q-mt-sm"},[s("div",{staticClass:"col-10"}),s("div",{staticClass:"col-2"})]),s("div",{staticClass:"row q-mt-sm"},[s("div",{staticClass:"col-12"},[s("table",{staticStyle:{width:"100%","font-family":"'Time New Roman'"}},[s("tr",[s("th",{staticStyle:{width:"10px","text-align":"center"}},[t._v("STT")]),s("th",[t._v("Qui cách")]),s("th",[t._v("Tên sản phẩm")]),s("th",[t._v("Đvt")]),s("th",[t._v("SL")]),s("th",[t._v("Ghi Chú")])]),t._l(t.products,(function(e,o){return s("tr",{key:e.id},[s("td",{staticStyle:{"text-align":"center"}},[t._v(t._s(o+1))]),e.height?s("td",[t._v(t._s(e.height||"?")+"*"+t._s(e.width||"?")+"*"+t._s(e.length||"?"))]):s("td"),s("td",[t._v(t._s(e.name||"?"))]),s("td",{staticStyle:{"text-align":"center"}},[t._v(t._s(e.unit.name||"bộ"))]),s("td",{staticStyle:{"text-align":"center"}},[t._v(t._s(e.quantity))]),s("td",[t._v(t._s(e.note))])])}))],2)])]),s("div",{staticClass:"row"},[s("div",{staticClass:"col-12 q-mt-sm",staticStyle:{"font-style":"italic","font-family":"'Time New Roman'"}},[t._v("\n        Ghi chú: Hàng đạt tiêu chuẩn xuất kho, xếp an toàn, không hư hỏng, xây xước\n      ")])]),s("div",{staticClass:"row q-mt-md",staticStyle:{height:"200px"}},[s("div",{staticClass:"col-3 prodTextNormal"},[t._v("\n        Người nhận\n        "),s("p",{directives:[{name:"show",rawName:"v-show",value:t.isConfirmRecived,expression:"isConfirmRecived"}],staticStyle:{"font-style":"italic","font-family":"'Time New Roman'"}},[t._v("(Đã ký)")])]),s("div",{staticClass:"col-3 prodTextNormal"},[t._v("\n        Xưởng sản xuất\n        "),s("p",{directives:[{name:"show",rawName:"v-show",value:t.isConfirmXuong,expression:"isConfirmXuong"}],staticStyle:{"font-style":"italic","font-family":"'Time New Roman'"}},[t._v("(Đã ký)")])]),s("div",{staticClass:"col-3 prodTextNormal"},[t._v("\n        Phòng QC\n        "),s("p",{directives:[{name:"show",rawName:"v-show",value:t.isConfirmQC,expression:"isConfirmQC"}],staticStyle:{"font-style":"italic","font-family":"'Time New Roman'"}},[t._v("(Đã ký)")])]),s("div",{staticClass:"col-3 prodTextNormal"},[t._v("\n        Thủ kho\n        "),s("p",{directives:[{name:"show",rawName:"v-show",value:t.isCompleted,expression:"isCompleted"}],staticStyle:{"font-style":"italic","font-family":"'Time New Roman'"}},[t._v("(Đã ký)")])])]),s("q-inner-loading",{attrs:{showing:t.showLoading}},[s("q-spinner-gears",{attrs:{size:"150px",color:"primary"}})],1),s("q-dialog",{attrs:{persistent:""},model:{value:t.showDialogAdd,callback:function(e){t.showDialogAdd=e},expression:"showDialogAdd"}},[s("q-card",{staticStyle:{"min-width":"300px"}},[s("q-card-section",{staticClass:"row items-center"},[s("span",{staticClass:"prodTextTitle"},[t._v("Thêm sản phẩm vào biên bản")])]),s("q-separator"),s("q-card-section",[s("q-select",{attrs:{outlined:"",options:t.items,label:"Chọn sản phẩm"},model:{value:t.item,callback:function(e){t.item=e},expression:"item"}}),s("br"),s("q-input",{attrs:{outlined:"",type:"number",label:"Số lượng xuất"},model:{value:t.qty,callback:function(e){t.qty=t._n(e)},expression:"qty"}}),s("br"),s("q-input",{attrs:{outlined:"",label:"Ghi chú"},model:{value:t.note,callback:function(e){t.note=e},expression:"note"}})],1),s("q-card-actions",{attrs:{align:"right"}},[s("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Hủy",color:"primary"}}),s("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Đồng ý",color:"primary"},on:{click:t.add}})],1)],1)],1),s("q-dialog",{attrs:{persistent:""},model:{value:t.showDialog,callback:function(e){t.showDialog=e},expression:"showDialog"}},[s("q-card",{staticStyle:{"min-width":"300px"}},[s("q-card-section",{staticClass:"row items-center"},[s("span",{staticClass:"q-ml-sm prodTextTitle"},[t._v("Bạn đã chắc chắn ? !")])]),s("q-card-actions",{attrs:{align:"right"}},[s("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Hủy",color:"primary"}}),s("q-btn",{attrs:{flat:"",label:"Đồng Ý",color:"primary"},on:{click:t.completed}})],1)],1)],1),s("q-dialog",{attrs:{persistent:""},model:{value:t.showDialogQCVerify,callback:function(e){t.showDialogQCVerify=e},expression:"showDialogQCVerify"}},[s("q-card",{staticStyle:{"min-width":"300px"}},[s("q-card-section",{staticClass:"row items-center"},[s("span",{staticClass:"q-ml-sm prodTextTitle"},[t._v("Bạn đã chắc chắn ? !")])]),s("q-card-actions",{attrs:{align:"right"}},[s("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Hủy",color:"primary"}}),s("q-btn",{attrs:{flat:"",label:"Đồng Ý",color:"primary"},on:{click:t.qcConfirm}})],1)],1)],1),s("q-dialog",{attrs:{persistent:""},model:{value:t.showDialogRecivedVerify,callback:function(e){t.showDialogRecivedVerify=e},expression:"showDialogRecivedVerify"}},[s("q-card",{staticStyle:{"min-width":"300px"}},[s("q-card-section",{staticClass:"row items-center"},[s("span",{staticClass:"q-ml-sm prodTextTitle"},[t._v("Bạn đã chắc chắn ? !")])]),s("q-card-actions",{attrs:{align:"right"}},[s("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Hủy",color:"primary"}}),s("q-btn",{attrs:{flat:"",label:"Đồng Ý",color:"primary"},on:{click:t.recivedConfirm}})],1)],1)],1),s("q-dialog",{attrs:{persistent:""},model:{value:t.showDialogXuongVerify,callback:function(e){t.showDialogXuongVerify=e},expression:"showDialogXuongVerify"}},[s("q-card",{staticStyle:{"min-width":"300px"}},[s("q-card-section",{staticClass:"row items-center"},[s("span",{staticClass:"q-ml-sm prodTextTitle"},[t._v("Bạn đã chắc chắn ? !")])]),s("q-card-actions",{attrs:{align:"right"}},[s("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Hủy",color:"primary"}}),s("q-btn",{attrs:{flat:"",label:"Đồng Ý",color:"primary"},on:{click:t.xuongConfirm}})],1)],1)],1)],1)},i=[],a=(s("7f7f"),s("a34a")),n=s.n(a),r=(s("96cf"),s("c973")),c=s.n(r),l=(s("551c"),s("ac6a"),s("cadf"),s("06db"),s("5df3"),s("20d6"),s("f79b")),d={data:function(){return{goodIssue:{},products:[],showLoading:!0,showDialogAdd:!1,showDialog:!1,item:null,items:[],qty:"",note:"",showButton:!1,showQCVerify:!1,showXuongVerify:!1,showReciverVerify:!1,showDialogQCVerify:!1,showDialogRecivedVerify:!1,showDialogXuongVerify:!1,showCompletedButton:!1,isConfirmQC:!1,isConfirmRecived:!1,isConfirmXuong:!1,isCompleted:!1}},created:function(){this.goodIssue=this.$store.state.funiture.goodIssueSelected;var t=this.$route.params.id;1===this.goodIssue.completed?(this.showButton=!1,this.showCompletedButton=!1,this.isCompleted=!0,-1!==this.$store.getters["production/myFeatures"].findIndex((function(t){return t.id==l["b"].CONFIRM_GI}))&&(null===this.goodIssue.reciverBy?this.showReciverVerify=!0:this.isConfirmRecived=!0),-1!==this.$store.getters["production/myFeatures"].findIndex((function(t){return t.id==l["b"].QC_CONFIRM_GI}))&&(null===this.goodIssue.qcVerify?this.showQCVerifyVerify=!0:this.isConfirmQC=!0),-1!==this.$store.getters["production/myFeatures"].findIndex((function(t){return t.id==l["b"].XUONG_CONFIRM_GI}))&&(null===this.goodIssue.factoryBy?this.showXuongVerify=!0:this.isConfirmXuong=!0)):-1!==this.$store.getters["production/myFeatures"].findIndex((function(t){return t.id==l["b"].GOOD_ISSUE}))&&(this.showButton=!0,this.showCompletedButton=!0),Promise.all([this.loadProduct(t),this.loadProductInProject(this.$store.state.funiture.goodIssueSelected)])},methods:{xuongConfirm:function(){var t=this;return c()(n.a.mark((function e(){var s;return n.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.showDialogXuongVerify=!1,t.showLoading=!0,e.next=4,t.$store.dispatch("funiture/ACTION_XUONG_CONFIRM_GI",t.goodIssue.id);case 4:s=e.sent,!0===s.meta.success?(t.showLoading=!1,t.$q.notify({message:"Xác nhận thành công !",color:"green"}),t.$router.go(-1)):t.$q.notify({message:s.meta.messages.message,color:"red"});case 6:case"end":return e.stop()}}),e)})))()},recivedConfirm:function(){var t=this;return c()(n.a.mark((function e(){var s;return n.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.showDialogRecivedVerify=!1,t.showLoading=!0,e.next=4,t.$store.dispatch("funiture/ACTION_RECIVED_CONFIRM_GI",t.goodIssue.id);case 4:s=e.sent,!0===s.meta.success?(t.showLoading=!1,t.$q.notify({message:"Xác nhận thành công !",color:"green"}),t.$router.go(-1)):t.$q.notify({message:s.meta.messages.message,color:"red"});case 6:case"end":return e.stop()}}),e)})))()},qcConfirm:function(){var t=this;return c()(n.a.mark((function e(){var s;return n.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.showDialogQCVerify=!1,t.showLoading=!0,e.next=4,t.$store.dispatch("funiture/ACTION_QC_CONFIRM_GI",t.goodIssue.id);case 4:s=e.sent,!0===s.meta.success?(t.showLoading=!1,t.$q.notify({message:"Xác nhận thành công !",color:"green"}),t.$router.go(-1)):t.$q.notify({message:s.meta.messages.message,color:"red"});case 6:case"end":return e.stop()}}),e)})))()},completed:function(){var t=this;return c()(n.a.mark((function e(){var s,o,i,a,r;return n.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.showDialog=!1,t.showLoading=!0,e.next=4,t.$store.dispatch("funiture/ACTION_GI_COMPLETED",t.goodIssue.id);case 4:s=e.sent,!0===s.meta.success?(t.showLoading=!1,t.$q.notify({message:"Đã đóng biên bản",color:"green"}),o="NAMHONG-CONFIRM-GI",i="Yêu cầu xác nhận biên bản xuất kho",a="Xác nhận biên bản xuất kho ",r="/#/funiture-packing?id="+t.goodIssue.goodsIssueNumber,t.$sendFcm(i,a,r,o,{}).then((function(t){console.log("send fcm success",t)})).catch((function(t){console.log("send Error: "+t)})),t.$router.push("/funiture-packing")):t.$q.notify({message:s.meta.messages.message,color:"red"});case 6:case"end":return e.stop()}}),e)})))()},showPrint:function(){window.print()},loadProduct:function(t){var e=this;return c()(n.a.mark((function s(){var o;return n.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,e.$store.dispatch("funiture/ACTION_GET_PRODUCT_IN_GOOD_ISSUES",t);case 2:o=s.sent,!0===o.meta.success?(e.products=o.data,e.showLoading=!1):e.$q.notify({message:o.meta.messages.message,color:"red"});case 4:case"end":return s.stop()}}),s)})))()},loadProductInProject:function(t){var e=this;return c()(n.a.mark((function s(){var o;return n.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,e.$store.dispatch("funiture/ACTION_LOAD_ITEM_FROM_PROJECT",t.projectId);case 2:o=s.sent,o.data.forEach((function(t){var s=t.width+"*"+t.length+"*"+t.height,o={label:s+"  -> "+t.name,value:t.itemId};e.items.push(o)}));case 4:case"end":return s.stop()}}),s)})))()},add:function(){var t=this;return c()(n.a.mark((function e(){var s,o;return n.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.showLoading=!0,s={goodsIssueId:t.goodIssue.id,productId:t.item.value,quantity:t.qty,note:t.note},e.next=4,t.$store.dispatch("funiture/ACTION_ADD_ITEM_TO_GOOD_ISSUE",s);case 4:o=e.sent,!0===o.meta.success?(t.$q.notify({message:"Thêm sản phẩm thành công !",color:"green"}),t.loadProduct(t.goodIssue.id),t.showLoading=!1):(t.$q.notify({message:o.meta.messages.message,color:"red"}),t.showLoading=!1);case 6:case"end":return e.stop()}}),e)})))()}}},u=d,h=(s("9c02"),s("2877")),m=s("9989"),p=s("e7a9"),g=s("9c40"),f=s("74f7"),v=s("cf57"),w=s("24e8"),C=s("f09f"),y=s("a370"),_=s("eb85"),q=s("ddd8"),x=s("27f9"),b=s("4b7e"),I=s("7f67"),N=s("eebe"),T=s.n(N),k=Object(h["a"])(u,o,i,!1,null,null,null);e["default"]=k.exports;T()(k,"components",{QPage:m["a"],QBtnGroup:p["a"],QBtn:g["a"],QInnerLoading:f["a"],QSpinnerGears:v["a"],QDialog:w["a"],QCard:C["a"],QCardSection:y["a"],QSeparator:_["a"],QSelect:q["a"],QInput:x["a"],QCardActions:b["a"]}),T()(k,"directives",{ClosePopup:I["a"]})}}]);