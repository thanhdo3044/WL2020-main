(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[12],{"014a":function(e,t,r){},5606:function(e,t,r){"use strict";var a=r("014a"),n=r.n(a);n.a},"97e2":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("q-page",[r("order-header",{attrs:{order:e.order}}),r("q-card",["de-nghi-thuong"===e.order.ProposalForm.slug?r("order-lines-todo",{attrs:{orderLines:e.getMetaValue()}}):"thanh-toan"===e.order.ProposalForm.slug?r("thanh-toan",{attrs:{disable:!0,metaValue:e.getMetaValue()[0]}}):"dang-ky-xe"===e.order.ProposalForm.slug?r("cars-order",{attrs:{oneOrder:e.getOneRequest()}}):"de-nghi-luong"===e.order.ProposalForm.slug?r("DeNghiLuong",{staticClass:"q-ma-sm",attrs:{metaValue:e.getMetaValue()[0],disable:!0}}):"mua-hang"===e.order.ProposalForm.slug?r("MuaHang",{staticClass:"q-ma-sm",attrs:{order:e.order,nextId2:e.nextId2,nextId3:e.nextId3,nextId:e.nextId,metaValue:e.getMetaValue(),disable:!0}}):"vat-tu"===e.order.ProposalForm.slug?r("VatTu",{staticClass:"q-ma-sm",attrs:{disable:!0}}):"tuyen-nhan-vien"===e.order.ProposalForm.slug?r("TuyenNhanVien",{staticClass:"q-ma-sm",attrs:{metaValue:e.getMetaValue()[0],disable:!0}}):"chuyen-nhan-vien"===e.order.ProposalForm.slug?r("ChuyenNhanVien",{staticClass:"q-ma-sm",attrs:{metaValue:e.getMetaValue()[0],disable:!0}}):"xin-nghi-viec"===e.order.ProposalForm.slug?r("XinNghiViec",{staticClass:"q-ma-sm",attrs:{metaValue:e.getMetaValue()[0],disable:!0}}):"xin-ra-cong"===e.order.ProposalForm.slug?r("XinRaCong",{staticClass:"q-ma-sm",attrs:{metaValue:e.getMetaValue()[0],disable:!0}}):"di-cong-tac"===e.order.ProposalForm.slug?r("DiCongTac",{staticClass:"q-ma-sm",attrs:{metaValue:e.getMetaValue()[0],disable:!0}}):"cap-bao-ho-lao-dong"===e.order.ProposalForm.slug?r("CapBaoHoLaoDong",{staticClass:"q-ma-sm",attrs:{metaValue:e.getMetaValue()[0],disable:!0}}):"xac-nhan-cong"===e.order.ProposalForm.slug?r("XacNhanCong",{staticClass:"q-ma-sm",attrs:{metaValue:e.getMetaValue()[0],disable:!0}}):"van-phong-pham"===e.order.ProposalForm.slug?r("van-phong-pham",{staticClass:"q-ma-sm",attrs:{metaValue:e.getMetaValue()[0],disable:!0}}):"bien-ban-ban-giao"===e.order.ProposalForm.slug?r("ban-giao",{staticClass:"q-ma-sm",attrs:{metaValue:e.getMetaValue()[0],disable:!0}}):"sua-chua"===e.order.ProposalForm.slug?r("SuaChua",{staticClass:"q-ma-sm",attrs:{metaValue:e.getMetaValue()[0],disable:!0}}):e._e()],1),e.request.showMessages?r("send-message",{attrs:{order:e.order}}):e._e()],1)},n=[],s=(r("8e6e"),r("8a81"),r("ac6a"),r("cadf"),r("06db"),r("456d"),r("a34a")),o=r.n(s),i=(r("7514"),r("96cf"),r("c973")),l=r.n(i),c=r("9523"),u=r.n(c),d=r("2f62"),p=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("q-btn",{directives:[{name:"go-back",rawName:"v-go-back.single",modifiers:{single:!0}}],attrs:{icon:"arrow_back",flat:"",dense:"",label:"Quay lại"}}),r("q-card",{staticClass:"my-card"},[r("q-card-section",{staticClass:"bg-secondary text-white"},[r("div",{staticClass:"text-h6"},[e._v(e._s(e.order.title)+" "+e._s(e.order.number)+"/2021/TH")]),r("div",{staticClass:"text-subtitle2"}),r("div",{staticClass:"text-subtitle2"}),r("div",{staticClass:"text-subtitle2"},[e._v("Ngày: "+e._s(e._f("ngay")(e.order.createdAt)))]),r("div",{staticClass:"text-subtitle2"},[r("q-badge",{attrs:{color:e.order.completed?"blue":"green"}},[e._v(e._s(e.order.status))])],1)])],1)],1)},m=[],h={props:["order"]},f=h,b=r("2877"),v=r("9c40"),g=r("f09f"),q=r("a370"),O=r("58a8"),y=r("2eeb"),x=r("eebe"),C=r.n(x),M=Object(b["a"])(f,p,m,!1,null,null,null),D=M.exports;C()(M,"components",{QBtn:v["a"],QCard:g["a"],QCardSection:q["a"],QBadge:O["a"]}),C()(M,"directives",{GoBack:y["a"]});var T=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("q-card",{staticClass:"my-card"},[e.orderLines||e.orderLines.length?r("q-markup-table",[r("thead",[r("tr",[r("th",{staticClass:"text-left"},[e._v("TT")]),r("th",{staticClass:"text-right"},[e._v("Tên mặt hàng")]),r("th",{staticClass:"text-right"},[e._v("Xuất xứ")]),r("th",{staticClass:"text-right"},[e._v("ĐVT")]),r("th",{staticClass:"text-right"},[e._v("SL")]),r("th",{staticClass:"text-right"},[e._v("Yêu cầu kỹ thuật")]),r("th",{staticClass:"text-right"},[e._v("Thời gian cung cấp")]),r("th",{staticClass:"text-right"},[e._v("Lý do yêu cầu")])])]),r("tbody",e._l(e.orderLines,(function(t,a){return r("tr",{key:t.id},[r("td",{staticClass:"text-left"},[e._v(e._s(a+1))]),r("td",{staticClass:"text-right"},[e._v(e._s(t.name))]),r("td",{staticClass:"text-right"},[e._v(e._s(t.origin))]),r("td",{staticClass:"text-right"},[e._v(e._s(t.unitId.trim()))]),r("td",{staticClass:"text-right"},[e._v(e._s(t.quantity))]),r("td",{staticClass:"text-right"},[e._v(e._s(t.title))]),r("td",{staticClass:"text-right"},[e._v(e._s(e._f("ngay")(t.finishedAt)))]),r("td",{staticClass:"text-right"},[e._v(e._s(t.note))])])})),0)]):r("no-order-lines")],1)},w=[],k=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("q-banner",{staticClass:"bg-grey-3",scopedSlots:e._u([{key:"avatar",fn:function(){return[r("q-icon",{attrs:{name:"check",color:"primary"}})]},proxy:!0},{key:"action",fn:function(){return[r("q-btn",{attrs:{flat:"",color:"primary",label:"Thêm mặt hàng đề xuất"},on:{click:function(t){return e.$root.$emit("showAddOrderLine")}}})]},proxy:!0}])},[e._v("\n  Không có mặt hàng đề xuất!\n  ")])},_=[],I={},j=I,P=r("54e1"),S=r("0016"),V=Object(b["a"])(j,k,_,!1,null,null,null),R=V.exports;C()(V,"components",{QBanner:P["a"],QIcon:S["a"],QBtn:v["a"]});var N={props:["orderLines"],components:{NoOrderLines:R}},E=N,A=r("2bb1"),$=Object(b["a"])(E,T,w,!1,null,null,null),Q=$.exports;C()($,"components",{QCard:g["a"],QMarkupTable:A["a"]});var Y=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("q-card-section",[r("q-input",{staticClass:"q-mt-sm",attrs:{outlined:"",label:"Kính gửi:",readonly:e.disable},model:{value:e.metaValue.kinhGui,callback:function(t){e.$set(e.metaValue,"kinhGui",t)},expression:"metaValue.kinhGui"}}),r("q-input",{staticClass:"q-mt-sm",attrs:{label:"Nội dung thanh toán:",outlined:"",readonly:e.disable},model:{value:e.metaValue.noiDungTT,callback:function(t){e.$set(e.metaValue,"noiDungTT",t)},expression:"metaValue.noiDungTT"}}),r("q-input",{staticClass:"q-mt-sm",attrs:{label:"Số tiền:",outlined:"",readonly:e.disable},model:{value:e.metaValue.soTien,callback:function(t){e.$set(e.metaValue,"soTien",t)},expression:"metaValue.soTien"}}),r("p",{staticClass:"q-mt-md"},[e._v(e._s(e._f("bangChu")(e.metaValue.soTien)))]),r("q-input",{staticClass:"q-mt-sm",attrs:{label:"Kèm theo:",outlined:"",readonly:e.disable},model:{value:e.metaValue.kemTheo,callback:function(t){e.$set(e.metaValue,"kemTheo",t)},expression:"metaValue.kemTheo"}}),r("p",[e._v("chứng từ gốc")])],1)},B=[],G={props:["metaValue","disable"]},H=G,L=r("27f9"),F=Object(b["a"])(H,Y,B,!1,null,null,null),X=F.exports;C()(F,"components",{QCardSection:q["a"],QInput:L["a"]});var U=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("q-input",{staticClass:"q-mt-sm",attrs:{outlined:"",label:"Kính gửi : ",readonly:e.disable},model:{value:e.order.OrderMeta[0].kinhGui,callback:function(t){e.$set(e.order.OrderMeta[0],"kinhGui",t)},expression:"order.OrderMeta[0].kinhGui"}}),r("q-input",{staticClass:"q-mt-sm",attrs:{outlined:"",label:"Tên tôi là : ",readonly:e.disable},model:{value:e.order.OrderMeta[0].fullName,callback:function(t){e.$set(e.order.OrderMeta[0],"fullName",t)},expression:"order.OrderMeta[0].fullName"}}),r("q-input",{staticClass:"q-mt-sm",attrs:{outlined:"",label:"Mã nhân viên : ",readonly:e.disable},model:{value:e.order.OrderMeta[0].maNV,callback:function(t){e.$set(e.order.OrderMeta[0],"maNV",t)},expression:"order.OrderMeta[0].maNV"}}),r("q-input",{staticClass:"q-mt-sm",attrs:{outlined:"",label:"Chức vụ : ",readonly:e.disable},model:{value:e.order.OrderMeta[0].position,callback:function(t){e.$set(e.order.OrderMeta[0],"position",t)},expression:"order.OrderMeta[0].position"}}),r("q-input",{staticClass:"q-mt-sm",attrs:{outlined:"",label:"Phòng ban/bộ phận : ",readonly:e.disable},model:{value:e.order.OrderMeta[0].department,callback:function(t){e.$set(e.order.OrderMeta[0],"department",t)},expression:"order.OrderMeta[0].department"}}),r("div",{staticClass:"q-mt-sm",attrs:{outlined:""}},[e._v("\n    Sau khi xem xét năng lực và ý thức làm việc, tôi xin đề xuất BTGĐ tăng bậc\n    lương hiện tại cho các CBCNV sau :\n  ")]),e._l(e.order.OrderMeta.filter((function(e){return e.STT})),(function(t,a){return r("div",{key:a},[r("q-card",{staticClass:"q-mb-sm q-mt-sm"},[r("q-card-section",[r("div",[e._v("STT : "),r("b",[e._v(e._s(t.STT))])]),r("div",[e._v("Mã nhân viên : "),r("b",[e._v(e._s(t.maNV))])]),r("div",{staticClass:"text-subtitle1"},[e._v("Họ và tên : "),r("b",[e._v(e._s(t.fullName2))])]),r("div",[e._v("Chức vụ : "+e._s(t.position2))]),r("div",[e._v("Bậc lương hiện tại : "+e._s(t.luongHienTai))]),r("div",[e._v("Bậc lương đề xuất : "+e._s(t.luongDeXuat))]),r("div",[e._v("Thời gian tăng lương gần nhất : "+e._s(t.thoiGianTangLuongGanNhat))])])],1)],1)})),r("footerCard",{attrs:{order:e.order,nextId:e.nextId}})],2)},K=[],J=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",["Chưa ký"!=e.request.status&&"Không"!=e.request.status&&"Ủy quyền"!=e.request.status||"Phòng vật tư"==e.request.position||"Phòng bảo vệ"==e.request.position?r("div",{staticClass:"q-ma-sm"},["Ban TGD"==e.nameDepartmentName.NAME?r("div",[r("q-btn",{attrs:{color:"red",icon:"clear",label:"Hủy khẩn cấp"},on:{click:function(t){return e.promptToDelete(e.request)}}})],1):e._e()]):r("div",{staticClass:"q-ma-sm"},[null!=e.request.accountIdAuthorised&&1==e.request.isAuthority&&e.request.accountId!=e.userInfo.id||null==e.request.accountIdAuthorised&&0==e.request.isAuthority&&e.request.accountId==e.userInfo.id||null!=e.request.accountId2?r("q-btn",{staticClass:"q-mr-sm",attrs:{color:"red",icon:"clear",label:"Hủy"},on:{click:function(t){return e.promptToDelete(e.request)}}}):e._e(),null!=e.request.accountIdAuthorised&&1==e.request.isAuthority&&e.request.accountId!=e.userInfo.id||null==e.request.accountIdAuthorised&&0==e.request.isAuthority&&e.request.accountId==e.userInfo.id||null!=e.request.accountId2?r("q-btn",{attrs:{color:"primary",icon:"done",label:"Duyệt"},on:{click:function(t){return e.completedToRequest(e.request)}}}):e._e(),null!=e.request.accountIdAuthorised&&1==e.request.isAuthority&&e.request.accountId!=e.userInfo.id||"Ban TGĐ"!=e.request.position&&null==e.request.accountIdAuthorised&&0==e.request.isAuthority&&e.request.accountId==e.userInfo.id||null!=e.request.accountId2?r("q-btn",{staticClass:"q-mt-sm row",attrs:{color:"orange",icon:"done",label:"Duyệt toàn bộ"},on:{click:function(t){return e.completedToRequestSuccess(e.request)}}}):e._e()],1),1==e.statusAuthority?r("q-card-section",{staticStyle:{"margin-left":"-8px"}},[r("div",{staticClass:"text-subtitle2 q-mt-sm"},[e._v("\n      Được ủy quyền từ : "+e._s(e.request.timeStartAuthority)+"\n    ")]),r("div",{staticClass:"text-subtitle2 q-mt-sm"},[e._v("\n      Thời gian hết hạn : "+e._s(e.request.timeEndAuthority.replace("tuần"," "))+"\n    ")]),r("q-btn",{staticClass:"text-h6 bg-blue  text-white shadow-10"},[e._v("Được ủy quyền")])],1):e._e(),r("q-card-section",[e.request.accountIdAuthorised==e.userInfo.id?r("div",[r("b",[e._v("Được ủy quyền bởi : "+e._s(e.dataAccount.ACCOUNT)+" -\n        "+e._s(e.dataAccount.LAST_NAME)+" - "+e._s(e.dataAccount.POSITION)+" - từ :\n        "+e._s(e.request.timeStartAuthorised)+" ->\n        "+e._s(e.request.timeEndAuthorised))])]):e._e(),e.request.accountIdAuthorised!=e.userInfo.id&&1==e.request.isAuthority?r("div",[r("b",[e._v("Đã ủy quyền cho : "+e._s(e.dataAccountAuthorised.ACCOUNT)+" -\n        "+e._s(e.dataAccountAuthorised.LAST_NAME)+" -\n        "+e._s(e.dataAccountAuthorised.POSITION)+" -\n        "+e._s(e.accountAuthorisedDpm.NAME)+" từ\n        "+e._s(e.request.timeStartAuthorised)+" ->\n        "+e._s(e.request.timeEndAuthorised))])]):e._e()]),"Quá hạn"==e.request.status?r("div",{staticClass:"q-ma-sm"},[r("q-dialog",{attrs:{persistent:""}},[r("q-card",[r("q-card-section",{staticClass:"row items-center"},[r("q-avatar",{attrs:{icon:"signal_wifi_off",color:"primary","text-color":"white"}}),r("span",{staticClass:"q-ml-sm"},[e._v("Quá hạn kí.")])],1)],1)],1)],1):e._e(),"Phòng vật tư"!=e.request.position&&"Phòng bảo vệ"!=e.request.position?r("div",[r("q-card-section",[r("div",{staticClass:"text-h6"},[e._v("Được gửi lúc :")]),r("div",{staticClass:"text-subtitle2"},[e._v(e._s(e._f("luc")(e.request.createdAt)))])]),"Đã ký"==e.request.status&&1==e.request.successOrder?r("q-card-section",[r("q-btn",{staticClass:"text-h6 bg-primary  text-white shadow-10"},[e._v("Đã xác nhận duyệt toàn bộ")])],1):"Đã ký"==e.request.status?r("q-card-section",[r("q-btn",{staticClass:"text-h6 bg-primary  text-white shadow-10"},[e._v("Đã duyệt")])],1):"Chưa ký"==e.request.status?r("q-card-section",[r("q-btn",{staticClass:"text-h6 bg-orange text-black shadow-10"},[e._v("Chưa phê duyệt")])],1):"Ủy quyền"==e.request.status?r("q-card-section",[r("q-btn",{staticClass:"text-h6 bg-orange text-black shadow-10"},[e._v("Đã ủy quyền")])],1):e._e(),"Không"==e.request.status?r("q-card-section",[r("q-btn",{staticClass:"text-h6 bg-red  text-white shadow-10"},[e._v("Đã hủy")])],1):"Quá hạn"==e.request.status?r("q-card-section",[r("div",{staticClass:"text-h6",staticStyle:{color:"red"}},[e._v("Quá hạn phê duyệt")])]):e._e()],1):"Phòng vật tư"==e.request.position?r("div",["Không"==e.request.status||"Chưa ký"==e.request.status?r("div",[r("q-btn",{attrs:{color:"primary",icon:"done",label:"Xác nhận"},on:{click:function(t){return e.completedToRequest(e.request)}}})],1):r("div",["Đã ký"==e.request.status?r("q-card-section",[r("q-btn",{staticClass:"text-h6 bg-primary  text-white shadow-10"},[e._v("Đã xác nhận")])],1):e._e()],1)]):"BVTH"==e.userInfo.account&&"xac-nhan-cong"!=e.request.slug?r("div",["Không"==e.request.status||"Chưa ký"==e.request.status?r("div",[r("q-btn",{attrs:{color:"primary",icon:"done",label:"Xác nhận thời gian ra cổng"},on:{click:function(t){return e.completedToRequest(e.request)}}})],1):"Đã ký"==e.request.status&&null!=e.request.timeVTAccept&&"NULL"==e.request.timeVTAcceptEnd?r("div",[r("q-btn",{attrs:{color:"primary",icon:"done",label:"Xác nhận thời gian vào"},on:{click:function(t){return e.completedToRequest(e.request)}}})],1):e._e(),r("div",{staticClass:"q-mt-sm"},["Đã ký"==e.request.status&&null!=e.request.timeVTAccept?r("q-card-section",[r("div",{staticClass:"text-h6 bg-primary q-pl-sm text-white shadow-10"},[e._v("\n          Đã xác nhận thời gian ra cổng lúc : "+e._s(e.request.timeVTAccept)+"\n        ")])]):e._e(),"Đã ký"==e.request.status&&"NULL"!=e.request.timeVTAcceptEnd?r("q-card-section",[r("div",{staticClass:"text-h6 q-pl-sm bg-primary  text-white shadow-10"},[e._v("\n          Đã xác nhận thời gian vào cổng lúc : "+e._s(e.request.timeVTAcceptEnd)+"\n        ")])]):e._e()],1)]):"BVTH"==e.userInfo.account&&"xac-nhan-cong"==e.request.slug?r("div",["Không"==e.request.status||"Chưa ký"==e.request.status?r("div",[r("q-btn",{attrs:{color:"primary",icon:"done",label:"Xác nhận thời gian ra cổng"},on:{click:function(t){return e.completedToRequest(e.request)}}})],1):e._e(),r("div",{staticClass:"q-mt-sm"},["Đã ký"==e.request.status&&null!=e.request.timeVTAccept?r("q-card-section",[r("div",{staticClass:"text-h6 bg-primary q-pl-sm text-white shadow-10"},[e._v("\n          Đã xác nhận thời gian ra cổng lúc : "+e._s(e.request.timeVTAccept)+"\n        ")])]):e._e()],1)]):e._e()],1)},W=[],z=r("2a19"),Z=(r("f508"),r("d9b2"),r("c1df")),ee=r.n(Z),te=r("1732");function re(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function ae(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?re(Object(r),!0).forEach((function(t){u()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):re(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var ne={props:["order","nextId","nextId2","nextId3"],computed:ae(ae({},Object(d["c"])("requests",["request"])),Object(d["c"])("base",["userInfo"])),methods:ae(ae(ae(ae({},Object(d["b"])("base",["GET_DEPARTMENTSBYID","getAccountByID"])),Object(d["b"])("requests",["getOneRequest","addRequest","completedRequest","completedRequest2","cancelRequest","activeRequestsMeta","completedTimeVT","deleteReqAuthority","isAuthority","confirmSuccessOrder","deleteRequestById","getTokenFCM"])),Object(d["b"])("orders",["getOneOrder","sendToApproved"])),{},{loadData:function(){return l()(o.a.mark((function e(){return o.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},changeAuthority:function(){var e=this;return l()(o.a.mark((function t(){var r,a,n,s;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log("changeAuthority"),console.log("changeAuthority",ee()().add(2,"days").calendar()),console.log("authority",e.authority),e.reqAuthority=[],e.reqAuthority.push(ae(ae({},e.request),{},{id:Object(te["a"])(),accountId:e.authority.value,position:"Người được ủy quyền "+e.request.position,timeEndAuthority:e.timeEndAuthority,timeStartAuthority:e.timeStartAuthority,idReqAuthority:e.request.id,status:"Chưa ký",isAuthority:!1})),r={id:e.request.id,isAuthority:1},t.next=8,e.deleteReqAuthority(e.request.id);case 8:return a=t.sent,t.next=11,e.isAuthority(r);case 11:return n=t.sent,t.next=14,e.sendToApproved(e.reqAuthority);case 14:return s=t.sent,t.next=17,e.loadData();case 17:console.log("reqAuthority",a),console.log("isAuthority",n),console.log("reqAuthority",e.reqAuthority),console.log("changeAuthority",s);case 21:case"end":return t.stop()}}),t)})))()},promptToDelete:function(e){var t=this;this.$q.dialog({title:"Xác nhận",message:"Bạn thực sự muốn Hủy?",ok:{push:!0},cancel:{color:"negative"},persistent:!0}).onOk(l()(o.a.mark((function r(){var a;return o.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return a=[],r.next=3,t.order.OrderMeta.filter((function(e){a.push({id:e.id})}));case 3:r.sent,console.log("idOrderMeta",a),a.forEach(function(){var e=l()(o.a.mark((function e(r){var a,n;return o.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a={id:r.id,statusRequests:"Hủy"},e.next=3,t.activeRequestsMeta(a);case 3:n=e.sent,console.log(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),t.cancelRequest(e),t.$router.go(-1);case 8:case"end":return r.stop()}}),r)}))))},sendMessagesSuccess:function(e,t,r){var a=this;return l()(o.a.mark((function e(){var t,r,n;return o.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log("requests",a.request),t={notification:{title:"Thank for sub",body:"firebase cloud",icon:"https://cdn.quasar.dev/img/boy-avatar.png"}},r={accountId:a.request.fromAccountId},e.next=5,a.getTokenFCM(r);case 5:return n=e.sent,console.log("dataFCM",n.data.data),e.next=9,n.data.data.forEach(function(){var e=l()(o.a.mark((function e(r){return o.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,a.$sendMessageActiveReq("Có phiếu được duyệt ","".concat(a.request.title," đã được ").concat(a.userInfo.position," - ").concat(a.userInfo.lastName," phê duyệt "),"".concat(a.request.slug),"".concat(a.request.orderId),t,r.tokenFCM);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 9:case"end":return e.stop()}}),e)})))()},completedToRequest:function(e){var t=this;this.$q.dialog({title:"Xác nhận",message:"Bạn thực sự muốn Duyệt?",ok:{push:!0},cancel:{color:"negative"},persistent:!0}).onOk(l()(o.a.mark((function r(){var a,n,s,i,l,c,u;return o.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(null!=t.request.accountId2&&t.request.accountId2==t.userInfo.id&&(console.log("ok",t.nextId),a=null,a=void 0===t.nextId||null==t.nextId?"":t.nextId.id,n={request:e,nextId:a},t.completedRequest2(n),t.$router.go(-1)),"Phòng vật tư"==t.request.position||"Phòng bảo vệ"==t.request.position||null!=t.request.accountId2Active||t.request.accountId2==t.userInfo.id){r.next=13;break}return console.log("ok",t.nextId),s=null,s=void 0===t.nextId||null==t.nextId?"":t.nextId.id,i={request:e,nextId:s},t.completedRequest(i),t.$router.go(-1),{notification:{title:"Thank for sub",body:"firebase cloud",icon:"https://cdn.quasar.dev/img/boy-avatar.png"}},r.next=11,t.sendMessagesSuccess(t.userInfo.lastName,t.request.fromAccountId,t.request.position);case 11:r.next=14;break;case 13:"Phòng bảo vệ"==t.request.position?"Đã ký"==t.request.status&&null!=t.request.timeVTAccept?(l={statusAccept:"Đã ký",id:e.id,timeVTAcceptEnd:ee()().format("l")+" "+ee()().format("LT"),timeVTAccept:t.request.timeVTAccept},t.completedTimeVT(l),t.$router.go(-1)):"Chưa ký"==t.request.status&&null==t.request.timeVTAccept&&(c={statusAccept:"Đã ký",id:e.id,timeVTAccept:ee()().format("l")+" "+ee()().format("LT"),timeVTAcceptEnd:"NULL"},t.completedTimeVT(c),t.$router.go(-1)):"Phòng vật tư"==t.request.position&&(u={statusAccept:"Đã ký",id:e.id,timeVTAccept:t.timeVTAccept,position:t.request.position},t.completedTimeVT(u),t.$router.go(-1));case 14:case"end":return r.stop()}}),r)}))))},completedToRequestSuccess:function(e){var t=this;return l()(o.a.mark((function r(){return o.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:t.$q.dialog({title:"Xác nhận",message:"<b>Bạn thực sự muốn hoàn thành tiến trình duyệt phiếu?</b>",ok:{push:!0},cancel:{color:"negative"},persistent:!0,html:!0}).onOk(l()(o.a.mark((function r(){var a,n,s;return o.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if("Phòng vật tư"==t.request.position||"Phòng bảo vệ"==t.request.position){r.next=12;break}return console.log("ok",t.nextId3),a=null,a=void 0==t.nextId3[0]||null==t.nextId3[0]?"":t.nextId3[0].id,n={request:e,nextId:a},r.next=7,t.completedRequest(n);case 7:return s={id:e.id,successOrder:1},r.next=10,t.confirmSuccessOrder(s);case 10:t.nextId2.forEach(function(){var e=l()(o.a.mark((function e(r){return o.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.deleteRequestById(r.id);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),t.$router.go(-1);case 12:case"end":return r.stop()}}),r)}))));case 1:case"end":return r.stop()}}),r)})))()},getMetaValue:function(){var e=this.order.OrderMeta;return JSON.parse(e[0].metaValue)}}),data:function(){return{nameDepartmentName:null,timeVTAccept:null,authority:{label:null,value:null},listAuthority:[],reqAuthority:[],statusAuthority:!1,timeEndAuthority:null,timeStartAuthority:null,dataAccountAuthorised:null,accountAuthorisedDpm:null,dataAccount:null}},mounted:function(){("Người được ủy quyền Trưởng bộ phận"==this.request.position||"Người được ủy quyền Ban TGĐ"==this.request.position)&&(this.statusAuthority=!0),this.timeVTAccept=this.request.timeVTAccept,console.log("this.dataTest",this.request.status),console.log("moment().format('l');",ee()().format("l")+" "+ee()().format("LT")),"Quá hạn"==this.request.status?z["a"].create({type:"negative",message:"Đã quá hạn phê duyệt!"}):"Đã ký"==this.request.status&&1==this.request.successOrder?z["a"].create({type:"positive",message:"Đã xác nhận duyệt toàn bộ!"}):"Đã ký"==this.request.status?z["a"].create({type:"positive",message:"Đã phê duyệt!"}):"Chưa ký"==this.request.status?z["a"].create({type:"warning",message:"Chưa phê duyệt!"}):"Không"==this.request.status&&z["a"].create({type:"negative",message:"Đã hủy phê duyệt!"})},created:function(){var e=this;return l()(o.a.mark((function t(){return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getAccountByID(e.request.accountIdAuthorised);case 2:return e.dataAccountAuthorised=t.sent,t.next=5,e.getAccountByID(e.request.accountId);case 5:return e.dataAccount=t.sent,console.log("listAuthority",e.listAuthority),console.log("requests",e.request),t.next=10,e.GET_DEPARTMENTSBYID(e.userInfo.departmentId);case 10:return e.nameDepartmentName=t.sent,t.next=13,e.GET_DEPARTMENTSBYID(void 0==e.dataAccountAuthorised?0:e.dataAccountAuthorised.departmentId);case 13:e.accountAuthorisedDpm=t.sent,console.log("nameDepartmentName",e.nameDepartmentName),console.log("nextId",e.nextId.id);case 16:case"end":return t.stop()}}),t)})))()}},se=ne,oe=r("24e8"),ie=r("cb32"),le=r("7cbe"),ce=r("52ee"),ue=r("7f67"),de=Object(b["a"])(se,J,W,!1,null,null,null),pe=de.exports;C()(de,"components",{QBtn:v["a"],QCardSection:q["a"],QDialog:oe["a"],QCard:g["a"],QAvatar:ie["a"],QInput:L["a"],QIcon:S["a"],QPopupProxy:le["a"],QDate:ce["a"]}),C()(de,"directives",{ClosePopup:ue["a"]});var me=r("6191"),he=r.n(me),fe=r("d30a");function be(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function ve(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?be(Object(r),!0).forEach((function(t){u()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):be(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var ge={components:{DxDataGrid:fe["DxDataGrid"],DxColumn:fe["DxColumn"],DxEditing:fe["DxEditing"],DxPaging:fe["DxPaging"],DxButton:he.a,DxLookup:fe["DxLookup"],footerCard:pe},props:["metaValue","disable","oneOrder"],created:function(){var e=this;return l()(o.a.mark((function t(){var r,a;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:for(e.status=e.$route.query.status,console.log("status",e.status),console.log("dsCongDoans",e.dsCongDoans),console.log("userInfo",e.userInfo),e.status=e.$route.query.status,console.log("status",e.status),console.log("dsCongDoans",e.dsCongDoans),console.log("userInfo",e.userInfo),e.order.Requests.sort(e.compareValues("star","asc")),r=null,a=0;a<e.order.Requests.length;a++)e.order.Requests[a].id==e.$route.query.id&&(console.log(e.order.Requests[a]),r=e.order.Requests[a].star,console.log("idDis",r));e.nextId=e.order.Requests.find((function(e){return e.star>r})),console.log("data",e.nextId);case 13:case"end":return t.stop()}}),t)})))()},data:function(){return{events:[],nameDepartment:{},status:"",phoneNumber:"",nameDepartmentName:null,nextId:null}},computed:ve(ve({},Object(d["c"])("orders",["order"])),Object(d["c"])("base",["userInfo","dsCongDoans"])),methods:ve(ve(ve({compareValues:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";return function(r,a){if(!r.hasOwnProperty(e)||!a.hasOwnProperty(e))return 0;var n="string"===typeof r[e]?r[e].toUpperCase():r[e],s="string"===typeof a[e]?a[e].toUpperCase():a[e],o=0;return n>s?o=1:n<s&&(o=-1),"desc"==t?-1*o:o}}},Object(d["b"])("base",["GET_DEPARTMENTSBYID"])),Object(d["b"])("orders",["getOneOrder","getAllRequests"])),Object(d["b"])("orderMetas",["getOneOrderMeta","addorderMeta","deleteOrderMeta","updateOrderMeta"]))},qe=ge,Oe=Object(b["a"])(qe,U,K,!1,null,null,null),ye=Oe.exports;C()(Oe,"components",{QInput:L["a"],QCard:g["a"],QCardSection:q["a"]});var xe=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("q-card-section",[r("div",[r("div",{staticClass:"row"},[r("q-input",{staticClass:"q-mt-sm q-mr-sm col",attrs:{outlined:"",label:"Tên tôi là : ",readonly:e.disable},model:{value:e.getAccountById(e.order.accountId).lastName,callback:function(t){e.$set(e.getAccountById(e.order.accountId),"lastName",t)},expression:"getAccountById(order.accountId).lastName"}}),r("q-input",{staticClass:"q-mt-sm col",attrs:{outlined:"",label:"Chức danh : ",readonly:e.disable},model:{value:e.getAccountById(e.order.accountId).position,callback:function(t){e.$set(e.getAccountById(e.order.accountId),"position",t)},expression:"getAccountById(order.accountId).position"}})],1),r("div",{staticClass:"row"},[r("q-input",{staticClass:"q-mt-sm q-mr-sm col",attrs:{outlined:"",label:"Phòng ban/bộ phận : ",readonly:e.disable},model:{value:e.getDepartmentById(e.order.departmentId).name,callback:function(t){e.$set(e.getDepartmentById(e.order.departmentId),"name",t)},expression:"getDepartmentById(order.departmentId).name"}}),r("q-input",{staticClass:"q-mt-sm col",attrs:{filled:"",outlined:"",label:"SĐT : ",readonly:e.disable},model:{value:e.getAccountById(e.order.accountId).PHONE,callback:function(t){e.$set(e.getAccountById(e.order.accountId),"PHONE",t)},expression:"getAccountById(order.accountId).PHONE"}})],1),r("div",{staticClass:"row"},[r("q-input",{staticClass:"q-mt-sm col",attrs:{filled:"",outlined:"",label:"Mục đích sử dụng : ",readonly:e.disable},model:{value:e.order.intendedUse,callback:function(t){e.$set(e.order,"intendedUse",t)},expression:"order.intendedUse"}})],1),r("div",{staticClass:"q-mt-sm"},[r("q-table",{staticClass:"my-sticky-header-column-table bg-yellow-1",staticStyle:{height:"auto"},attrs:{title:"Nội dung đề xuất",data:e.order.OrderMeta.filter((function(e){return e.STT})).sort((function(e,t){return e.STT-t.STT})),columns:e.columns,"row-key":"name",separator:e.separator},on:{"row-click":e.click},scopedSlots:e._u([{key:"body",fn:function(t){return[r("q-tr",{attrs:{props:t},on:{request:function(r){return e.click(t)}}},[r("q-td",{key:"STT",attrs:{width:"30",props:t}},[e._v(e._s(t.row.STT))]),r("q-td",{key:"maVT",attrs:{props:t}},[e._v(e._s(t.row.maVT))]),r("q-td",{key:"tenVT",attrs:{props:t}},[e._v(e._s(t.row.tenVT))]),r("q-td",{key:"donViTinh",attrs:{props:t}},[e._v(e._s(t.row.donViTinh))]),r("q-td",{key:"number",attrs:{props:t}},[e._v(e._s(t.row.number))]),r("q-td",{key:"yeuCauKyThuat",attrs:{props:t}},[e._v(e._s(t.row.yeuCauKyThuat)+"\n              "),r("q-popup-edit",{model:{value:t.row.yeuCauKyThuat,callback:function(r){e.$set(t.row,"yeuCauKyThuat",r)},expression:"props.row.yeuCauKyThuat"}},[r("q-input",{attrs:{dense:"",autofocus:"",counter:""},on:{change:function(r){return e.click(t)}},model:{value:t.row.yeuCauKyThuat,callback:function(r){e.$set(t.row,"yeuCauKyThuat",r)},expression:"props.row.yeuCauKyThuat"}})],1)],1),r("q-td",{key:"mucDichSuDung",attrs:{props:t}},[e._v(e._s(t.row.mucDichSuDung))]),r("q-td",{key:"statusRequests",attrs:{props:t}},[r("q-select",{attrs:{filled:"",options:e.optionStatusReq,label:"Trạng thái phê duyệt"},on:{input:function(r){return e.activeReq(t)}},model:{value:t.row.statusRequests,callback:function(r){e.$set(t.row,"statusRequests",r)},expression:"props.row.statusRequests"}})],1)],1)]}}])}),r("q-dialog",{attrs:{"transition-show":"rotate","transition-hide":"rotate","full-width":""},model:{value:e.activeFormEdit,callback:function(t){e.activeFormEdit=t},expression:"activeFormEdit"}},[r("q-card",[r("q-card-section",{staticClass:"bg-primary text-white text-h5"},[e._v("\n            Sửa dữ liệu\n          ")]),r("q-card-section",{staticClass:"q-pt-none"},[r("div",{staticClass:"row"},[r("q-input",{staticClass:"q-mt-sm q-pl-sm q-pr-sm col",attrs:{readonly:!0,outlined:"",label:"STT : "},model:{value:e.task.STT,callback:function(t){e.$set(e.task,"STT",t)},expression:"task.STT"}}),r("q-input",{staticClass:"q-mt-sm q-pl-sm q-pr-sm col",attrs:{outlined:"",label:"Mã vật tư : "},model:{value:e.task.maVT,callback:function(t){e.$set(e.task,"maVT",t)},expression:"task.maVT"}}),r("q-input",{staticClass:"q-mt-sm q-pl-sm q-pr-sm col",attrs:{outlined:"",label:"Tên vật tư : "},model:{value:e.task.tenVT,callback:function(t){e.$set(e.task,"tenVT",t)},expression:"task.tenVT"}}),r("q-input",{staticClass:"q-mt-sm q-pl-sm q-pr-sm col",attrs:{outlined:"",label:"Đơn vị tính : "},model:{value:e.task.donViTinh,callback:function(t){e.$set(e.task,"donViTinh",t)},expression:"task.donViTinh"}}),r("q-input",{staticClass:"q-mt-sm q-pl-sm q-pr-sm col-2",attrs:{outlined:"",type:"number",placeholder:"Vui lòng nhập số",label:"Số lượng : "},model:{value:e.task.number,callback:function(t){e.$set(e.task,"number",t)},expression:"task.number"}}),r("q-input",{staticClass:"q-mt-sm q-pl-sm q-pr-sm col",attrs:{outlined:"",label:"Yêu cầu kỹ thuật : "},model:{value:e.task.yeuCauKyThuat,callback:function(t){e.$set(e.task,"yeuCauKyThuat",t)},expression:"task.yeuCauKyThuat"}}),r("q-input",{staticClass:"q-mt-sm q-pl-sm q-pr-sm col",attrs:{outlined:"",label:"Mục đích sử dụng : "},model:{value:e.task.mucDichSuDung,callback:function(t){e.$set(e.task,"mucDichSuDung",t)},expression:"task.mucDichSuDung"}})],1)])],1)],1)],1)]),r("footerCard",{attrs:{order:e.order,nextId2:e.nextId2,nextId3:e.nextId3,nextId:e.nextId}})],1)},Ce=[];r("bc3a");function Me(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function De(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Me(Object(r),!0).forEach((function(t){u()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Me(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Te={components:{footerCard:pe},props:["metaValue","disable","nextId2","nextId3","nextId"],created:function(){return l()(o.a.mark((function e(){return o.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},data:function(){return{optionStatusReq:[{label:"Đồng ý",value:1},{label:"Xem xét",value:0},{label:"Hủy",value:2},{label:"Giải trình bổ sung",value:3}],nextId2:null,nextId3:null,statusRequestsXemXet:null,statusRequestsOk:null,statusRequestsCancel:null,modelActionReq:{},myDepartment:null,stepDepartment:null,departments:[],events:[],options:null,nameDepartmentName:null,account:[],active:!1,proAccount:{lastName:"",position:"",PHONE:""},statusRequests:null,separator:"cell",selected:[],nameDepartment:{},status:"",phoneNumber:"",dataAddRow:[],activeFormAdd:!1,activeFormEdit:!1,task:{maVT:null,tenVT:null,yeuCauKyThuat:null,mucDichSuDung:null,number:null,donViTinh:null,id:null,STT:null},columns:[{name:"STT",required:!0,label:"STT",align:"left",field:function(e){return e.STT},format:function(e){return"".concat(e)},sortable:!0},{name:"maVT",required:!0,label:"Mã vật tư",align:"left",field:function(e){return e.maVT},format:function(e){return"".concat(e)},sortable:!0},{name:"tenVT",required:!0,label:"Tên vật tư",align:"left",field:function(e){return e.tenVT},format:function(e){return"".concat(e)},sortable:!0},{name:"donViTinh",required:!0,label:"Đơn vị",align:"left",field:function(e){return e.donViTinh},format:function(e){return"".concat(e)},sortable:!0},{name:"number",required:!0,label:"Số lượng",align:"left",field:function(e){return e.number},format:function(e){return"".concat(e)},sortable:!0},{name:"yeuCauKyThuat",required:!0,label:"Yêu cầu kỹ thuật",align:"left",field:function(e){return e.yeuCauKyThuat},format:function(e){return"".concat(e)},sortable:!0},{name:"statusRequests",required:!0,label:"Trạng thái phê duyệt",align:"left",text:"red",field:function(e){return e.statusRequests},format:function(e){return"".concat(e)},sortable:!0}],data:[]}},computed:De(De(De({},Object(d["c"])("requests",["request"])),Object(d["c"])("orders",["getAccountById","getDepartmentById","order"])),Object(d["c"])("base",["userInfo","dsCongDoans"])),watch:{},methods:De(De(De(De(De({},Object(d["b"])("base",["GET_DEPARTMENTSBYID","getAccountByID"])),Object(d["b"])("orders",["getOneOrder","getAllRequests","getAllAccounts"])),Object(d["b"])("orderMetas",["getOneOrderMeta","addMulRow","addorderMeta","deleteOrderMeta","updateOrderMeta"])),Object(d["b"])("requests",["deleteRequest","resetOrder","activeRequestsMeta"])),{},{activeReq:function(e){var t=this;return l()(o.a.mark((function r(){var a,n,s;return o.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return a=e.row,console.log("data",a),console.log("this.props.row.statusRequests",a.statusRequests),n={id:a.id,statusRequests:a.statusRequests.label},r.next=6,t.activeRequestsMeta(n);case 6:s=r.sent,console.log(s);case 8:case"end":return r.stop()}}),r)})))()},compareValues:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";return function(r,a){if(!r.hasOwnProperty(e)||!a.hasOwnProperty(e))return 0;var n="string"===typeof r[e]?r[e].toUpperCase():r[e],s="string"===typeof a[e]?a[e].toUpperCase():a[e],o=0;return n>s?o=1:n<s&&(o=-1),"desc"==t?-1*o:o}},click:function(e){var t=this;return l()(o.a.mark((function r(){var a,n,s;return o.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(a=e.row,console.log("requestProp",a),console.log("requests",t.request),"Trưởng phòng IT"!=t.request.position||"Chưa ký"!=t.order.status&&"Không"!=t.order.status){r.next=10;break}return n=a.yeuCauKyThuat,s=a.id,r.next=8,t.updateOrderMeta(De(De({},t.order.OrderMeta[0]),{},{metaValue:JSON.stringify([t.metaValue]),yeuCauKyThuat:n,id:s}));case 8:r.next=11;break;case 10:"Trưởng phòng IT"==t.request.position&&"Đã ký"==t.request.status?z["a"].create({message:"Chỉnh sửa thất bại do Đã  phê duyệt !",color:"orange"}):z["a"].create({message:"Chỉnh sửa thất bại do không được cấp quyền !",color:"blue"});case 11:case"end":return r.stop()}}),r)})))()}})},we=Te,ke=(r("c403"),r("eaac")),_e=r("bd08"),Ie=r("db86"),je=r("42a1"),Pe=r("3786"),Se=r("ddd8"),Ve=r("4b7e"),Re=Object(b["a"])(we,xe,Ce,!1,null,null,null),Ne=Re.exports;C()(Re,"components",{QCardSection:q["a"],QInput:L["a"],QTable:ke["a"],QTr:_e["a"],QTd:Ie["a"],QPopupEdit:je["a"],QRadio:Pe["a"],QSelect:Se["a"],QBtn:v["a"],QDialog:oe["a"],QCard:g["a"],QCardActions:Ve["a"]}),C()(Re,"directives",{ClosePopup:ue["a"]});var Ee=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("q-card-section",[r("div",[r("div",{staticClass:"row"},[r("q-input",{staticClass:"q-mt-sm q-mr-sm col",attrs:{outlined:"",label:"Tên tôi là : ",readonly:e.disable},model:{value:e.proAccount[0].lastName,callback:function(t){e.$set(e.proAccount[0],"lastName",t)},expression:"proAccount[0].lastName"}}),r("q-input",{staticClass:"q-mt-sm col",attrs:{outlined:"",label:"Chức danh : ",readonly:e.disable},model:{value:e.proAccount[0].position,callback:function(t){e.$set(e.proAccount[0],"position",t)},expression:"proAccount[0].position"}})],1),r("div",{staticClass:"row"},[r("q-input",{staticClass:"q-mt-sm q-mr-sm col",attrs:{outlined:"",label:"Phòng ban/bộ phận : ",readonly:e.disable},model:{value:e.nameDepartmentName.NAME,callback:function(t){e.$set(e.nameDepartmentName,"NAME",t)},expression:"nameDepartmentName.NAME"}}),r("q-input",{staticClass:"q-mt-sm col",attrs:{filled:"",outlined:"",label:"SĐT : ",readonly:!e.disable},model:{value:e.userInfo.PHONE,callback:function(t){e.$set(e.userInfo,"PHONE",t)},expression:"userInfo.PHONE"}})],1),r("div",{staticClass:"q-mt-sm"},[r("q-table",{staticClass:"my-sticky-header-column-table bg-yellow-1",attrs:{title:"Nội dung đề xuất",data:e.data,columns:e.columns,"row-key":"name",separator:e.separator},on:{"row-click":e.click},scopedSlots:e._u([{key:"body",fn:function(t){return[r("q-tr",{attrs:{props:t}},[r("q-td",{key:"tenVT",attrs:{props:t}},[e._v(e._s(t.row.tenVT))]),r("q-td",{key:"maVT",attrs:{props:t}},[e._v(e._s(t.row.maVT))]),r("q-td",{key:"number",attrs:{props:t}},[e._v(e._s(t.row.number))]),r("q-td",{key:"donViTinh",attrs:{props:t}},[e._v(e._s(t.row.donViTinh))]),r("q-td",{key:"yeuCauKyThuat",attrs:{props:t}},[e._v(e._s(t.row.yeuCauKyThuat))]),r("q-td",{key:"mucDichSuDung",attrs:{props:t}},[e._v(e._s(t.row.mucDichSuDung))]),r("q-td",{key:"statusRequests",attrs:{props:t}},[r("q-select",{attrs:{filled:"",options:e.optionStatusReq,label:"Trạng thái phê duyệt"},on:{input:function(r){return e.activeReq(t)}},model:{value:t.row.statusRequests,callback:function(r){e.$set(t.row,"statusRequests",r)},expression:"props.row.statusRequests"}})],1)],1)]}}])}),r("q-btn",{directives:[{name:"show",rawName:"v-show",value:!e.disable,expression:"!disable"}],staticClass:"q-mt-sm q-mb-sm float-right",staticStyle:{"z-index":"99"},attrs:{color:"primary","text-color":"white",label:"Thêm"},on:{click:e.initNewRow}})],1)]),r("footerCard",{attrs:{order:e.order,nextId:e.nextId}})],1)},Ae=[];function $e(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function Qe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?$e(Object(r),!0).forEach((function(t){u()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$e(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Ye={components:{DxDataGrid:fe["DxDataGrid"],DxColumn:fe["DxColumn"],DxEditing:fe["DxEditing"],DxPaging:fe["DxPaging"],DxButton:he.a,DxLookup:fe["DxLookup"],DxFilterRow:fe["DxFilterRow"],footerCard:pe},props:["metaValue","disable","order"],created:function(){var e=this;return l()(o.a.mark((function t(){var r,a,n;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.status=e.$route.query.status,e.loadData(e.order.id),t.next=4,e.getAllAccounts();case 4:return r=t.sent,e.proAccount=r.filter((function(t){return t.id==e.order.accountId})),t.next=8,e.GET_DEPARTMENTSBYID(e.order.departmentId);case 8:for(e.nameDepartmentName=t.sent,console.log("acocountpro",e.proAccount),console.log("nameDepartmentName",e.nameDepartmentName),e.order.Requests.sort(e.compareValues("star","asc")),a=null,n=0;n<e.order.Requests.length;n++)e.order.Requests[n].id==e.$route.query.id&&(console.log(e.order.Requests[n]),a=e.order.Requests[n].star,console.log("idDis",a));e.nextId=e.order.Requests.find((function(e){return e.star>a})),console.log("data",e.nextId);case 16:case"end":return t.stop()}}),t)})))()},data:function(){var e;return e={optionStatusReq:[{label:"Đồng ý",value:1},{label:"Xem xét",value:0},{label:"Hủy",value:2}],statusRequestsXemXet:null,statusRequestsOk:null,statusRequestsCancel:null,modelActionReq:{},myDepartment:null,stepDepartment:null,departments:[],events:[],options:null,account:[],active:!1,proAccount:null,statusRequests:null,separator:"cell",selected:[]},u()(e,"events",[]),u()(e,"nameDepartment",{}),u()(e,"status",""),u()(e,"phoneNumber",""),u()(e,"nameDepartmentName",null),u()(e,"dataAddRow",[]),u()(e,"activeFormAdd",!1),u()(e,"activeFormEdit",!1),u()(e,"task",{maVT:null,tenVT:null,yeuCauKyThuat:null,mucDichSuDung:null,number:null,donViTinh:null,id:null}),u()(e,"columns",[{name:"tenVT",required:!0,label:"Tên vật tư",align:"left",field:function(e){return e.tenVT},format:function(e){return"".concat(e)},sortable:!0},{name:"maVT",required:!0,label:"Mã vật tư",align:"left",field:function(e){return e.maVT},format:function(e){return"".concat(e)},sortable:!0},{name:"number",required:!0,label:"Số lượng",align:"left",field:function(e){return e.number},format:function(e){return"".concat(e)},sortable:!0},{name:"donViTinh",required:!0,label:"Đơn vị",align:"left",field:function(e){return e.donViTinh},format:function(e){return"".concat(e)},sortable:!0},{name:"yeuCauKyThuat",required:!0,label:"Yêu cầu kỹ thuật",align:"left",field:function(e){return e.yeuCauKyThuat},format:function(e){return"".concat(e)},sortable:!0},{name:"mucDichSuDung",required:!0,label:"Mục đích sử dụng",align:"left",field:function(e){return e.mucDichSuDung},format:function(e){return"".concat(e)},sortable:!0},{name:"statusRequests",required:!0,label:"Trạng thái phê duyệt",align:"left",text:"red",field:function(e){return e.statusRequests},format:function(e){return"".concat(e)},sortable:!0}]),u()(e,"data",[]),e},computed:Qe(Qe({},Object(d["c"])("orders",["order"])),Object(d["c"])("base",["userInfo","dsCongDoans"])),watch:{selected:function(e,t){console.log("selected",this.selected),console.log("oldValue",t),console.log("newValue",e)}},methods:Qe(Qe(Qe(Qe(Qe({},Object(d["b"])("base",["GET_DEPARTMENTSBYID"])),Object(d["b"])("orders",["getOneOrder","getAllRequests","getAllAccounts"])),Object(d["b"])("orderMetas",["getOneOrderMeta",,"addMulRow","addorderMeta","deleteOrderMeta","updateOrderMeta"])),Object(d["b"])("requests",["deleteRequest","resetOrder","activeRequestsMeta"])),{},{activeReq:function(e){var t=this;return l()(o.a.mark((function r(){var a,n,s;return o.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return a=e.row,console.log("data",a),console.log("this.props.row.statusRequests",a.statusRequests),n={id:a.id,statusRequests:a.statusRequests.label},r.next=6,t.activeRequestsMeta(n);case 6:s=r.sent,console.log(s);case 8:case"end":return r.stop()}}),r)})))()},compareValues:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";return function(r,a){if(!r.hasOwnProperty(e)||!a.hasOwnProperty(e))return 0;var n="string"===typeof r[e]?r[e].toUpperCase():r[e],s="string"===typeof a[e]?a[e].toUpperCase():a[e],o=0;return n>s?o=1:n<s&&(o=-1),"desc"==t?-1*o:o}},loadData:function(e){var t=this;return l()(o.a.mark((function r(){var a;return o.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return a=null,r.prev=1,r.next=4,t.getOneOrder(e);case 4:a=r.sent,r.next=10;break;case 7:r.prev=7,r.t0=r["catch"](1),console.log(r.t0);case 10:return a||t.$router.push({path:"/tao-de-xuat"}),t.order=a.data.data,r.next=14,a.data.data.OrderMeta.filter((function(e){return e.maVT})).sort((function(e,t){return e.createdAt-t.createdAt}));case 14:t.data=r.sent,console.log("data",t.data);case 16:case"end":return r.stop()}}),r,null,[[1,7]])})))()}})},Be=Ye,Ge=(r("5606"),Object(b["a"])(Be,Ee,Ae,!1,null,null,null)),He=Ge.exports;C()(Ge,"components",{QCardSection:q["a"],QInput:L["a"],QTable:ke["a"],QTr:_e["a"],QTd:Ie["a"],QRadio:Pe["a"],QSelect:Se["a"],QBtn:v["a"]});var Le=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("q-card-section",[r("q-input",{staticClass:"q-mt-sm",attrs:{outlined:"",label:"Phòng Ban/Đơn vị Có nhu cầu:",readonly:e.disable},model:{value:e.order.OrderMeta[0].kinhGui,callback:function(t){e.$set(e.order.OrderMeta[0],"kinhGui",t)},expression:"order.OrderMeta[0].kinhGui"}}),r("div",{staticClass:"q-mt-sm",attrs:{outlined:""}},[e._v("Nội dung : ")]),e._l(e.order.OrderMeta.filter((function(e){return e.STT})).sort((function(e,t){return e.STT-t.STT})),(function(t,a){return r("div",{key:a},[r("q-card",{staticClass:"q-mb-sm q-mt-sm"},[r("q-card-section",[r("div",[e._v("STT : "),r("b",[e._v(e._s(t.STT))])]),r("div",[e._v("Vị trí : "),r("b",[e._v(e._s(t.position))])]),r("div",{staticClass:"text-subtitle1"},[e._v("Số lượng : "),r("b",[e._v(e._s(t.number))])]),r("div",[e._v("Địa điểm làm việc : "+e._s(t.locationWork))]),r("div",[e._v("Thời gian cần tuyển dụng : "+e._s(t.timeRecruit))]),r("div",[e._v("Tình trạng phê duyệt : "),r("b",[e._v(e._s(t.statusRequests))])]),r("q-radio",{staticClass:"q-mr-sm",attrs:{dense:"",val:"Xem xét",label:"Xem xét"},on:{input:function(r){return e.activeReq(t)}},model:{value:t.statusRequests,callback:function(r){e.$set(t,"statusRequests",r)},expression:"task.statusRequests"}}),r("q-radio",{staticClass:"q-mr-sm",attrs:{dense:"",val:"Đồng ý",label:"Đồng ý"},on:{input:function(r){return e.activeReq(t)}},model:{value:t.statusRequests,callback:function(r){e.$set(t,"statusRequests",r)},expression:"task.statusRequests"}}),r("q-radio",{staticClass:"q-mr-sm",attrs:{dense:"",val:"Giải trình bổ sung",label:"Giải trình bổ sung"},on:{input:function(r){return e.activeReq(t)}},model:{value:t.statusRequests,callback:function(r){e.$set(t,"statusRequests",r)},expression:"task.statusRequests"}}),r("q-radio",{staticClass:"q-mr-sm",attrs:{dense:"",val:"Hủy",label:"Hủy"},on:{input:function(r){return e.activeReq(t)}},model:{value:t.statusRequests,callback:function(r){e.$set(t,"statusRequests",r)},expression:"task.statusRequests"}})],1)],1)],1)})),r("q-input",{staticClass:"q-mt-sm",attrs:{label:"Các yêu cầu đối với từng vị trí(Gửi kèm mô tả công việc - nếu có):",outlined:"",readonly:e.disable},model:{value:e.order.OrderMeta[0].description,callback:function(t){e.$set(e.order.OrderMeta[0],"description",t)},expression:"order.OrderMeta[0].description"}}),r("footerCard",{attrs:{nextId3:e.nextId3,nextId2:e.nextId2,order:e.order,nextId:e.nextId}})],2)},Fe=[],Xe=r("7037"),Ue=r.n(Xe);r("f751");function Ke(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function Je(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ke(Object(r),!0).forEach((function(t){u()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ke(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var We={components:{DxDataGrid:fe["DxDataGrid"],DxColumn:fe["DxColumn"],DxEditing:fe["DxEditing"],DxPaging:fe["DxPaging"],DxButton:he.a,DxLookup:fe["DxLookup"],footerCard:pe},props:["metaValue","disable","order"],created:function(){var e=this;console.log("options",this.departments),this.order.Requests.sort(this.compareValues("star","asc"));for(var t=null,r=0;r<this.order.Requests.length;r++)this.order.Requests[r].id==this.$route.query.id&&(console.log(this.order.Requests[r]),t=this.order.Requests[r].star,console.log("idDis",t));this.nextId=this.order.Requests.find((function(e){return e.star>t})),this.nextId2=this.order.Requests.filter((function(t){return t.star>e.request.star&&"Phòng vật tư"!=t.position})),this.nextId3=this.order.Requests.filter((function(t){return t.star>e.request.star&&("Phòng vật tư"==t.position||"Phòng bảo vệ"==t.position)})),console.log("this.nextId",this.nextId),console.log("this.nextId2",this.nextId2),console.log("this.nextId3",this.nextId3),console.log("data",this.nextId),this.status=this.$route.query.status,console.log("status",this.status),console.log("dsCongDoans",this.dsCongDoans),console.log("userInfo",this.userInfo),this.nameDepartment=this.dsCongDoans.find((function(t){return t.id==e.userInfo.departmentId})),console.log("a",this.nameDepartment),this.$route.query.id?this.getOneOrder(this.$route.query.id).then((function(t){t.data.data.Requests.length&&(e.disable=!0),e.metaValue=Object.assign(e.metaValue,JSON.parse(t.data.data.OrderMeta[0].metaValue)[0])})):this.$router.push({path:"/tao-de-xuat"})},data:function(){return{events:[],nameDepartment:{},status:"",phoneNumber:"",nextId:null,statusRequests:null,nextId2:null,nextId3:null}},computed:Je(Je({},Object(d["c"])("orders",["order"])),Object(d["c"])("base",["userInfo","dsCongDoans"])),methods:Je(Je(Je(Je({},Object(d["b"])("requests",["activeRequestsMeta"])),{},{activeReq:function(e){var t=this;return l()(o.a.mark((function r(){var a,n;return o.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return console.log("task Ac",Ue()(e.statusRequests)),a={id:e.id,statusRequests:e.statusRequests},r.next=4,t.activeRequestsMeta(a);case 4:n=r.sent,console.log(n);case 6:case"end":return r.stop()}}),r)})))()},compareValues:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";return function(r,a){if(!r.hasOwnProperty(e)||!a.hasOwnProperty(e))return 0;var n="string"===typeof r[e]?r[e].toUpperCase():r[e],s="string"===typeof a[e]?a[e].toUpperCase():a[e],o=0;return n>s?o=1:n<s&&(o=-1),"desc"==t?-1*o:o}}},Object(d["b"])("orders",["getOneOrder","getAllRequests"])),Object(d["b"])("orderMetas",["getOneOrderMeta","addorderMeta","deleteOrderMeta","updateOrderMeta"])),{},{RowInserted:function(e){console.log("STT",e.data.STT),console.log("STT",e.data.id);var t=e.data.STT,r=e.data.position,a=this.userInfo.lastName,n=e.data.number,s=this.userInfo.PHONE,o=this.metaValue.selection,i=e.data.locationWork,l=e.data.timeRecruit,c=this.order.OrderMeta[0].description;this.addorderMeta(Je(Je({},this.order.OrderMeta[0]),{},{metaValue:JSON.stringify([this.metaValue]),STT:t,position:r,fullName:a,number:n,phoneNumber:s,selection:o,locationWork:i,timeRecruit:l,description:c}))},RowDelted:function(e){console.log("STT",e.data.STT),console.log("STT",e.data.id),this.deleteOrderMeta(e.data.id)},RowUpdated:function(e){console.log("STT",e.data.STT),console.log("STT",e.data.id);var t=e.data.STT,r=e.data.position,a=this.userInfo.lastName,n=e.data.number,s=this.userInfo.PHONE,o=this.metaValue.selection,i=e.data.locationWork,l=e.data.timeRecruit,c=this.order.OrderMeta[0].description;this.updateOrderMeta(Je(Je({},this.order.OrderMeta[0]),{},{metaValue:JSON.stringify([this.metaValue]),STT:t,position:r,fullName:a,number:n,phoneNumber:s,selection:o,locationWork:i,timeRecruit:l,description:c}))}})},ze=We,Ze=Object(b["a"])(ze,Le,Fe,!1,null,null,null),et=Ze.exports;C()(Ze,"components",{QCardSection:q["a"],QInput:L["a"],QCard:g["a"],QRadio:Pe["a"]});var tt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("q-card-section",[r("div",{staticClass:"q-gutter-sm text-primary text-h6"},[e._v("\n       Mẫu điều chuyển nhân viên :\n      "),r("br")]),r("div",{staticClass:"q-gutter-sm q-mt-sm"},[null==e.order.OrderMeta[0].selection?r("div",[r("q-radio",{attrs:{dense:"",val:"Điều chuyển cá nhân",label:"Điều chuyển cá nhân",color:"teal"},model:{value:e.metaValue.selection,callback:function(t){e.$set(e.metaValue,"selection",t)},expression:"metaValue.selection"}}),r("q-radio",{attrs:{dense:"",val:"Điều chuyển tập thể",label:"Điều chuyển tập thể",color:"red"},model:{value:e.metaValue.selection,callback:function(t){e.$set(e.metaValue,"selection",t)},expression:"metaValue.selection"}})],1):r("div",["Điều chuyển tập thể"==e.order.OrderMeta[0].selection?r("span",[r("q-radio",{attrs:{dense:"",val:"Điều chuyển tập thể",color:"red"},model:{value:e.metaValue.selection,callback:function(t){e.$set(e.metaValue,"selection",t)},expression:"metaValue.selection"}})],1):r("span",[r("q-radio",{attrs:{dense:"",val:"Điều chuyển cá nhân",color:"red"},model:{value:e.metaValue.selection,callback:function(t){e.$set(e.metaValue,"selection",t)},expression:"metaValue.selection"}})],1),r("span",{staticClass:"q-ml-sm",staticStyle:{"font-size":"20px"}},[e._v(e._s(e.metaValue.selection))])])]),"Điều chuyển tập thể"==e.metaValue.selection&&null!=e.metaValue.selection?r("div",[r("div"),r("q-input",{staticClass:"q-mt-sm",attrs:{outlined:"",label:"Kính gửi : ",readonly:e.disable},model:{value:e.metaValue.kinhGui,callback:function(t){e.$set(e.metaValue,"kinhGui",t)},expression:"metaValue.kinhGui"}}),r("q-input",{staticClass:"q-mt-sm",attrs:{outlined:"",label:"Tên tôi là : ",readonly:e.disable},model:{value:e.order.OrderMeta[0].fullName,callback:function(t){e.$set(e.order.OrderMeta[0],"fullName",t)},expression:"order.OrderMeta[0].fullName"}}),r("q-input",{staticClass:"q-mt-sm",attrs:{outlined:"",label:"Chức danh : ",readonly:e.disable},model:{value:e.order.OrderMeta[0].position,callback:function(t){e.$set(e.order.OrderMeta[0],"position",t)},expression:"order.OrderMeta[0].position"}}),r("q-input",{staticClass:"q-mt-sm",attrs:{outlined:"",label:"Phòng ban/bộ phận : ",readonly:e.disable},model:{value:e.order.OrderMeta[0].department,callback:function(t){e.$set(e.order.OrderMeta[0],"department",t)},expression:"order.OrderMeta[0].department"}}),r("div",{staticClass:"q-mt-sm",attrs:{outlined:""}},[e._v("Căn cứ vào tình hình thực tế công việc và nguyện vọng của người lao động,\n  "),r("br"),e._v("Nay tôi làm đơn này, kính xin Ban Tổng giám đốc cho tôi được điều chuyển các cá nhân có tên sau sang vị trí công tác mới, gồm: \n    \n  ")]),e._l(e.order.OrderMeta.filter((function(e){return e.STT})).sort((function(e,t){return e.STT-t.STT})),(function(t,a){return r("div",{key:a},[r("q-card",{staticClass:"q-mb-sm q-mt-sm"},[r("q-card-section",[r("div",[e._v("STT : "),r("b",[e._v(e._s(t.STT))])]),r("div",[e._v("Mã nhân viên : "),r("b",[e._v(e._s(t.maNV))])]),r("div",{staticClass:"text-subtitle1"},[e._v("Họ và tên : "),r("b",[e._v(e._s(t.fullName2))])]),r("div",[e._v("Vị trí hiện tại : "+e._s(t.department2))]),r("div",[e._v("Vị trí đề xuất điều chuyển sang : "+e._s(t.stepDepartment))])])],1)],1)})),r("div",{staticClass:"q-mt-sm",attrs:{outlined:""}},[e._v("\n      Vậy, kính mong Ban Tổng Giám đốc xem xét, điều chuyển các nhân sự trên./.\n      "),r("br"),e._v("Trân trọng cảm ơn !    \n  ")]),r("footerCard",{attrs:{order:e.order,nextId:e.nextId}})],2):e._e(),"Điều chuyển cá nhân"==e.metaValue.selection&&null!=e.metaValue.selection?r("div",[r("q-input",{staticClass:"q-mt-sm",attrs:{outlined:"",label:"Kính gửi : ",readonly:e.disable},model:{value:e.metaValue.kinhGui,callback:function(t){e.$set(e.metaValue,"kinhGui",t)},expression:"metaValue.kinhGui"}}),r("q-input",{staticClass:"q-mt-sm",attrs:{outlined:"",label:"Tên tôi là : ",readonly:e.disable},model:{value:e.order.OrderMeta[0].fullName,callback:function(t){e.$set(e.order.OrderMeta[0],"fullName",t)},expression:"order.OrderMeta[0].fullName"}}),r("q-input",{staticClass:"q-mt-sm",attrs:{outlined:"",label:"Chức danh : ",readonly:e.disable},model:{value:e.order.OrderMeta[0].position,callback:function(t){e.$set(e.order.OrderMeta[0],"position",t)},expression:"order.OrderMeta[0].position"}}),r("q-input",{staticClass:"q-mt-sm",attrs:{outlined:"",label:"Phòng ban/bộ phận : ",readonly:e.disable},model:{value:e.order.OrderMeta[0].department,callback:function(t){e.$set(e.order.OrderMeta[0],"department",t)},expression:"order.OrderMeta[0].department"}}),r("q-input",{staticClass:"q-mt-sm",attrs:{outlined:"",label:"Điều chuyển sang bộ phận : ",readonly:e.disable},model:{value:e.order.OrderMeta[0].stepDepartment,callback:function(t){e.$set(e.order.OrderMeta[0],"stepDepartment",t)},expression:"order.OrderMeta[0].stepDepartment"}}),r("q-input",{staticClass:"q-mt-sm",attrs:{outlined:"",label:"Lí do : ",readonly:e.disable},model:{value:e.metaValue.lyDo,callback:function(t){e.$set(e.metaValue,"lyDo",t)},expression:"metaValue.lyDo"}}),r("div",{staticClass:"q-mt-sm",attrs:{outlined:""}},[e._v("\n      Vậy, kính mong Tổng Giám đốc, Cán bộ quản lý trực tiếp và Trưởng phòng Nhân sự xem xét cho tôi được điều chuyển sang vị trí công tác mới.\n      "),r("br"),e._v("Trân trọng cảm ơn !    \n  ")]),r("footerCard",{attrs:{order:e.order,nextId:e.nextId}})],1):e._e()])},rt=[];function at(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function nt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?at(Object(r),!0).forEach((function(t){u()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):at(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var st={components:{DxDataGrid:fe["DxDataGrid"],DxColumn:fe["DxColumn"],DxEditing:fe["DxEditing"],DxPaging:fe["DxPaging"],DxButton:he.a,DxLookup:fe["DxLookup"],footerCard:pe},props:["metaValue","disable","order"],data:function(){return{myDepartment:null,stepDepartment:null,departments:[],events:[],options:null,nameDepartmentName:null,nameStepDepartmentName:null,nextId:null}},created:function(){var e=this;return l()(o.a.mark((function t(){var r,a;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:for(console.log("options",e.departments),e.order.Requests.sort(e.compareValues("star","asc")),r=null,a=0;a<e.order.Requests.length;a++)e.order.Requests[a].id==e.$route.query.id&&(console.log(e.order.Requests[a]),r=e.order.Requests[a].star,console.log("idDis",r));e.nextId=e.order.Requests.find((function(e){return e.star>r})),console.log("data",e.nextId);case 6:case"end":return t.stop()}}),t)})))()},methods:nt(nt(nt(nt({compareValues:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";return function(r,a){if(!r.hasOwnProperty(e)||!a.hasOwnProperty(e))return 0;var n="string"===typeof r[e]?r[e].toUpperCase():r[e],s="string"===typeof a[e]?a[e].toUpperCase():a[e],o=0;return n>s?o=1:n<s&&(o=-1),"desc"==t?-1*o:o}}},Object(d["b"])("base",["GET_DEPARTMENTSBYID"])),Object(d["b"])("orders",["getOneOrder","getAllRequests"])),Object(d["b"])("orderMetas",["getOneOrderMeta","addorderMeta","deleteOrderMeta","updateOrderMeta"])),{},{chonCongDoan:function(){console.log("myDepartment",this.myDepartment.value)}}),computed:nt(nt({},Object(d["c"])("orders",["order"])),Object(d["c"])("base",["myFactoryInfor","userInfo","dsCongDoans"]))},ot=st,it=Object(b["a"])(ot,tt,rt,!1,null,null,null),lt=it.exports;C()(it,"components",{QCardSection:q["a"],QRadio:Pe["a"],QInput:L["a"],QCard:g["a"]});var ct=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("q-card-section",[r("div",{staticClass:"q-gutter-sm text-primary text-h6"},[e._v("\n       Loại mẫu xin nghỉ :\n      "),r("br")]),r("div",{staticClass:"q-gutter-sm q-mt-sm"},[r("q-radio",{attrs:{dense:"",val:"Nghỉ phép",label:"Nghỉ phép",color:"teal"},model:{value:e.metaValue.selection,callback:function(t){e.$set(e.metaValue,"selection",t)},expression:"metaValue.selection"}}),r("q-radio",{attrs:{dense:"",val:"Nghỉ ốm",label:"Nghỉ ốm",color:"red"},model:{value:e.metaValue.selection,callback:function(t){e.$set(e.metaValue,"selection",t)},expression:"metaValue.selection"}}),r("q-radio",{attrs:{dense:"",val:"Nghỉ việc riêng có hưởng lương",label:"Nghỉ việc riêng có hưởng lương",color:"blue"},model:{value:e.metaValue.selection,callback:function(t){e.$set(e.metaValue,"selection",t)},expression:"metaValue.selection"}}),r("q-radio",{attrs:{dense:"",val:"Xin nghỉ việc(kết thúc hợp đồng lao động)",label:"Xin nghỉ việc(kết thúc hợp đồng lao động)",color:"yellow"},model:{value:e.metaValue.selection,callback:function(t){e.$set(e.metaValue,"selection",t)},expression:"metaValue.selection"}}),r("q-radio",{attrs:{dense:"",val:"Xin nghỉ không lương",label:"Xin nghỉ không lương",color:"black"},model:{value:e.metaValue.selection,callback:function(t){e.$set(e.metaValue,"selection",t)},expression:"metaValue.selection"}}),r("q-radio",{attrs:{dense:"",val:"Xin nghỉ Thai sản",label:"Xin nghỉ Thai sản",color:"pink"},model:{value:e.metaValue.selection,callback:function(t){e.$set(e.metaValue,"selection",t)},expression:"metaValue.selection"}})],1),"Xin nghỉ việc(kết thúc hợp đồng lao động)"==e.metaValue.selection?r("div",[r("div",{staticClass:"flex"},[r("q-input",{staticClass:"q-mt-sm q-pr-sm",staticStyle:{width:"50% !important"},attrs:{outlined:"",label:"Tên tôi là : ",readonly:e.disable},model:{value:e.order.OrderMeta[0].fullName,callback:function(t){e.$set(e.order.OrderMeta[0],"fullName",t)},expression:"order.OrderMeta[0].fullName"}}),r("q-input",{staticClass:"q-mt-sm",staticStyle:{width:"50% !important"},attrs:{outlined:"",label:"Mã nhân viên : ",readonly:e.disable},model:{value:e.order.OrderMeta[0].maNV,callback:function(t){e.$set(e.order.OrderMeta[0],"maNV",t)},expression:"order.OrderMeta[0].maNV"}})],1),r("div",{staticClass:"row"},[r("q-input",{staticClass:"q-mt-sm q-mr-sm col",attrs:{outlined:"",label:"Chức vụ : ",readonly:e.disable},model:{value:e.order.OrderMeta[0].position,callback:function(t){e.$set(e.order.OrderMeta[0],"position",t)},expression:"order.OrderMeta[0].position"}}),r("q-input",{staticClass:"q-mt-sm  col",attrs:{outlined:"",label:"Phòng ban/bộ phận : ",readonly:e.disable},model:{value:e.order.OrderMeta[0].department,callback:function(t){e.$set(e.order.OrderMeta[0],"department",t)},expression:"order.OrderMeta[0].department"}})],1),r("div",{staticClass:"col"},[r("div",{},[e._v("Thời gian từ :")]),r("div",{},[r("q-input",{staticClass:"q-mb-sm",attrs:{readonly:e.disable,filled:""},scopedSlots:e._u([{key:"prepend",fn:function(){return[r("q-icon",{staticClass:"cursor-pointer",attrs:{name:"event"}},[r("q-popup-proxy",{ref:"qDateProxy",attrs:{"transition-show":"scale","transition-hide":"scale"}},[r("q-date",{attrs:{readonly:e.disable,mask:"DD-MM-YYYY HH:mm"},model:{value:e.order.OrderMeta[0].dateStart,callback:function(t){e.$set(e.order.OrderMeta[0],"dateStart",t)},expression:"order.OrderMeta[0].dateStart"}},[r("div",{staticClass:"row items-center justify-end"},[r("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Close",color:"primary",flat:""}})],1)])],1)],1)]},proxy:!0},{key:"append",fn:function(){return[r("q-icon",{staticClass:"cursor-pointer",attrs:{name:"access_time"}},[r("q-popup-proxy",{attrs:{"transition-show":"scale","transition-hide":"scale"}},[r("q-time",{attrs:{readonly:e.disable,mask:"DD-MM-YYYY HH:mm",format24h:""},model:{value:e.order.OrderMeta[0].dateStart,callback:function(t){e.$set(e.order.OrderMeta[0],"dateStart",t)},expression:"order.OrderMeta[0].dateStart"}},[r("div",{staticClass:"row items-center justify-end"},[r("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Close",color:"primary",flat:""}})],1)])],1)],1)]},proxy:!0}],null,!1,2795138825),model:{value:e.order.OrderMeta[0].dateStart,callback:function(t){e.$set(e.order.OrderMeta[0],"dateStart",t)},expression:"order.OrderMeta[0].dateStart"}})],1)]),r("q-input",{staticClass:"q-mt-sm",attrs:{outlined:"",label:"Lý do : ",readonly:e.disable},model:{value:e.order.OrderMeta[0].description,callback:function(t){e.$set(e.order.OrderMeta[0],"description",t)},expression:"order.OrderMeta[0].description"}}),r("footerCard",{attrs:{order:e.order,nextId:e.nextId}})],1):e._e(),"Nghỉ phép"==e.metaValue.selection||"Nghỉ ốm"==e.metaValue.selection||"Nghỉ việc riêng có hưởng lương"==e.metaValue.selection&&null!=e.metaValue.selection?r("div",[r("q-input",{staticClass:"q-mt-sm ",attrs:{outlined:"",label:"Tên tôi là : ",readonly:e.disable},model:{value:e.order.OrderMeta[0].fullName,callback:function(t){e.$set(e.order.OrderMeta[0],"fullName",t)},expression:"order.OrderMeta[0].fullName"}}),r("q-input",{staticClass:"q-mt-sm ",attrs:{outlined:"",label:"Chức vụ : ",readonly:e.disable},model:{value:e.order.OrderMeta[0].position,callback:function(t){e.$set(e.order.OrderMeta[0],"position",t)},expression:"order.OrderMeta[0].position"}}),r("q-input",{staticClass:"q-mt-sm ",attrs:{outlined:"",label:"Phòng ban/bộ phận : ",readonly:e.disable},model:{value:e.order.OrderMeta[0].department,callback:function(t){e.$set(e.order.OrderMeta[0],"department",t)},expression:"order.OrderMeta[0].department"}}),r("div",{staticClass:"col"},[r("div",{},[e._v("Thời gian từ :")]),r("div",{},[r("q-input",{staticClass:"q-mb-sm",attrs:{readonly:e.disable,filled:""},scopedSlots:e._u([{key:"prepend",fn:function(){return[r("q-icon",{staticClass:"cursor-pointer",attrs:{name:"event"}},[r("q-popup-proxy",{ref:"qDateProxy",attrs:{"transition-show":"scale","transition-hide":"scale"}},[r("q-date",{attrs:{readonly:e.disable,mask:"DD-MM-YYYY HH:mm"},model:{value:e.order.OrderMeta[0].dateStart,callback:function(t){e.$set(e.order.OrderMeta[0],"dateStart",t)},expression:"order.OrderMeta[0].dateStart"}},[r("div",{staticClass:"row items-center justify-end"},[r("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Close",color:"primary",flat:""}})],1)])],1)],1)]},proxy:!0},{key:"append",fn:function(){return[r("q-icon",{staticClass:"cursor-pointer",attrs:{name:"access_time"}},[r("q-popup-proxy",{attrs:{"transition-show":"scale","transition-hide":"scale"}},[r("q-time",{attrs:{readonly:e.disable,mask:"DD-MM-YYYY HH:mm",format24h:""},model:{value:e.order.OrderMeta[0].dateStart,callback:function(t){e.$set(e.order.OrderMeta[0],"dateStart",t)},expression:"order.OrderMeta[0].dateStart"}},[r("div",{staticClass:"row items-center justify-end"},[r("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Close",color:"primary",flat:""}})],1)])],1)],1)]},proxy:!0}],null,!1,2795138825),model:{value:e.order.OrderMeta[0].dateStart,callback:function(t){e.$set(e.order.OrderMeta[0],"dateStart",t)},expression:"order.OrderMeta[0].dateStart"}})],1)]),r("div",{staticClass:"col q-pl-sm"},[r("div",{staticClass:"text-h8"},[e._v("Thời gian đến :")]),r("div",{},[r("q-input",{staticClass:"q-mb-sm",attrs:{filled:""},scopedSlots:e._u([{key:"prepend",fn:function(){return[r("q-icon",{staticClass:"cursor-pointer",attrs:{name:"event"}},[r("q-popup-proxy",{ref:"qDateProxy",attrs:{"transition-show":"scale","transition-hide":"scale"}},[r("q-date",{attrs:{readonly:e.disable,mask:"DD-MM-YYYY HH:mm"},model:{value:e.order.OrderMeta[0].dateEnd,callback:function(t){e.$set(e.order.OrderMeta[0],"dateEnd",t)},expression:"order.OrderMeta[0].dateEnd"}},[r("div",{staticClass:"row items-center justify-end"},[r("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Close",color:"primary",flat:""}})],1)])],1)],1)]},proxy:!0},{key:"append",fn:function(){return[r("q-icon",{staticClass:"cursor-pointer",attrs:{name:"access_time"}},[r("q-popup-proxy",{attrs:{"transition-show":"scale","transition-hide":"scale"}},[r("q-time",{attrs:{readonly:e.disable,mask:"DD-MM-YYYY HH:mm",format24h:""},model:{value:e.order.OrderMeta[0].dateEnd,callback:function(t){e.$set(e.order.OrderMeta[0],"dateEnd",t)},expression:"order.OrderMeta[0].dateEnd"}},[r("div",{staticClass:"row items-center justify-end"},[r("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Close",color:"primary",flat:""}})],1)])],1)],1)]},proxy:!0}],null,!1,2705003113),model:{value:e.order.OrderMeta[0].dateEnd,callback:function(t){e.$set(e.order.OrderMeta[0],"dateEnd",t)},expression:"order.OrderMeta[0].dateEnd"}})],1)]),r("q-input",{staticClass:"q-mt-sm",attrs:{outlined:"",label:"Lý do : ",readonly:e.disable},model:{value:e.order.OrderMeta[0].description,callback:function(t){e.$set(e.order.OrderMeta[0],"description",t)},expression:"order.OrderMeta[0].description"}}),r("footerCard",{attrs:{order:e.order,nextId:e.nextId}})],1):e._e(),"Xin nghỉ Thai sản"==e.metaValue.selection&&null!=e.metaValue.selection?r("div",[r("div",{staticClass:"row"},[r("q-input",{staticClass:"q-mt-sm col",attrs:{outlined:"",label:"Tên tôi là : ",readonly:e.disable},model:{value:e.order.OrderMeta[0].fullName,callback:function(t){e.$set(e.order.OrderMeta[0],"fullName",t)},expression:"order.OrderMeta[0].fullName"}}),r("q-input",{staticClass:"q-mt-sm col",attrs:{outlined:"",label:"Mã nhân viên : ",readonly:e.disable},model:{value:e.order.OrderMeta[0].maNV,callback:function(t){e.$set(e.order.OrderMeta[0],"maNV",t)},expression:"order.OrderMeta[0].maNV"}})],1),r("div",{staticClass:"row"},[r("q-input",{staticClass:"q-mt-sm col",attrs:{outlined:"",label:"Chức vụ : ",readonly:e.disable},model:{value:e.order.OrderMeta[0].position,callback:function(t){e.$set(e.order.OrderMeta[0],"position",t)},expression:"order.OrderMeta[0].position"}}),r("q-input",{staticClass:"q-mt-sm col",attrs:{outlined:"",label:"Phòng ban/bộ phận : ",readonly:e.disable},model:{value:e.order.OrderMeta[0].department,callback:function(t){e.$set(e.order.OrderMeta[0],"department",t)},expression:"order.OrderMeta[0].department"}})],1),r("q-input",{staticClass:"q-mt-sm",attrs:{outlined:"",label:"Hiện tôi đang mang thai ở tháng thứ :",readonly:e.disable},model:{value:e.metaValue.thoiGianMangThai,callback:function(t){e.$set(e.metaValue,"thoiGianMangThai",t)},expression:"metaValue.thoiGianMangThai"}}),r("div",{staticClass:"col"},[r("div",{},[e._v("Thời gian từ :")]),r("div",{},[r("q-input",{staticClass:"q-mb-sm",attrs:{readonly:e.disable,filled:""},scopedSlots:e._u([{key:"prepend",fn:function(){return[r("q-icon",{staticClass:"cursor-pointer",attrs:{name:"event"}},[r("q-popup-proxy",{ref:"qDateProxy",attrs:{"transition-show":"scale","transition-hide":"scale"}},[r("q-date",{attrs:{readonly:e.disable,mask:"DD-MM-YYYY HH:mm"},model:{value:e.order.OrderMeta[0].dateStart,callback:function(t){e.$set(e.order.OrderMeta[0],"dateStart",t)},expression:"order.OrderMeta[0].dateStart"}},[r("div",{staticClass:"row items-center justify-end"},[r("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Close",color:"primary",flat:""}})],1)])],1)],1)]},proxy:!0},{key:"append",fn:function(){return[r("q-icon",{staticClass:"cursor-pointer",attrs:{name:"access_time"}},[r("q-popup-proxy",{attrs:{"transition-show":"scale","transition-hide":"scale"}},[r("q-time",{attrs:{readonly:e.disable,mask:"DD-MM-YYYY HH:mm",format24h:""},model:{value:e.order.OrderMeta[0].dateStart,callback:function(t){e.$set(e.order.OrderMeta[0],"dateStart",t)},expression:"order.OrderMeta[0].dateStart"}},[r("div",{staticClass:"row items-center justify-end"},[r("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Close",color:"primary",flat:""}})],1)])],1)],1)]},proxy:!0}],null,!1,2795138825),model:{value:e.order.OrderMeta[0].dateStart,callback:function(t){e.$set(e.order.OrderMeta[0],"dateStart",t)},expression:"order.OrderMeta[0].dateStart"}})],1)]),r("footerCard",{attrs:{order:e.order,nextId:e.nextId}})],1):e._e(),"Xin nghỉ không lương"==e.metaValue.selection&&null!=e.metaValue.selection?r("div",[r("q-input",{staticClass:"q-mt-sm",attrs:{outlined:"",label:"Tên tôi là : ",readonly:e.disable},model:{value:e.order.OrderMeta[0].fullName,callback:function(t){e.$set(e.order.OrderMeta[0],"fullName",t)},expression:"order.OrderMeta[0].fullName"}}),r("q-input",{staticClass:"q-mt-sm",attrs:{outlined:"",label:"Mã nhân viên : ",readonly:e.disable},model:{value:e.order.OrderMeta[0].maNV,callback:function(t){e.$set(e.order.OrderMeta[0],"maNV",t)},expression:"order.OrderMeta[0].maNV"}}),r("q-input",{staticClass:"q-mt-sm",attrs:{outlined:"",label:"Chức vụ : ",readonly:e.disable},model:{value:e.order.OrderMeta[0].position,callback:function(t){e.$set(e.order.OrderMeta[0],"position",t)},expression:"order.OrderMeta[0].position"}}),r("q-input",{staticClass:"q-mt-sm",attrs:{outlined:"",label:"Phòng ban/bộ phận : ",readonly:e.disable},model:{value:e.order.OrderMeta[0].department,callback:function(t){e.$set(e.order.OrderMeta[0],"department",t)},expression:"order.OrderMeta[0].department"}}),r("div",{staticClass:"col"},[r("div",{},[e._v("Thời gian từ :")]),r("div",{},[r("q-input",{staticClass:"q-mb-sm",attrs:{readonly:e.disable,filled:""},scopedSlots:e._u([{key:"prepend",fn:function(){return[r("q-icon",{staticClass:"cursor-pointer",attrs:{name:"event"}},[r("q-popup-proxy",{ref:"qDateProxy",attrs:{"transition-show":"scale","transition-hide":"scale"}},[r("q-date",{attrs:{readonly:e.disable,mask:"DD-MM-YYYY HH:mm"},model:{value:e.order.OrderMeta[0].dateStart,callback:function(t){e.$set(e.order.OrderMeta[0],"dateStart",t)},expression:"order.OrderMeta[0].dateStart"}},[r("div",{staticClass:"row items-center justify-end"},[r("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Close",color:"primary",flat:""}})],1)])],1)],1)]},proxy:!0},{key:"append",fn:function(){return[r("q-icon",{staticClass:"cursor-pointer",attrs:{name:"access_time"}},[r("q-popup-proxy",{attrs:{"transition-show":"scale","transition-hide":"scale"}},[r("q-time",{attrs:{readonly:e.disable,mask:"DD-MM-YYYY HH:mm",format24h:""},model:{value:e.order.OrderMeta[0].dateStart,callback:function(t){e.$set(e.order.OrderMeta[0],"dateStart",t)},expression:"order.OrderMeta[0].dateStart"}},[r("div",{staticClass:"row items-center justify-end"},[r("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Close",color:"primary",flat:""}})],1)])],1)],1)]},proxy:!0}],null,!1,2795138825),model:{value:e.order.OrderMeta[0].dateStart,callback:function(t){e.$set(e.order.OrderMeta[0],"dateStart",t)},expression:"order.OrderMeta[0].dateStart"}})],1)]),r("div",{staticClass:"col q-pl-sm"},[r("div",{staticClass:"text-h8"},[e._v("Thời gian đến :")]),r("div",{},[r("q-input",{staticClass:"q-mb-sm",attrs:{filled:""},scopedSlots:e._u([{key:"prepend",fn:function(){return[r("q-icon",{staticClass:"cursor-pointer",attrs:{name:"event"}},[r("q-popup-proxy",{ref:"qDateProxy",attrs:{"transition-show":"scale","transition-hide":"scale"}},[r("q-date",{attrs:{readonly:e.disable,mask:"DD-MM-YYYY HH:mm"},model:{value:e.order.OrderMeta[0].dateEnd,callback:function(t){e.$set(e.order.OrderMeta[0],"dateEnd",t)},expression:"order.OrderMeta[0].dateEnd"}},[r("div",{staticClass:"row items-center justify-end"},[r("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Close",color:"primary",flat:""}})],1)])],1)],1)]},proxy:!0},{key:"append",fn:function(){return[r("q-icon",{staticClass:"cursor-pointer",attrs:{name:"access_time"}},[r("q-popup-proxy",{attrs:{"transition-show":"scale","transition-hide":"scale"}},[r("q-time",{attrs:{readonly:e.disable,mask:"DD-MM-YYYY HH:mm",format24h:""},model:{value:e.order.OrderMeta[0].dateEnd,callback:function(t){e.$set(e.order.OrderMeta[0],"dateEnd",t)},expression:"order.OrderMeta[0].dateEnd"}},[r("div",{staticClass:"row items-center justify-end"},[r("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Close",color:"primary",flat:""}})],1)])],1)],1)]},proxy:!0}],null,!1,2705003113),model:{value:e.order.OrderMeta[0].dateEnd,callback:function(t){e.$set(e.order.OrderMeta[0],"dateEnd",t)},expression:"order.OrderMeta[0].dateEnd"}})],1)]),r("q-input",{staticClass:"q-mt-sm",attrs:{outlined:"",label:"Lý do : ",readonly:e.disable},model:{value:e.order.OrderMeta[0].description,callback:function(t){e.$set(e.order.OrderMeta[0],"description",t)},expression:"order.OrderMeta[0].description"}}),r("footerCard",{attrs:{order:e.order,nextId2:e.nextId2,nextId3:e.nextId3,nextId:e.nextId}})],1):e._e()])},ut=[],dt=(r("7f7f"),r("e96d")),pt=r.n(dt);function mt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function ht(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?mt(Object(r),!0).forEach((function(t){u()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):mt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var ft={components:{DxDataGrid:fe["DxDataGrid"],DxColumn:fe["DxColumn"],DxEditing:fe["DxEditing"],DxPaging:fe["DxPaging"],DxButton:he.a,DxLookup:fe["DxLookup"],DxDateBox:pt.a,footerCard:pe},props:["metaValue","disable"],data:function(){return{nextId2:null,nextId3:null,myDepartment:null,stepDepartment:null,departments:[],events:[],options:null,nameDepartmentName:null,account:[],active:!1,nextId:null}},created:function(){var e=this;return l()(o.a.mark((function t(){var r,a;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:for(e.order.Requests.sort(e.compareValues("star","asc")),r=null,a=0;a<e.order.Requests.length;a++)e.order.Requests[a].id==e.$route.query.id&&(console.log(e.order.Requests[a]),r=e.order.Requests[a].star,console.log("idDis",r));e.nextId=e.order.Requests.find((function(e){return e.star>r})),console.log("data",e.nextId),e.nextId2=e.order.Requests.filter((function(t){return t.star>e.request.star&&"Phòng vật tư"!=t.position})),e.nextId3=e.order.Requests.filter((function(t){return t.star>e.request.star&&("Phòng vật tư"==t.position||"Phòng bảo vệ"==t.position)})),console.log("this.nextId",e.nextId),console.log("this.nextId2",e.nextId2),console.log("this.nextId3",e.nextId3);case 10:case"end":return t.stop()}}),t)})))()},methods:ht(ht(ht(ht({compareValues:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";return function(r,a){if(!r.hasOwnProperty(e)||!a.hasOwnProperty(e))return 0;var n="string"===typeof r[e]?r[e].toUpperCase():r[e],s="string"===typeof a[e]?a[e].toUpperCase():a[e],o=0;return n>s?o=1:n<s&&(o=-1),"desc"==t?-1*o:o}},changed:function(){var e=this;return l()(o.a.mark((function t(){var r;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log("changed"),console.log("this.order.OrderMeta[0].position2 ",e.order.OrderMeta[0].position2),console.log("this.metaValue.account2.id",e.metaValue.accountName),e.order.OrderMeta[0].position2=e.metaValue.accountName.position,t.next=6,e.GET_DEPARTMENTSBYID(e.metaValue.accountName.departmentId);case 6:r=t.sent,console.log("department2",r),e.order.OrderMeta[0].department2=r.NAME;case 9:case"end":return t.stop()}}),t)})))()},filterFn:function(e,t){var r=this;t(""!==e?function(){var t=e.toLowerCase();r.options=r.account.filter((function(e){return e.label.toLowerCase().indexOf(t)>-1}))}:function(){r.options=r.account})}},Object(d["b"])("base",["GET_DEPARTMENTSBYID","GET_DEPARTMENTSALL","GET_ACCOUNTS"])),Object(d["b"])("orders",["getOneOrder","getAllRequests"])),Object(d["b"])("orderMetas",["getOneOrderMeta","addorderMeta","deleteOrderMeta","updateOrderMeta"])),{},{chonCongDoan:function(){console.log("myDepartment",this.myDepartment.value)},loadDepartment:function(){var e=this;return l()(o.a.mark((function t(){var r;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("base/GET_DEPARTMENTS",{factoryId:e.myFactoryInfor.id});case 2:return r=t.sent,console.log("data",r.data),t.next=6,r.data.forEach((function(t){e.departments.push({id:t.id,value:t.name})}));case 6:console.log("this.departments",e.departments);case 7:case"end":return t.stop()}}),t)})))()}}),computed:ht(ht({},Object(d["c"])("orders",["order"])),Object(d["c"])("base",["myFactoryInfor","userInfo","dsCongDoans"]))},bt=ft,vt=r("ca78"),gt=Object(b["a"])(bt,ct,ut,!1,null,null,null),qt=gt.exports;C()(gt,"components",{QCardSection:q["a"],QRadio:Pe["a"],QInput:L["a"],QIcon:S["a"],QPopupProxy:le["a"],QDate:ce["a"],QBtn:v["a"],QTime:vt["a"]}),C()(gt,"directives",{ClosePopup:ue["a"]});var Ot=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("q-card-section",[r("div",{staticClass:"flex"},[r("q-input",{staticClass:"q-mt-sm q-pr-sm",staticStyle:{width:"50% !important"},attrs:{outlined:"",label:"Tên tôi là : ",readonly:e.disable},model:{value:e.order.OrderMeta[0].fullName,callback:function(t){e.$set(e.order.OrderMeta[0],"fullName",t)},expression:"order.OrderMeta[0].fullName"}}),r("q-input",{staticClass:"q-mt-sm",staticStyle:{width:"50% !important"},attrs:{outlined:"",label:"Mã nhân viên : ",readonly:e.disable},model:{value:e.order.OrderMeta[0].maNV,callback:function(t){e.$set(e.order.OrderMeta[0],"maNV",t)},expression:"order.OrderMeta[0].maNV"}})],1),r("div",{staticClass:"flex"},[r("q-input",{staticClass:"q-mt-sm q-pr-sm",staticStyle:{width:"50% !important"},attrs:{outlined:"",label:"Chức vụ : ",readonly:e.disable},model:{value:e.order.OrderMeta[0].position,callback:function(t){e.$set(e.order.OrderMeta[0],"position",t)},expression:"order.OrderMeta[0].position"}}),r("q-input",{staticClass:"q-mt-sm",staticStyle:{width:"50% !important"},attrs:{outlined:"",label:"Phòng ban/bộ phận : ",readonly:e.disable},model:{value:e.order.OrderMeta[0].department,callback:function(t){e.$set(e.order.OrderMeta[0],"department",t)},expression:"order.OrderMeta[0].department"}})],1),r("q-input",{staticClass:"q-mt-sm",attrs:{outlined:"",label:"Lý do: ",readonly:e.disable},model:{value:e.order.OrderMeta[0].description,callback:function(t){e.$set(e.order.OrderMeta[0],"description",t)},expression:"order.OrderMeta[0].description"}}),r("div",{staticClass:"col"},[r("div",{staticClass:"text-h8"},[e._v("  Thời gian ra :")]),r("div",{},[r("q-input",{staticClass:"q-mb-sm",attrs:{readonly:!e.disable,filled:""},scopedSlots:e._u([{key:"prepend",fn:function(){return[r("q-icon",{staticClass:"cursor-pointer",attrs:{name:"event"}},[r("q-popup-proxy",{ref:"qDateProxy",attrs:{"transition-show":"scale","transition-hide":"scale"}},[r("q-date",{attrs:{readonly:!e.disable,mask:"DD-MM-YYYY HH:mm"},model:{value:e.order.OrderMeta[0].dateStart,callback:function(t){e.$set(e.order.OrderMeta[0],"dateStart",t)},expression:"order.OrderMeta[0].dateStart"}},[r("div",{staticClass:"row items-center justify-end"},[r("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Close",color:"primary",flat:""}})],1)])],1)],1)]},proxy:!0},{key:"append",fn:function(){return[r("q-icon",{staticClass:"cursor-pointer",attrs:{name:"access_time"}},[r("q-popup-proxy",{attrs:{"transition-show":"scale","transition-hide":"scale"}},[r("q-time",{attrs:{readonly:!e.disable,mask:"DD-MM-YYYY HH:mm",format24h:""},model:{value:e.order.OrderMeta[0].dateStart,callback:function(t){e.$set(e.order.OrderMeta[0],"dateStart",t)},expression:"order.OrderMeta[0].dateStart"}},[r("div",{staticClass:"row items-center justify-end"},[r("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Close",color:"primary",flat:""}})],1)])],1)],1)]},proxy:!0}]),model:{value:e.order.OrderMeta[0].dateStart,callback:function(t){e.$set(e.order.OrderMeta[0],"dateStart",t)},expression:"order.OrderMeta[0].dateStart"}})],1)]),r("div",{staticClass:"col"},[r("div",{staticClass:"text-h8"},[e._v("Thời gian vào :")]),r("div",{},[r("q-input",{staticClass:"q-mb-sm",attrs:{readonly:!e.disable,filled:""},scopedSlots:e._u([{key:"prepend",fn:function(){return[r("q-icon",{staticClass:"cursor-pointer",attrs:{name:"event"}},[r("q-popup-proxy",{ref:"qDateProxy",attrs:{"transition-show":"scale","transition-hide":"scale"}},[r("q-date",{attrs:{readonly:e.disable,mask:"DD-MM-YYYY HH:mm"},model:{value:e.order.OrderMeta[0].dateEnd,callback:function(t){e.$set(e.order.OrderMeta[0],"dateEnd",t)},expression:"order.OrderMeta[0].dateEnd"}},[r("div",{staticClass:"row items-center justify-end"},[r("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Close",color:"primary",flat:""}})],1)])],1)],1)]},proxy:!0},{key:"append",fn:function(){return[r("q-icon",{staticClass:"cursor-pointer",attrs:{name:"access_time"}},[r("q-popup-proxy",{attrs:{"transition-show":"scale","transition-hide":"scale"}},[r("q-time",{attrs:{readonly:e.disable,mask:"DD-MM-YYYY HH:mm",format24h:""},model:{value:e.order.OrderMeta[0].dateEnd,callback:function(t){e.$set(e.order.OrderMeta[0],"dateEnd",t)},expression:"order.OrderMeta[0].dateEnd"}},[r("div",{staticClass:"row items-center justify-end"},[r("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Close",color:"primary",flat:""}})],1)])],1)],1)]},proxy:!0}]),model:{value:e.order.OrderMeta[0].dateEnd,callback:function(t){e.$set(e.order.OrderMeta[0],"dateEnd",t)},expression:"order.OrderMeta[0].dateEnd"}})],1)]),r("footerCard",{attrs:{order:e.order,nextId2:e.nextId2,nextId3:e.nextId3,nextId:e.nextId}})],1)},yt=[];function xt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function Ct(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?xt(Object(r),!0).forEach((function(t){u()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Mt={components:{DxDataGrid:fe["DxDataGrid"],DxColumn:fe["DxColumn"],DxEditing:fe["DxEditing"],DxPaging:fe["DxPaging"],DxButton:he.a,DxLookup:fe["DxLookup"],DxDateBox:pt.a,footerCard:pe},props:["metaValue","disable","order"],data:function(){return{myDepartment:null,stepDepartment:null,departments:[],nextId2:null,nextId3:null,events:[],options:null,nameDepartmentName:null,account:[],active:!1}},created:function(){var e=this;return l()(o.a.mark((function t(){var r,a;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:for(console.log("options",e.departments),e.order.Requests.sort(e.compareValues("star","asc")),r=null,a=0;a<e.order.Requests.length;a++)e.order.Requests[a].id==e.$route.query.id&&(console.log(e.order.Requests[a]),r=e.order.Requests[a].star,console.log("idDis",r));e.nextId=e.order.Requests.find((function(e){return e.star>r})),console.log("data",e.nextId),e.nextId2=e.order.Requests.filter((function(t){return t.star>e.request.star&&"Phòng vật tư"!=t.position})),e.nextId3=e.order.Requests.filter((function(t){return t.star>e.request.star&&("Phòng vật tư"==t.position||"Phòng bảo vệ"==t.position)})),console.log("this.nextId",e.nextId),console.log("this.nextId2",e.nextId2),console.log("this.nextId3",e.nextId3);case 11:case"end":return t.stop()}}),t)})))()},methods:Ct(Ct(Ct(Ct({compareValues:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";return function(r,a){if(!r.hasOwnProperty(e)||!a.hasOwnProperty(e))return 0;var n="string"===typeof r[e]?r[e].toUpperCase():r[e],s="string"===typeof a[e]?a[e].toUpperCase():a[e],o=0;return n>s?o=1:n<s&&(o=-1),"desc"==t?-1*o:o}},changed:function(){var e=this;return l()(o.a.mark((function t(){var r;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log("changed"),console.log("this.order.OrderMeta[0].position2 ",e.order.OrderMeta[0].position2),console.log("this.metaValue.account2.id",e.metaValue.accountName),e.order.OrderMeta[0].position2=e.metaValue.accountName.position,t.next=6,e.GET_DEPARTMENTSBYID(e.metaValue.accountName.departmentId);case 6:r=t.sent,console.log("department2",r),e.order.OrderMeta[0].department2=r.NAME;case 9:case"end":return t.stop()}}),t)})))()},filterFn:function(e,t){var r=this;t(""!==e?function(){var t=e.toLowerCase();r.options=r.account.filter((function(e){return e.label.toLowerCase().indexOf(t)>-1}))}:function(){r.options=r.account})}},Object(d["b"])("base",["GET_DEPARTMENTSBYID","GET_DEPARTMENTSALL","GET_ACCOUNTS"])),Object(d["b"])("orders",["getOneOrder","getAllRequests"])),Object(d["b"])("orderMetas",["getOneOrderMeta","addorderMeta","deleteOrderMeta","updateOrderMeta"])),{},{chonCongDoan:function(){console.log("myDepartment",this.myDepartment.value)}}),computed:Ct(Ct({},Object(d["c"])("orders",["order"])),Object(d["c"])("base",["myFactoryInfor","userInfo","dsCongDoans"]))},Dt=Mt,Tt=Object(b["a"])(Dt,Ot,yt,!1,null,null,null),wt=Tt.exports;C()(Tt,"components",{QCardSection:q["a"],QInput:L["a"],QIcon:S["a"],QPopupProxy:le["a"],QDate:ce["a"],QBtn:v["a"],QTime:vt["a"]}),C()(Tt,"directives",{ClosePopup:ue["a"]});var kt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("q-card-section",[r("div",{staticClass:"flex"},[r("q-input",{staticClass:"q-mt-sm q-pr-sm",staticStyle:{width:"50% !important"},attrs:{outlined:"",label:"Tên tôi là : ",readonly:e.disable},model:{value:e.order.OrderMeta[0].fullName,callback:function(t){e.$set(e.order.OrderMeta[0],"fullName",t)},expression:"order.OrderMeta[0].fullName"}}),r("q-input",{staticClass:"q-mt-sm",staticStyle:{width:"50% !important"},attrs:{outlined:"",label:"Mã nhân viên : ",readonly:e.disable},model:{value:e.order.OrderMeta[0].maNV,callback:function(t){e.$set(e.order.OrderMeta[0],"maNV",t)},expression:"order.OrderMeta[0].maNV"}})],1),r("div",{staticClass:"flex"},[r("q-input",{staticClass:"q-mt-sm q-pr-sm",staticStyle:{width:"50% !important"},attrs:{outlined:"",label:"Chức vụ : ",readonly:e.disable},model:{value:e.order.OrderMeta[0].position,callback:function(t){e.$set(e.order.OrderMeta[0],"position",t)},expression:"order.OrderMeta[0].position"}}),r("q-input",{staticClass:"q-mt-sm",staticStyle:{width:"50% !important"},attrs:{outlined:"",label:"Phòng ban/bộ phận : ",readonly:e.disable},model:{value:e.order.OrderMeta[0].department,callback:function(t){e.$set(e.order.OrderMeta[0],"department",t)},expression:"order.OrderMeta[0].department"}})],1),r("q-input",{staticClass:"q-mt-sm",attrs:{outlined:"",label:"Lý do đi công tác : ",readonly:e.disable},model:{value:e.order.OrderMeta[0].description,callback:function(t){e.$set(e.order.OrderMeta[0],"description",t)},expression:"order.OrderMeta[0].description"}}),r("div",{staticClass:"col"},[r("div",{staticClass:"text-h8"},[e._v("Thời gian từ :")]),r("div",{},[r("q-input",{staticClass:"q-mb-sm",attrs:{readonly:e.disable,filled:""},scopedSlots:e._u([{key:"prepend",fn:function(){return[r("q-icon",{staticClass:"cursor-pointer",attrs:{name:"event"}},[r("q-popup-proxy",{ref:"qDateProxy",attrs:{"transition-show":"scale","transition-hide":"scale"}},[r("q-date",{attrs:{readonly:e.disable,mask:"DD-MM-YYYY HH:mm"},model:{value:e.order.OrderMeta[0].dateStart,callback:function(t){e.$set(e.order.OrderMeta[0],"dateStart",t)},expression:"order.OrderMeta[0].dateStart"}},[r("div",{staticClass:"row items-center justify-end"},[r("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Close",color:"primary",flat:""}})],1)])],1)],1)]},proxy:!0},{key:"append",fn:function(){return[r("q-icon",{staticClass:"cursor-pointer",attrs:{name:"access_time"}},[r("q-popup-proxy",{attrs:{"transition-show":"scale","transition-hide":"scale"}},[r("q-time",{attrs:{readonly:e.disable,mask:"DD-MM-YYYY HH:mm",format24h:""},model:{value:e.order.OrderMeta[0].dateStart,callback:function(t){e.$set(e.order.OrderMeta[0],"dateStart",t)},expression:"order.OrderMeta[0].dateStart"}},[r("div",{staticClass:"row items-center justify-end"},[r("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Close",color:"primary",flat:""}})],1)])],1)],1)]},proxy:!0}]),model:{value:e.order.OrderMeta[0].dateStart,callback:function(t){e.$set(e.order.OrderMeta[0],"dateStart",t)},expression:"order.OrderMeta[0].dateStart"}})],1)]),r("div",{staticClass:"col "},[r("div",{staticClass:"text-h8"},[e._v("Thời gian đến :")]),r("div",{},[r("q-input",{staticClass:"q-mb-sm",attrs:{filled:""},scopedSlots:e._u([{key:"prepend",fn:function(){return[r("q-icon",{staticClass:"cursor-pointer",attrs:{name:"event"}},[r("q-popup-proxy",{ref:"qDateProxy",attrs:{"transition-show":"scale","transition-hide":"scale"}},[r("q-date",{attrs:{readonly:e.disable,mask:"DD-MM-YYYY HH:mm"},model:{value:e.order.OrderMeta[0].dateEnd,callback:function(t){e.$set(e.order.OrderMeta[0],"dateEnd",t)},expression:"order.OrderMeta[0].dateEnd"}},[r("div",{staticClass:"row items-center justify-end"},[r("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Close",color:"primary",flat:""}})],1)])],1)],1)]},proxy:!0},{key:"append",fn:function(){return[r("q-icon",{staticClass:"cursor-pointer",attrs:{name:"access_time"}},[r("q-popup-proxy",{attrs:{"transition-show":"scale","transition-hide":"scale"}},[r("q-time",{attrs:{readonly:e.disable,mask:"DD-MM-YYYY HH:mm",format24h:""},model:{value:e.order.OrderMeta[0].dateEnd,callback:function(t){e.$set(e.order.OrderMeta[0],"dateEnd",t)},expression:"order.OrderMeta[0].dateEnd"}},[r("div",{staticClass:"row items-center justify-end"},[r("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Close",color:"primary",flat:""}})],1)])],1)],1)]},proxy:!0}]),model:{value:e.order.OrderMeta[0].dateEnd,callback:function(t){e.$set(e.order.OrderMeta[0],"dateEnd",t)},expression:"order.OrderMeta[0].dateEnd"}})],1)]),r("q-input",{staticClass:"q-mt-sm",attrs:{outlined:"",label:"Nơi đi công tác : ",readonly:e.disable},model:{value:e.order.OrderMeta[0].locationWork,callback:function(t){e.$set(e.order.OrderMeta[0],"locationWork",t)},expression:"order.OrderMeta[0].locationWork"}}),r("footerCard",{attrs:{order:e.order,nextId:e.nextId}})],1)},_t=[];function It(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function jt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?It(Object(r),!0).forEach((function(t){u()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):It(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Pt={components:{DxDataGrid:fe["DxDataGrid"],DxColumn:fe["DxColumn"],DxEditing:fe["DxEditing"],DxPaging:fe["DxPaging"],DxButton:he.a,DxLookup:fe["DxLookup"],DxDateBox:pt.a,footerCard:pe},props:["metaValue","disable","oneOrder"],created:function(){var e=this;return l()(o.a.mark((function t(){var r,a;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:for(e.status=e.$route.query.status,console.log("status",e.status),console.log("dsCongDoans",e.dsCongDoans),console.log("userInfo",e.userInfo),e.status=e.$route.query.status,console.log("status",e.status),console.log("dsCongDoans",e.dsCongDoans),console.log("userInfo",e.userInfo),e.order.Requests.sort(e.compareValues("star","asc")),r=null,a=0;a<e.order.Requests.length;a++)e.order.Requests[a].id==e.$route.query.id&&(console.log(e.order.Requests[a]),r=e.order.Requests[a].star,console.log("idDis",r));e.nextId=e.order.Requests.find((function(e){return e.star>r})),console.log("data",e.nextId);case 13:case"end":return t.stop()}}),t)})))()},data:function(){return{events:[],nameDepartment:{},status:"",phoneNumber:"",nameDepartmentName:null,nextId:null}},computed:jt(jt({},Object(d["c"])("orders",["order"])),Object(d["c"])("base",["userInfo","dsCongDoans"])),methods:jt(jt(jt({compareValues:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";return function(r,a){if(!r.hasOwnProperty(e)||!a.hasOwnProperty(e))return 0;var n="string"===typeof r[e]?r[e].toUpperCase():r[e],s="string"===typeof a[e]?a[e].toUpperCase():a[e],o=0;return n>s?o=1:n<s&&(o=-1),"desc"==t?-1*o:o}}},Object(d["b"])("base",["GET_DEPARTMENTSBYID"])),Object(d["b"])("orders",["getOneOrder","getAllRequests"])),Object(d["b"])("orderMetas",["getOneOrderMeta","addorderMeta","deleteOrderMeta","updateOrderMeta"]))},St=Pt,Vt=Object(b["a"])(St,kt,_t,!1,null,null,null),Rt=Vt.exports;C()(Vt,"components",{QCardSection:q["a"],QInput:L["a"],QIcon:S["a"],QPopupProxy:le["a"],QDate:ce["a"],QBtn:v["a"],QTime:vt["a"]}),C()(Vt,"directives",{ClosePopup:ue["a"]});var Nt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("q-card-section",{staticStyle:{"font-size":"16px"}},[r("div",{staticClass:"q-gutter-sm q-mt-sm"}),e._l(e.order.OrderMeta.filter((function(e){return e.maNV})),(function(t,a){return r("div",{key:a},[e._v(e._s(t.selection)+" :\n        "),"Làm thêm giờ"==t.selection?r("div",[r("q-card",{staticClass:"q-mb-sm q-mt-sm"},[r("q-card-section",[r("div",[e._v("Mã nhân viên : "),r("b",[e._v(e._s(t.maNV))])]),r("div",{staticClass:"text-subtitle1"},[e._v("Họ và tên : "),r("b",[e._v(e._s(t.fullName))])]),r("div",[e._v("Chức danh : "+e._s(e.proAccount[0].position))]),r("div",[e._v("Phòng ban/bộ phận: "+e._s(e.nameDepartmentName.NAME))]),r("div",[e._v("Ngày tháng : "+e._s(t.date))]),r("div",[e._v("Công việc : "+e._s(t.work))]),r("div",[e._v("Thời gian từ : "+e._s(t.hoursIn))]),r("div",[e._v("Thời gian đến : "+e._s(t.hoursOut))]),r("div",[e._v("Tổng số giờ : "+e._s(t.total))]),r("div",[e._v("Tình trạng phê duyệt :  "),r("b",[e._v(e._s(t.statusRequests))])]),r("q-radio",{staticClass:"q-mr-sm",attrs:{dense:"",val:"Xem xét",label:"Xem xét"},on:{input:function(r){return e.activeReq(t)}},model:{value:t.statusRequests,callback:function(r){e.$set(t,"statusRequests",r)},expression:"task.statusRequests"}}),r("q-radio",{staticClass:"q-mr-sm",attrs:{dense:"",val:"Đồng ý",label:"Đồng ý"},on:{input:function(r){return e.activeReq(t)}},model:{value:t.statusRequests,callback:function(r){e.$set(t,"statusRequests",r)},expression:"task.statusRequests"}}),r("q-radio",{staticClass:"q-mr-sm",attrs:{dense:"",val:"Giải trình bổ sung",label:"Giải trình bổ sung"},on:{input:function(r){return e.activeReq(t)}},model:{value:t.statusRequests,callback:function(r){e.$set(t,"statusRequests",r)},expression:"task.statusRequests"}}),r("q-radio",{staticClass:"q-mr-sm",attrs:{dense:"",val:"Hủy",label:"Hủy"},on:{input:function(r){return e.activeReq(t)}},model:{value:t.statusRequests,callback:function(r){e.$set(t,"statusRequests",r)},expression:"task.statusRequests"}})],1)],1)],1):e._e(),"Lỗi chấm công"==t.selection?r("div",[r("q-card",{staticClass:"q-mb-sm q-mt-sm"},[r("q-card-section",[r("div",[e._v("Mã nhân viên : "),r("b",[e._v(e._s(t.maNV))])]),r("div",{staticClass:"text-subtitle1"},[e._v("Họ và tên : "),r("b",[e._v(e._s(t.fullName))])]),r("div",[e._v("Chức danh : "+e._s(e.proAccount[0].position))]),r("div",[e._v("Phòng ban/bộ phận: "+e._s(e.nameDepartmentName.NAME))]),r("div",[e._v("Ngày tháng : "+e._s(t.date))]),r("div",[e._v("Công việc : "+e._s(t.work))]),r("div",[e._v("Thời gian từ : "+e._s(t.hoursIn))]),r("div",[e._v("Thời gian đến : "+e._s(t.hoursOut))]),r("div",[e._v("Tổng số giờ : "+e._s(t.total))])])],1)],1):e._e()])})),r("footerCard",{attrs:{order:e.order,nextId2:e.nextId2,nextId3:e.nextId3,nextId:e.nextId}})],2)},Et=[];function At(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function $t(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?At(Object(r),!0).forEach((function(t){u()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):At(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Qt={components:{DxDataGrid:fe["DxDataGrid"],DxColumn:fe["DxColumn"],DxEditing:fe["DxEditing"],DxPaging:fe["DxPaging"],DxButton:he.a,DxLookup:fe["DxLookup"],DxFilterRow:fe["DxFilterRow"],footerCard:pe},props:["metaValue","disable","order"],created:function(){var e=this;return l()(o.a.mark((function t(){var r,a,n;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.status=e.$route.query.status,t.next=3,e.getAllAccounts();case 3:return r=t.sent,e.proAccount=r.filter((function(t){return t.id==e.order.accountId})),t.next=7,e.GET_DEPARTMENTSBYID(e.order.departmentId);case 7:for(e.nameDepartmentName=t.sent,console.log("acocountpro",e.proAccount),console.log("nameDepartmentName",e.nameDepartmentName),e.order.Requests.sort(e.compareValues("star","asc")),a=null,n=0;n<e.order.Requests.length;n++)e.order.Requests[n].id==e.$route.query.id&&(console.log(e.order.Requests[n]),a=e.order.Requests[n].star,console.log("idDis",a));e.nextId=e.order.Requests.find((function(e){return e.star>a})),console.log("data",e.nextId),e.nextId2=e.order.Requests.filter((function(t){return t.star>e.request.star&&"Phòng vật tư"!=t.position})),e.nextId3=e.order.Requests.filter((function(t){return t.star>e.request.star&&("Phòng vật tư"==t.position||"Phòng bảo vệ"==t.position)})),console.log("this.nextId",e.nextId),console.log("this.nextId2",e.nextId2),console.log("this.nextId3",e.nextId3);case 20:case"end":return t.stop()}}),t)})))()},data:function(){return{myDepartment:null,stepDepartment:null,departments:[],events:[],options:null,nameDepartmentName:null,account:[],active:!1,proAccount:null,statusRequests:null,nextId2:null,nextId3:null}},computed:$t({},Object(d["c"])("orders",["order"])),watch:{},methods:$t($t($t($t({activeReq:function(e){var t=this;return l()(o.a.mark((function r(){var a,n;return o.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return console.log("task Ac",Ue()(e.statusRequests)),a={id:e.id,statusRequests:e.statusRequests},r.next=4,t.activeRequestsMeta(a);case 4:n=r.sent,console.log(n);case 6:case"end":return r.stop()}}),r)})))()},compareValues:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";return function(r,a){if(!r.hasOwnProperty(e)||!a.hasOwnProperty(e))return 0;var n="string"===typeof r[e]?r[e].toUpperCase():r[e],s="string"===typeof a[e]?a[e].toUpperCase():a[e],o=0;return n>s?o=1:n<s&&(o=-1),"desc"==t?-1*o:o}}},Object(d["b"])("requests",["activeRequestsMeta"])),Object(d["b"])("base",["GET_DEPARTMENTSBYID"])),Object(d["b"])("orders",["getOneOrder","getAllRequests","getAllAccounts"])),Object(d["b"])("orderMetas",["getOneOrderMeta","addorderMeta","deleteOrderMeta","updateOrderMeta"]))},Yt=Qt,Bt=Object(b["a"])(Yt,Nt,Et,!1,null,null,null),Gt=Bt.exports;C()(Bt,"components",{QCardSection:q["a"],QCard:g["a"],QRadio:Pe["a"]});var Ht=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("q-card-section",[r("div",{staticClass:"q-gutter-sm text-primary text-h6"},[e._v("\n       Chọn loại mẫu đề nghị :\n      "),r("br")]),r("div",{staticClass:"q-gutter-sm q-mt-sm"},[r("span",{staticClass:"q-ml-sm",staticStyle:{"font-size":"20px"}},[e._v(e._s(e.metaValue.selection))])]),r("div",[r("q-input",{staticClass:"q-mt-sm",attrs:{outlined:"",label:"Bộ phận /phòng ban : ",readonly:e.disable},model:{value:e.order.OrderMeta[0].department,callback:function(t){e.$set(e.order.OrderMeta[0],"department",t)},expression:"order.OrderMeta[0].department"}}),r("q-input",{staticClass:"q-mt-sm",attrs:{outlined:"",label:"Đề xuất xin sửa chữa thiết bị : ",readonly:e.disable},model:{value:e.order.OrderMeta[0].tenVT,callback:function(t){e.$set(e.order.OrderMeta[0],"tenVT",t)},expression:"order.OrderMeta[0].tenVT"}}),r("q-input",{staticClass:"q-mt-sm",attrs:{outlined:"",label:"Mã số : ",readonly:e.disable},model:{value:e.order.OrderMeta[0].maVT,callback:function(t){e.$set(e.order.OrderMeta[0],"maVT",t)},expression:"order.OrderMeta[0].maVT"}}),r("q-input",{staticClass:"q-mt-sm",attrs:{outlined:"",label:"Tình trạng hư hỏng: ",readonly:e.disable},model:{value:e.order.OrderMeta[0].description,callback:function(t){e.$set(e.order.OrderMeta[0],"description",t)},expression:"order.OrderMeta[0].description"}})],1),r("footerCard",{attrs:{order:e.order,nextId:e.nextId}})],1)},Lt=[];function Ft(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function Xt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ft(Object(r),!0).forEach((function(t){u()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ft(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Ut={components:{DxDataGrid:fe["DxDataGrid"],DxColumn:fe["DxColumn"],DxEditing:fe["DxEditing"],DxPaging:fe["DxPaging"],DxButton:he.a,DxLookup:fe["DxLookup"],footerCard:pe},props:["metaValue","disable","order"],data:function(){return{events:[],nameDepartment:{},status:"",phoneNumber:"",nameDepartmentName:null,nextId:null}},created:function(){var e=this;return l()(o.a.mark((function t(){var r,a;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:for(e.status=e.$route.query.status,console.log("status",e.status),console.log("dsCongDoans",e.dsCongDoans),console.log("userInfo",e.userInfo),e.order.Requests.sort(e.compareValues("star","asc")),r=null,a=0;a<e.order.Requests.length;a++)e.order.Requests[a].id==e.$route.query.id&&(console.log(e.order.Requests[a]),r=e.order.Requests[a].star,console.log("idDis",r));e.nextId=e.order.Requests.find((function(e){return e.star>r})),console.log("data",e.nextId);case 9:case"end":return t.stop()}}),t)})))()},methods:Xt(Xt(Xt(Xt(Xt({compareValues:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";return function(r,a){if(!r.hasOwnProperty(e)||!a.hasOwnProperty(e))return 0;var n="string"===typeof r[e]?r[e].toUpperCase():r[e],s="string"===typeof a[e]?a[e].toUpperCase():a[e],o=0;return n>s?o=1:n<s&&(o=-1),"desc"==t?-1*o:o}}},Object(d["b"])("requests",["deleteRequest","resetOrder"])),Object(d["b"])("base",["GET_DEPARTMENTSBYID","GET_DEPARTMENTSALL","GET_ACCOUNTS"])),Object(d["b"])("orders",["getOneOrder","getAllRequests"])),Object(d["b"])("orderMetas",["getOneOrderMeta","addorderMeta","deleteOrderMeta","updateOrderMeta"])),{},{chonCongDoan:function(){console.log("myDepartment",this.myDepartment.value)}}),computed:Xt(Xt({},Object(d["c"])("orders",["order"])),Object(d["c"])("base",["myFactoryInfor","userInfo","dsCongDoans"]))},Kt=Ut,Jt=Object(b["a"])(Kt,Ht,Lt,!1,null,null,null),Wt=Jt.exports;C()(Jt,"components",{QCardSection:q["a"],QInput:L["a"]});var zt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("q-card-section",[r("div",[r("q-input",{staticClass:"q-mt-sm",attrs:{outlined:"",label:"Bộ phận/phòng ban : ",readonly:e.disable},model:{value:e.order.OrderMeta[0].department,callback:function(t){e.$set(e.order.OrderMeta[0],"department",t)},expression:"order.OrderMeta[0].department"}}),r("div",{staticClass:"text-subtitle1"},[e._v("Danh sách đề xuất :")]),e._l(e.order.OrderMeta.filter((function(e){return e.STT})).sort((function(e,t){return e.STT-t.STT})),(function(t,a){return r("div",{key:a},[r("q-card",{staticClass:"q-mb-sm q-mt-sm"},[r("q-card-section",[r("div",[e._v("STT : "),r("b",[e._v(e._s(t.STT))])]),r("div",[e._v("Tên bảo hộ lao động : "),r("b",[e._v(e._s(t.Tenbaoho))])]),r("div",{staticClass:"text-subtitle1"},[e._v("Đơn vị tính : "),r("b",[e._v(e._s(t.donViTinh))])]),r("div",[e._v("Số lượng đề xuất : "+e._s(t.soLuongDeXuat))]),r("div",[e._v("Số lượng cấp : "+e._s(t.soLuongCap))]),r("div",[e._v("Ghi chú : "+e._s(t.description))])])],1)],1)}))],2),r("div",{staticClass:"q-mt-sm",attrs:{outlined:""}},[e._v("Vậy kính mong Ban TGĐ xem xét, phê duyệt.")]),r("footerCard",{attrs:{order:e.order,nextId:e.nextId}})],1)},Zt=[];r("6b54");function er(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function tr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?er(Object(r),!0).forEach((function(t){u()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):er(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var rr={components:{DxDataGrid:fe["DxDataGrid"],DxColumn:fe["DxColumn"],DxEditing:fe["DxEditing"],DxPaging:fe["DxPaging"],DxButton:he.a,DxLookup:fe["DxLookup"],footerCard:pe},props:["metaValue","disable","order"],created:function(){var e=this;return l()(o.a.mark((function t(){var r,a;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.GET_DEPARTMENTSBYID(e.userInfo.department);case 2:for(e.nameDepartmentName=t.sent,e.status=e.$route.query.status,e.$route.query.id?e.getOneOrder(e.$route.query.id).then((function(t){t.data.data.Requests.length&&(e.disable=!0),e.metaValue=Object.assign(e.metaValue,JSON.parse(t.data.data.OrderMeta[0].metaValue)[0])})):e.$router.push({path:"/tao-de-xuat"}),e.status=e.$route.query.status,e.order.Requests.sort(e.compareValues("star","asc")),r=null,a=0;a<e.order.Requests.length;a++)e.order.Requests[a].id==e.$route.query.id&&(console.log(e.order.Requests[a]),r=e.order.Requests[a].star,console.log("idDis",r));e.nextId=e.order.Requests.find((function(e){return e.star>r})),console.log("data",e.nextId);case 11:case"end":return t.stop()}}),t)})))()},data:function(){var e;return e={events:[],nameDepartment:{},status:"",phoneNumber:""},u()(e,"nameDepartment",null),u()(e,"nextId",null),e},computed:tr(tr({},Object(d["c"])("orders",["order"])),Object(d["c"])("base",["userInfo","dsCongDoans"])),methods:tr(tr(tr(tr({compareValues:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";return function(r,a){if(!r.hasOwnProperty(e)||!a.hasOwnProperty(e))return 0;var n="string"===typeof r[e]?r[e].toUpperCase():r[e],s="string"===typeof a[e]?a[e].toUpperCase():a[e],o=0;return n>s?o=1:n<s&&(o=-1),"desc"==t?-1*o:o}}},Object(d["b"])("base",["GET_DEPARTMENTSBYID"])),Object(d["b"])("orders",["getOneOrder","getAllRequests"])),Object(d["b"])("orderMetas",["getOneOrderMeta","addorderMeta","deleteOrderMeta","updateOrderMeta"])),{},{RowInserted:function(e){console.log("STT",e.data.STT),console.log("STT",e.data.id);var t=e.data.STT,r=e.data.quyCach,a=e.data.soLuongDeXuat,n=e.data.soLuongCap,s=e.data.donViTinh,o=this.userInfo.lastName,i=e.data.Tenbaoho,l=this.userInfo.PHONE,c=this.metaValue.selection,u=e.data.description,d=this.nameDepartmentName.NAME.toString();this.addorderMeta(tr(tr({},this.order.OrderMeta[0]),{},{metaValue:JSON.stringify([this.metaValue]),quyCach:r,soLuongDeXuat:a,selection:c,STT:t,soLuongCap:n,fullName:o,description:u,donViTinh:s,phoneNumber:l,department:d,Tenbaoho:i}))},RowDelted:function(e){console.log("STT",e.data.STT),console.log("STT",e.data.id),this.deleteOrderMeta(e.data.id)},RowUpdated:function(e){console.log("STT",e.data.STT),console.log("STT",e.data.id);var t=e.data.STT,r=e.data.quyCach,a=e.data.soLuongDeXuat,n=e.data.soLuongCap,s=e.data.donViTinh,o=this.userInfo.lastName,i=e.data.Tenbaoho,l=this.userInfo.PHONE,c=e.data.description,u=this.metaValue.selection,d=this.nameDepartmentName.NAME.toString();this.updateOrderMeta(tr(tr({},this.order.OrderMeta[0]),{},{metaValue:JSON.stringify([this.metaValue]),quyCach:r,soLuongDeXuat:a,selection:u,STT:t,soLuongCap:n,fullName:o,description:c,donViTinh:s,phoneNumber:l,department:d,Tenbaoho:i}))}})},ar=rr,nr=Object(b["a"])(ar,zt,Zt,!1,null,null,null),sr=nr.exports;C()(nr,"components",{QCardSection:q["a"],QRadio:Pe["a"],QInput:L["a"],QCard:g["a"]});var or=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("q-card-section",[r("q-input",{staticClass:"q-ma-sm col",attrs:{outlined:"",label:"Họ và tên : ",readonly:!0},model:{value:e.order.OrderMeta[0].fullName,callback:function(t){e.$set(e.order.OrderMeta[0],"fullName",t)},expression:"order.OrderMeta[0].fullName"}}),r("q-input",{staticClass:"q-ma-sm col",attrs:{outlined:"",label:"Chức vụ : ",readonly:!0},model:{value:e.order.OrderMeta[0].position,callback:function(t){e.$set(e.order.OrderMeta[0],"position",t)},expression:"order.OrderMeta[0].position"}}),r("q-input",{staticClass:"q-ma-sm col",attrs:{outlined:"",label:"Phòng ban : ",readonly:!0},model:{value:e.order.OrderMeta[0].department,callback:function(t){e.$set(e.order.OrderMeta[0],"department",t)},expression:"order.OrderMeta[0].department"}}),r("div",[e._v("Danh sách đề xuất :")]),e._l(e.order.OrderMeta.filter((function(e){return e.STT})).sort((function(e,t){return e.STT-t.STT})),(function(t,a){return r("div",{key:a},[r("q-card",{staticClass:"q-mb-sm q-mt-sm"},[r("q-card-section",[r("div",[e._v("STT : "),r("b",[e._v(e._s(t.STT))])]),r("div",[e._v("Tên thiết bị VPP : "),r("b",[e._v(e._s(t.tenThietBiVP))])]),r("div",{staticClass:"text-subtitle1"},[e._v("Đơn vị tính : "),r("b",[e._v(e._s(t.donViTinh))])]),r("div",[e._v("Số lượng đề xuất : "+e._s(t.soLuongDeXuat))]),r("div",[e._v("Ghi chú : "+e._s(t.description))])])],1)],1)})),r("footer-card",{attrs:{order:e.order,nextId:e.nextId}})],2)},ir=[];function lr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function cr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?lr(Object(r),!0).forEach((function(t){u()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):lr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var ur={components:{footerCard:pe,DxDataGrid:fe["DxDataGrid"],DxColumn:fe["DxColumn"]},computed:cr(cr(cr({},Object(d["c"])("orders",["order"])),Object(d["c"])("base",["userInfo","dsCongDoans"])),{},{metaValuesFilter:function(){return console.log(this.order),this.order&&this.order.OrderMeta?this.order.OrderMeta.filter((function(e){return e.STT})).sort((function(e,t){return e.STT-t.STT})):[]}}),data:function(){return{events:[],nameDepartment:{},status:"",phoneNumber:"",nameDepartmentName:null,nextId:null}},created:function(){this.order.Requests.sort(this.compareValues("star","asc"));for(var e=null,t=0;t<this.order.Requests.length;t++)this.order.Requests[t].id==this.$route.query.id&&(console.log(this.order.Requests[t]),e=this.order.Requests[t].star,console.log("idDis",e));this.nextId=this.order.Requests.find((function(t){return t.star>e})),console.log("data",this.nextId)},methods:cr(cr(cr(cr({compareValues:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";return function(r,a){if(!r.hasOwnProperty(e)||!a.hasOwnProperty(e))return 0;var n="string"===typeof r[e]?r[e].toUpperCase():r[e],s="string"===typeof a[e]?a[e].toUpperCase():a[e],o=0;return n>s?o=1:n<s&&(o=-1),"desc"==t?-1*o:o}}},Object(d["b"])("base",["GET_DEPARTMENTSBYID"])),Object(d["b"])("orders",["getOneOrder","getAllRequests"])),Object(d["b"])("orderMetas",["getOneOrderMeta","addorderMeta","deleteOrderMeta","updateOrderMeta"])),{},{loadData:function(e){var t=this;return l()(o.a.mark((function r(){var a;return o.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return a=null,r.prev=1,r.next=4,t.getOneOrder(e);case 4:a=r.sent,r.next=10;break;case 7:r.prev=7,r.t0=r["catch"](1),console.log(r.t0);case 10:a||t.$router.push({path:"/phe-duyet"}),t.metaValues=a.data.data.OrderMeta,console.log(a);case 13:case"end":return r.stop()}}),r,null,[[1,7]])})))()}})},dr=ur,pr=Object(b["a"])(dr,or,ir,!1,null,null,null),mr=pr.exports;C()(pr,"components",{QCardSection:q["a"],QInput:L["a"],QCard:g["a"]});var hr,fr=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("q-card",[r("q-card-section",[r("div",{staticClass:"text-h6"},[e._v("Danh sách đăng ký")]),e.order.OrderMeta[0].dateStart?r("div",{staticClass:"q-mb-sm"},[r("q-badge",[e._v(" Ngày đi công tác: "+e._s(e.order.OrderMeta[0].dateStart.slice(0,10))+" ")])],1):e._e(),r("div",{staticClass:"text-subtitle2"},[e._v("\n      Từ "),r("b",[e._v(e._s(e.order.OrderMeta[0].dateStart.slice(0,10)))]),r("br"),e._v("  Đến: "),r("b",[e._v(e._s(e.order.OrderMeta[0].dateEnd.slice(0,10)))])])]),r("q-card-section",[r("list-account",{attrs:{accounts:e.accounts,disable:e.disable}})],1)],1)},br=[];function vr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function gr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?vr(Object(r),!0).forEach((function(t){u()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):vr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var qr=(hr={method:gr({},Object(d["b"])("orders",["getOneOrder"])),computed:gr(gr(gr(gr({},Object(d["b"])("requests",["getOneRequest","addRequest","completedRequest","cancelRequest"])),Object(d["b"])("orderMetas",["selectOrderMeta","getOneOrderMeta","resetOrderLine"])),Object(d["c"])("orders",["order"])),Object(d["c"])("orderMetas",["orderMetas"])),created:function(){return l()(o.a.mark((function e(){return o.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()}},u()(hr,"created",(function(){return l()(o.a.mark((function e(){return o.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()})),u()(hr,"data",(function(){return{dataTest:"",date:(new Date).toISOString().slice(0,10),accounts:[100275,100278,100298,100310],disable:!1}})),hr),Or=qr,yr=Object(b["a"])(Or,fr,br,!1,null,null,null),xr=yr.exports;C()(yr,"components",{QCard:g["a"],QCardSection:q["a"],QBadge:O["a"]});var Cr=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"q-pt-md"},[r("div",{staticClass:"q-pa-md q-mt-lg column col justify-end",class:{invisible:!e.showMessages}},[r("div",{staticStyle:{height:"300px","overflow-y":"auto"}},e._l(e.order.Messages,(function(t,a){return r("q-chat-message",{key:a,attrs:{name:"<b>"+e.getAccountById(t.accountId).account+" - "+e.getAccountById(t.accountId).lastName+" - "+e.getAccountById(t.accountId).position+"</b>",text:[t.text],sent:t.accountId==e.userInfo.id,"bg-color":t.accountId==e.userInfo.id?"light-green-4":"light-green-2",stamp:e._f("luc")(t.createdAt)}})})),1)]),r("q-footer",{attrs:{elevated:""}},[r("q-toolbar",[r("q-form",{staticClass:"full-width",on:{submit:e.sendMessage}},[r("q-input",{ref:"newMessage",attrs:{"bg-color":"white",outlined:"",label:"Message",dense:""},scopedSlots:e._u([{key:"after",fn:function(){return[r("q-btn",{attrs:{round:"",dense:"",flat:"",color:"white",icon:"send"},on:{click:e.sendMessage}})]},proxy:!0}]),model:{value:e.newMessage,callback:function(t){e.newMessage=t},expression:"newMessage"}})],1)],1)],1)],1)},Mr=[];function Dr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function Tr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Dr(Object(r),!0).forEach((function(t){u()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Dr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var wr={data:function(){return{showAddTask:!1,newMessage:"",showMessages:!0}},computed:Tr(Tr(Tr({},Object(d["c"])("orders",["order","getAccountById"])),Object(d["c"])("base",["userInfo"])),Object(d["c"])("messages",["messages"])),methods:Tr(Tr({},Object(d["b"])("orders",["getOneOrder","resetOrderLine","addMessage","sendToApproved","getAllRequests","resetRequests"])),{},{sendMessage:function(){console.log("send"),this.addMessage({id:"",accountId:this.userInfo.id,orderId:this.order.id,text:this.newMessage}),this.clearMessage()},clearMessage:function(){this.newMessage="",this.$refs.newMessage.focus()},scrollToBottom:function(){var e=this.$refs.pageOrder.$el;setTimeout((function(){window.scrollTo(0,e.scrollHeight)}),20)}})},kr=wr,_r=r("8169"),Ir=r("7ff0"),jr=r("65c6"),Pr=r("0378"),Sr=Object(b["a"])(kr,Cr,Mr,!1,null,null,null),Vr=Sr.exports;C()(Sr,"components",{QChatMessage:_r["a"],QFooter:Ir["a"],QToolbar:jr["a"],QForm:Pr["a"],QInput:L["a"],QBtn:v["a"]});var Rr=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("q-card-section",[r("q-input",{staticClass:"q-mt-sm ",attrs:{outlined:"",label:"Họ tên(người nhận bàn giao) : ",readonly:!0},model:{value:e.order.OrderMeta[0].fullName2,callback:function(t){e.$set(e.order.OrderMeta[0],"fullName2",t)},expression:"order.OrderMeta[0].fullName2"}}),r("DxDataGrid",{attrs:{id:"jskjdkfjkld","data-source":e.metaValuesFilter,"allow-column-reordering":!0,"show-borders":!0,"show-row-lines":!0,"word-wrap-enabled":!0}},[r("DxColumn",{attrs:{"data-field":"STT"}}),r("DxColumn",{attrs:{"data-field":"mucDichSuDung",caption:"Nội dung"}}),r("DxColumn",{attrs:{caption:"Số lượng","data-field":"number","data-type":"number"}}),r("DxColumn",{attrs:{caption:"Ghi chú","data-field":"description"}})],1),r("footer-card",{attrs:{order:e.order,nextId:e.nextId}})],1)},Nr=[];function Er(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function Ar(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Er(Object(r),!0).forEach((function(t){u()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Er(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var $r={components:{footerCard:pe,DxDataGrid:fe["DxDataGrid"],DxColumn:fe["DxColumn"]},created:function(){var e=this;return l()(o.a.mark((function t(){var r,a;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:for(e.status=e.$route.query.status,console.log("status",e.status),console.log("dsCongDoans",e.dsCongDoans),console.log("userInfo",e.userInfo),e.order.Requests.sort(e.compareValues("star","asc")),r=null,a=0;a<e.order.Requests.length;a++)e.order.Requests[a].id==e.$route.query.id&&(console.log(e.order.Requests[a]),r=e.order.Requests[a].star,console.log("idDis",r));e.nextId=e.order.Requests.find((function(e){return e.star>r})),console.log("data",e.nextId);case 9:case"end":return t.stop()}}),t)})))()},data:function(){return{nextId:null,events:[],nameDepartment:{},status:"",phoneNumber:"",nameDepartmentName:null}},computed:Ar(Ar({},Object(d["c"])("orders",["order"])),{},{metaValuesFilter:function(){return console.log(this.order),this.order&&this.order.OrderMeta?this.order.OrderMeta.filter((function(e){return e.STT})).sort((function(e,t){return e.STT-t.STT})):[]}}),methods:Ar(Ar(Ar(Ar(Ar({},Object(d["b"])("base",["GET_DEPARTMENTSBYID"])),Object(d["b"])("orders",["getOneOrder","getAllRequests"])),Object(d["b"])("orderMetas",["getOneOrderMeta","addorderMeta","deleteOrderMeta","updateOrderMeta"])),Object(d["b"])("orders",["getOneOrder"])),{},{compareValues:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";return function(r,a){if(!r.hasOwnProperty(e)||!a.hasOwnProperty(e))return 0;var n="string"===typeof r[e]?r[e].toUpperCase():r[e],s="string"===typeof a[e]?a[e].toUpperCase():a[e],o=0;return n>s?o=1:n<s&&(o=-1),"desc"==t?-1*o:o}},loadData:function(e){var t=this;return l()(o.a.mark((function r(){var a;return o.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return a=null,r.prev=1,r.next=4,t.getOneOrder(e);case 4:a=r.sent,r.next=10;break;case 7:r.prev=7,r.t0=r["catch"](1),console.log(r.t0);case 10:a||t.$router.push({path:"/phe-duyet"}),t.metaValues=a.data.data.OrderMeta,console.log(a);case 13:case"end":return r.stop()}}),r,null,[[1,7]])})))()}})},Qr=$r,Yr=Object(b["a"])(Qr,Rr,Nr,!1,null,null,null),Br=Yr.exports;function Gr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function Hr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Gr(Object(r),!0).forEach((function(t){u()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Gr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}C()(Yr,"components",{QCardSection:q["a"],QInput:L["a"]});var Lr={data:function(){return{nextId2:null,nextId3:null,nextId:null,dataTest:"",banTGD:null,options:[{label:"Vũ Hải Bằng",value:"100400",description:"Chủ tịch HĐQT"},{label:"Trần Thị Thu Hàn",value:"100400",description:"Tổng giám đốc"}],idNext:null}},components:{OrderHeader:D,OrderLinesTodo:Q,ThanhToan:X,SendMessage:Vr,CarsOrder:xr,DeNghiLuong:ye,MuaHang:Ne,VatTu:He,TuyenNhanVien:et,ChuyenNhanVien:lt,XinNghiViec:qt,CapBaoHoLaoDong:sr,XinRaCong:wt,DiCongTac:Rt,VanPhongPham:mr,BanGiao:Br,XacNhanCong:Gt,SuaChua:Wt},methods:Hr(Hr(Hr({},Object(d["b"])("requests",["getOneRequest","addRequest","completedRequest","cancelRequest"])),Object(d["b"])("orders",["getOneOrder"])),{},{promptToDelete:function(e){var t=this;this.$q.dialog({title:"Xác nhận",message:"Bạn thực sự muốn Hủy?",ok:{push:!0},cancel:{color:"negative"},persistent:!0}).onOk((function(){t.cancelRequest(e),t.$router.go(-1)}))},completedToRequest:function(e){var t=this;this.$q.dialog({title:"Xác nhận",message:"Bạn thực sự muốn Duyệt?",ok:{push:!0},cancel:{color:"negative"},persistent:!0}).onOk((function(){t.completedRequest(e),t.$router.go(-1)}))},getMetaValue:function(){var e=this.order.OrderMeta;return JSON.parse(e[0].metaValue)},compareValues:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";return function(r,a){if(!r.hasOwnProperty(e)||!a.hasOwnProperty(e))return 0;var n="string"===typeof r[e]?r[e].toUpperCase():r[e],s="string"===typeof a[e]?a[e].toUpperCase():a[e],o=0;return n>s?o=1:n<s&&(o=-1),"desc"==t?-1*o:o}}}),computed:Hr(Hr(Hr(Hr({},Object(d["c"])("requests",["request"])),Object(d["c"])("base",["userInfo"])),Object(d["c"])("orders",["order"])),{},{parentOrder:function(){var e=this;return this.order.Requests.filter((function(t){return t.parentId===e.request.id&&"Ban TGĐ"===t.position}))}}),created:function(){var e=this;return l()(o.a.mark((function t(){var r,a;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.$route.query.id){t.next=8;break}return t.next=3,e.getOneRequest(e.$route.query.id);case 3:return e.dataTest=t.sent,t.next=6,e.getOneOrder(e.dataTest.orderId);case 6:console.log("this.dataTest",e.dataTest),console.log("this.order",e.order);case 8:for(console.log("Requests",e.order.Requests),e.order.Requests.sort(e.compareValues("star","asc")),r=null,a=0;a<e.order.Requests.length;a++)e.order.Requests[a].id==e.$route.query.id&&(console.log(e.order.Requests[a]),r=e.order.Requests[a].star,console.log("idDis",r));e.nextId=e.order.Requests.find((function(e){return e.star>r})),console.log("data",e.nextId),e.nextId2=e.order.Requests.filter((function(t){return t.star>e.request.star&&"Phòng vật tư"!=t.position})),e.nextId3=e.order.Requests.filter((function(t){return t.star>e.request.star&&("Phòng vật tư"==t.position||"Phòng bảo vệ"==t.position)})),console.log("this.nextId",e.nextId),console.log("this.nextId2",e.nextId2),console.log("this.nextId3",e.nextId3);case 19:case"end":return t.stop()}}),t)})))()}},Fr=Lr,Xr=r("9989"),Ur=r("66e5"),Kr=r("4074"),Jr=r("0170"),Wr=Object(b["a"])(Fr,a,n,!1,null,null,null);t["default"]=Wr.exports;C()(Wr,"components",{QPage:Xr["a"],QCard:g["a"],QCardSection:q["a"],QSelect:Se["a"],QItem:Ur["a"],QItemSection:Kr["a"],QItemLabel:Jr["a"]})},c403:function(e,t,r){"use strict";var a=r("dae3"),n=r.n(a);n.a},dae3:function(e,t,r){}}]);