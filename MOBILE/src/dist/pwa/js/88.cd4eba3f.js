(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[88],{"5e1d":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("q-page",{staticClass:"q-pa-md"},[n("app-bar",[t._v("Tạo kế hoạch sấy")]),n("div",{staticClass:"row q-mt-md"},[n("div",{staticClass:"col-12"},[n("q-stepper",{attrs:{vertical:"",color:"primary",animated:""},model:{value:t.step,callback:function(e){t.step=e},expression:"step"}},[n("q-step",{attrs:{name:1,title:"Chọn lò sấy",icon:"settings",done:t.step>1}},[n("div",{staticClass:"col-12"},[n("q-select",{staticStyle:{"font-family":"'Time New Roman'","font-size":"16px","text-align":"center"},attrs:{options:t.kilns,label:"Chọn lò  :"},model:{value:t.kiln,callback:function(e){t.kiln=e},expression:"kiln"}})],1),n("q-stepper-navigation",[n("q-btn",{attrs:{color:"primary",label:"Tiếp tục"},on:{click:function(e){t.step=2}}})],1)],1),n("q-step",{attrs:{name:2,title:"Chọn mục đích sấy",caption:"Indoor/Outdoor",icon:"create_new_folder",done:t.step>2}},[n("q-select",{attrs:{outlined:"",options:t.types,label:"mục đích sấy"},on:{input:t.selectType},model:{value:t.type,callback:function(e){t.type=e},expression:"type"}}),n("q-stepper-navigation",[n("q-btn",{attrs:{color:"primary",label:"Tiếp tục"},on:{click:function(e){t.step=3}}}),n("q-btn",{staticClass:"q-ml-sm",attrs:{flat:"",color:"primary",label:"Trở lại"},on:{click:function(e){t.step=1}}})],1)],1),n("q-step",{attrs:{name:3,title:"Chọn chiều dầy",icon:"assignment",done:t.step>3}},[n("q-select",{attrs:{outlined:"",options:t.heights,label:"Chiều dầy"},on:{input:t.selectHeight},model:{value:t.height,callback:function(e){t.height=e},expression:"height"}}),n("q-stepper-navigation",[n("q-btn",{attrs:{color:"primary",label:"Tiếp tục"},on:{click:function(e){t.step=4}}}),n("q-btn",{staticClass:"q-ml-sm",attrs:{flat:"",color:"primary",label:"Trở lại"},on:{click:function(e){t.step=1}}})],1)],1),n("q-step",{attrs:{name:4,title:"Chiều dài sấy",icon:"add_comment"}},[n("q-input",{attrs:{outlined:"",label:"Chiều dài sấy"},model:{value:t.length,callback:function(e){t.length=e},expression:"length"}}),n("q-stepper-navigation",[n("q-btn",{attrs:{color:"primary",label:"Hoàn thành"},on:{click:t.submit}}),n("q-btn",{staticClass:"q-ml-sm",attrs:{flat:"",color:"primary",label:"Trở lại"},on:{click:function(e){t.step=2}}})],1)],1)],1)],1)]),n("q-inner-loading",{attrs:{showing:t.showLoading}},[n("q-spinner-gears",{attrs:{size:"150px",color:"primary"}})],1),n("q-dialog",{attrs:{persistent:""},model:{value:t.showConfirm,callback:function(e){t.showConfirm=e},expression:"showConfirm"}},[n("q-card",{staticStyle:{"min-width":"300px"}},[n("q-card-section",{staticClass:"row items-center"},[n("span",{staticClass:"q-ml-sm prodTextTitle"},[t._v("Bạn đã chắc chắn  !")])]),n("q-card-actions",{attrs:{align:"right"}},[n("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Hủy",color:"primary"}}),n("q-btn",{attrs:{flat:"",label:"Đồng Ý",color:"primary"},on:{click:t.createBatch}})],1)],1)],1)],1)},s=[],a=(n("7514"),n("7f7f"),n("551c"),n("ac6a"),n("cadf"),n("06db"),n("5df3"),n("dd38")),o={components:{"app-bar":a["a"]},data:function(){return{showLoading:!0,showConfirm:!1,step:1,kilns:[],kiln:null,types:[],type:null,heights:[],height:null,rangeId:null,currentRanges:[],target:null,length:"0",stepNextId:null}},created:function(){this.initData()},methods:{initData:function(){var t=this,e="?",n={token:e,factoryId:this.$store.getters["base/myFactoryInfor"].id};Promise.all([this.$store.dispatch("production/ACTION_GET_KILNS",n),this.$store.dispatch("production/ACTION_GET_RANGES_BATCH")]).then((function(e){var n=t.$store.state.production.kilns.filter((function(t){return null===t.batch}));n.forEach((function(e){var n={label:e.name,value:e.id};t.kilns.push(n)}));var i=t.$store.state.production.batchRanges;i.forEach((function(e){-1===t.types.indexOf(e.type)&&t.types.push(e.type)})),t.showLoading=!1}))},selectKiln:function(t){this.kilns[t].isActive=!0,console.log(this.kilns)},selectType:function(t){var e=this,n=this.$store.state.production.batchRanges.filter((function(e){return e.type===t}));this.currentRanges=n,n.forEach((function(t){-1===e.heights.indexOf(t.height)&&e.heights.push(t.height)})),this.height=null},selectHeight:function(t){var e=this.currentRanges.find((function(e){return e.height===t}));this.rangeId=e.id,this.target=e.timeOutTarget,this.stepNextId=e.stepNextId,console.log(this.rangeId)},submit:function(){null!==this.kiln&&null!==this.type&&null!==this.height&&this.length.length>0?(console.log("validate"),this.showConfirm=!0):this.$q.notify({message:"Nhập thiếu thông tin !",color:"red"})},createBatch:function(){var t=this;this.showConfirm=!1,this.showLoading=!0;var e={kilnId:this.kiln.value,data:{token:this.$store.state.production.userInfo.token,target:this.target,length:this.length,height:this.height,stepNextId:this.stepNextId,type:this.type}};this.$store.dispatch("production/ACTION_CREATE_BATCH",e).then((function(e){t.showLoading=!1,t.$router.go(-1)}))}}},l=o,r=n("2877"),c=n("9989"),h=n("f531"),p=n("87fe"),u=n("ddd8"),d=n("b19c"),f=n("9c40"),g=n("27f9"),m=n("74f7"),b=n("cf57"),y=n("24e8"),q=n("f09f"),v=n("a370"),k=n("4b7e"),C=n("7f67"),w=n("eebe"),T=n.n(w),x=Object(r["a"])(l,i,s,!1,null,null,null);e["default"]=x.exports;T()(x,"components",{QPage:c["a"],QStepper:h["a"],QStep:p["a"],QSelect:u["a"],QStepperNavigation:d["a"],QBtn:f["a"],QInput:g["a"],QInnerLoading:m["a"],QSpinnerGears:b["a"],QDialog:y["a"],QCard:q["a"],QCardSection:v["a"],QCardActions:k["a"]}),T()(x,"directives",{ClosePopup:C["a"]})}}]);