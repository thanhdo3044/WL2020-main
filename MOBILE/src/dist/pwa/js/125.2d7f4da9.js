(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[125],{"0f3b":function(t,a,e){"use strict";e.r(a);var o=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("q-page",{staticClass:"q-pa-sm"},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.showAdd,expression:"showAdd"}],staticClass:"row justify-center q-mt-sm"},[e("q-card",{staticClass:"my-card q-pt-sm"},[e("q-ribbon",{attrs:{position:"left",color:"#ffffff","background-color":"#027BE3","leaf-position":"bottom",decoration:"rounded-out",glow:""}},[t._v("\n                  Nhập thông tin nhân công\n              ")]),e("q-card-section",[e("div",{staticClass:"col-12"},[e("p",{staticClass:"woodText"},[t._v("Chọn ngày")]),e("q-input",{attrs:{filled:"",mask:"date",rules:["date"]},scopedSlots:t._u([{key:"append",fn:function(){return[e("q-icon",{staticClass:"cursor-pointer",attrs:{name:"event"}},[e("q-popup-proxy",{ref:"qDateProxy",attrs:{"transition-show":"scale","transition-hide":"scale"}},[e("q-date",{on:{input:function(){return t.$refs.qDateProxy.hide()}},model:{value:t.today,callback:function(a){t.today=a},expression:"today"}})],1)],1)]},proxy:!0}]),model:{value:t.today,callback:function(a){t.today=a},expression:"today"}})],1),e("div",{staticClass:"col-12"},[e("q-input",{attrs:{outlined:"",type:"number",label:"Ca làm việc"},model:{value:t.shift,callback:function(a){t.shift=t._n(a)},expression:"shift"}})],1),e("div",{staticClass:"col-12  q-mt-sm"},[e("q-input",{attrs:{outlined:"",type:"number",label:"Số lượng công nhân đi làm"},model:{value:t.workerQty,callback:function(a){t.workerQty=t._n(a)},expression:"workerQty"}})],1),e("div",{staticClass:"col-12 q-mt-sm"},[e("q-input",{attrs:{outlined:"",type:"number",label:"Tổng số giờ OT của nhóm"},model:{value:t.otTime,callback:function(a){t.otTime=t._n(a)},expression:"otTime"}})],1),e("div",{staticClass:"col-12 q-mt-sm",attrs:{align:"right"}},[e("q-btn",{attrs:{color:"primary",icon:"save",label:"Lưu lại"},on:{click:t.onSave}})],1)])],1)],1),e("q-separator",{directives:[{name:"show",rawName:"v-show",value:t.showAdd,expression:"showAdd"}],staticClass:"q-mt-md"}),e("div",{staticClass:"row justify-center"},[e("div",{staticClass:"col-12 col-sm-4 q-ma-sm"},[e("q-input",{attrs:{filled:"",mask:"date",rules:["date"]},scopedSlots:t._u([{key:"append",fn:function(){return[e("q-icon",{staticClass:"cursor-pointer",attrs:{name:"event"}},[e("q-popup-proxy",{ref:"qDateProxy",attrs:{"transition-show":"scale","transition-hide":"scale"}},[e("q-date",{on:{input:function(){return t.$refs.qDateProxy.hide()}},model:{value:t.fromDate,callback:function(a){t.fromDate=a},expression:"fromDate"}})],1)],1)]},proxy:!0}]),model:{value:t.fromDate,callback:function(a){t.fromDate=a},expression:"fromDate"}})],1),e("div",{staticClass:"col-12 col-sm-4 q-ma-sm"},[e("q-input",{attrs:{filled:"",mask:"date",rules:["date"]},scopedSlots:t._u([{key:"append",fn:function(){return[e("q-icon",{staticClass:"cursor-pointer",attrs:{name:"event"}},[e("q-popup-proxy",{ref:"qDateProxy",attrs:{"transition-show":"scale","transition-hide":"scale"}},[e("q-date",{on:{input:function(){return t.$refs.qDateProxy.hide()}},model:{value:t.toDate,callback:function(a){t.toDate=a},expression:"toDate"}})],1)],1)]},proxy:!0}]),model:{value:t.toDate,callback:function(a){t.toDate=a},expression:"toDate"}})],1),e("div",{staticClass:"col-12 col-sm-2 column justify-center"},[e("q-btn",{staticClass:"full-width",staticStyle:{"min-height":"57px","margin-bottom":"20px"},attrs:{color:"primary",icon:"search",label:"Tìm kiếm"},on:{click:t.search}})],1)]),e("q-separator"),t.data.length>0?e("div",{staticClass:"row justify-center q-mt-md"},[e("div",{staticClass:"col-12 col-sm-6"},[e("q-card",{staticClass:"my-card"},[e("q-card-section",[e("div",{staticClass:"text-h6"},[t._v("Tổng cộng")])]),e("q-card-section",[e("p",{staticClass:"woodText",staticStyle:{"font-weight":"800"}},[t._v(" Tổng số giờ làm chính thức : "+t._s(t.getTotalHour))]),e("p",{staticClass:"woodText",staticStyle:{"font-weight":"800"}},[t._v(" Tổng số giờ làm thêm : "+t._s(t.getTotalHourOT))])])],1)],1)]):t._e(),e("div",{staticClass:"row justify-center  q-ma-sm"},t._l(t.data,(function(a){return e("div",{key:a.id,staticClass:"col-12 col-sm-4 q-ma-sm"},[e("q-card",{staticClass:"my-card q-pt-sm"},[e("q-ribbon",{attrs:{position:"left",color:"#ffffff","background-color":"#027BE3","leaf-position":"bottom",decoration:"rounded-in",glow:""}},[t._v("\n                          "+t._s(a.date)+"\n                      ")]),e("q-card-section",[e("div",{staticClass:"text-subtitle2"},[t._v("Tạo bởi "+t._s(a.createName))])]),e("q-card-section",[e("p",{staticClass:"woodText"},[t._v("- Ca làm việc : "+t._s(a.shift||"??"))]),e("p",{staticClass:"woodText"},[t._v("- Tổng số công nhân : "+t._s(a.workers))]),e("p",{staticClass:"woodText"},[t._v("- Tổng số giờ làm thêm : "+t._s(a.ot))])])],1)],1)})),0),e("q-page-sticky",{attrs:{position:"bottom-right",offset:[18,18]}},[e("q-btn",{attrs:{fab:"",icon:"add",color:"primary"},on:{click:function(a){t.showAdd=!0}}})],1)],1)},s=[],n=e("a34a"),r=e.n(n),i=(e("386d"),e("6b54"),e("06db"),e("a481"),e("96cf"),e("c973")),c=e.n(i),l=e("bd4c"),d=e("d9b2"),u={data:function(){return{fromDate:"2019/02/01",toDate:"",data:[],showAdd:!1,today:"",workerQty:0,otTime:0,shift:1}},created:function(){var t=new Date,a=l["b"].startOfDate(t,"month"),e=l["b"].formatDate(a,"YYYY/MM/DD");this.fromDate=e;var o=l["b"].formatDate(l["b"].endOfDate(t,"month"),"YYYY/MM/DD");this.toDate=o,this.today=l["b"].formatDate(t,"YYYY/MM/DD")},computed:{getTotalHour:function(){if(this.data.length>0){var t=0;return this.data.forEach((function(a){t+=8*a.workers})),t}return 0},getTotalHourOT:function(){if(this.data.length>0){var t=0;return this.data.forEach((function(a){t+=a.ot})),t}return 0}},methods:{onSave:function(){var t=this;return c()(r.a.mark((function a(){var e,o,s;return r.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(e=t.$store.getters["base/myDepartmentInfor"].id,!(t.workerQty>0&&t.otTime>=0&&e)){a.next=9;break}return o={date:t.today.toString().replace("/","-").replace("/","-"),departmentId:e,workers:t.workerQty,ot:t.otTime,shift:t.shift},a.next=5,t.$store.dispatch("production/INSERT_WORK_TIME",o);case 5:s=a.sent,s.meta.success&&(t.$q.notify({message:"Lưu dữ liệu thành công !",color:"green"}),t.showAdd=!1,t.search()),a.next=10;break;case 9:t.$q.notify({message:" Dữ liệu không chính xác !"});case 10:case"end":return a.stop()}}),a)})))()},search:function(){var t=this;return c()(r.a.mark((function a(){var e,o,s;return r.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(t.$q.loading.show({spinner:d["a"],spinnerColor:"primary",spinnerSize:100}),e=t.$store.state.base.userInfo.id,!(t.fromDate&&t.toDate&&e)){a.next=10;break}return o={fromDate:t.fromDate,toDate:t.toDate,createBy:e},a.next=6,t.$store.dispatch("production/GET_WORKERS_FROM_TO",o);case 6:s=a.sent,t.data=s.data,a.next=11;break;case 10:t.$q.notify({message:"Vui lòng điền đầy đủ thông tin !",color:"red",position:"center"});case 11:t.$q.loading.hide();case 12:case"end":return a.stop()}}),a)})))()}}},f=u,m=e("2877"),p=e("9989"),h=e("f09f"),v=e("a370"),y=e("27f9"),q=e("0016"),b=e("7cbe"),w=e("52ee"),g=e("9c40"),x=e("eb85"),D=e("de5e"),k=e("eebe"),C=e.n(k),_=Object(m["a"])(f,o,s,!1,null,null,null);a["default"]=_.exports;C()(_,"components",{QPage:p["a"],QCard:h["a"],QCardSection:v["a"],QInput:y["a"],QIcon:q["a"],QPopupProxy:b["a"],QDate:w["a"],QBtn:g["a"],QSeparator:x["a"],QPageSticky:D["a"]})}}]);