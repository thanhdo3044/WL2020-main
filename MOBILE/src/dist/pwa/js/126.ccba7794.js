(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[126],{8308:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-page",{staticClass:"q-pa-md"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-12 page-title"},[t._v("Chuyển đổi phôi")])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-12 q-mt-sm"},[a("q-select",{staticStyle:{"font-family":"'Time New Roman'","font-size":"16px"},attrs:{"use-input":"","input-debounce":"0",behavior:"dialog",options:t.materials,label:"Qui cách trước chuyển đổi :"},on:{input:t.selectMaterial,filter:t.searchMaterial},model:{value:t.material,callback:function(e){t.material=e},expression:"material"}})],1),a("div",{staticClass:"col-12 q-mt-sm"},[a("q-input",{attrs:{type:"text",label:"Số lượng Qui cách trước chuyển đổi"},model:{value:t.materialQty,callback:function(e){t.materialQty=e},expression:"materialQty"}})],1),a("div",{staticClass:"col-12 q-mt-sm"},[a("q-select",{staticStyle:{"font-family":"'Time New Roman'","font-size":"16px"},attrs:{"use-input":"","input-debounce":"0",behavior:"dialog",options:t.items,label:"Qui cách sau chuyển đổi :"},on:{input:t.selectItem,filter:t.searchItem},model:{value:t.item,callback:function(e){t.item=e},expression:"item"}})],1),a("div",{staticClass:"col-12 q-mt-sm"},[a("q-input",{attrs:{type:"text",label:"Số lượng Qui cách sau chuyển đổi"},model:{value:t.itemQty,callback:function(e){t.itemQty=e},expression:"itemQty"}})],1),a("div",{staticClass:"col-12 q-pa-md"},[a("q-btn",{staticClass:"full-width",attrs:{color:"primary",glossy:"",label:"Tạo kiện"},on:{click:function(e){t.showConfirm=!0}}})],1)]),a("q-dialog",{attrs:{persistent:""},model:{value:t.showConfirm,callback:function(e){t.showConfirm=e},expression:"showConfirm"}},[a("q-card",{staticStyle:{"min-width":"300px",width:"60%"}},[a("q-card-section",{staticClass:"row items-center"},[a("div",{staticClass:"text-h6 col-12"},[t._v("\n                Bạn đã chắc chắn ?\n            ")])]),a("q-card-section",{staticClass:"row"},[a("div",{staticClass:"col-12"},[a("p",[t._v("Chuyển đổi "+t._s(t.materialQty)+" qui cách "+t._s(t.material?t.material.label:""))]),a("p",[t._v("==>>>")]),a("p",[t._v(t._s(t.itemQty)+" qui cách "+t._s(t.item?t.item.label:""))])])]),a("q-card-actions",{attrs:{align:"right"}},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Hủy",color:"primary"}}),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Đồng Ý",color:"primary"},on:{click:t.create}})],1)],1)],1)],1)},n=[],s=(a("6b54"),a("06db"),a("7f7f"),a("a34a")),c=a.n(s),l=(a("96cf"),a("c973")),r=a.n(l),o=a("fa7d"),u={data:function(){return{items:[],dupplicateItems:[],item:null,material:null,materials:[],itemQty:"",materialQty:"",showConfirm:!1}},created:function(){this.loadItem()},methods:{create:function(){var t=this;return r()(c.a.mark((function e(){var a,i;return c.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a={sourceId:100076,destinationId:100070,materialsId:t.material.value,materialsQuantity:t.materialQty,itemId:t.item.value,quantity:t.itemQty},e.next=3,t.$store.dispatch("production/POST_SAN_LUONG",a);case 3:i=e.sent,i.meta.success?(Object(o["o"])("Thành công , hãy chuyển phôi đến kho phôi"),t.itemQty="",t.item=null,t.material=null,t.materialQty=null):Object(o["n"])();case 5:case"end":return e.stop()}}),e)})))()},loadItem:function(){var t=this;return r()(c.a.mark((function e(){var a,i,n;return c.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t.$store.getters["base/myFactoryInfor"].id,i={factoryId:a},e.next=4,t.$store.dispatch("production/ACTION_FETCH_ITEMS",i);case 4:n=e.sent,t.dupplicateItems=n;case 6:case"end":return e.stop()}}),e)})))()},selectItem:function(t){},selectMaterial:function(t){},searchMaterial:function(t,e){var a=this,i=[];this.dupplicateItems.forEach((function(t){var e={label:"["+t.code+"] "+t.name+"  ("+t.height+" "+t.width+" "+t.length+")",value:t.id};i.push(e)})),e(""!==t?function(){var e=t.toLowerCase();a.materials=i.filter((function(t){var a=t.label;if(a.toString().indexOf(e)>-1)return t}))}:function(){a.materials=i})},searchItem:function(t,e){var a=this,i=[];this.dupplicateItems.forEach((function(t){var e={label:"["+t.code+"] "+t.name+"  ("+t.height+" "+t.width+" "+t.length+")",value:t.id};i.push(e)})),e(""!==t?function(){var e=t.toLowerCase();a.items=i.filter((function(t){var a=t.label;if(a.toString().indexOf(e)>-1)return t}))}:function(){a.items=i})}}},m=u,p=a("2877"),d=a("9989"),h=a("ddd8"),f=a("27f9"),v=a("9c40"),y=a("24e8"),b=a("f09f"),w=a("a370"),C=a("4b7e"),Q=a("7f67"),q=a("eebe"),g=a.n(q),I=Object(p["a"])(m,i,n,!1,null,null,null);e["default"]=I.exports;g()(I,"components",{QPage:d["a"],QSelect:h["a"],QInput:f["a"],QBtn:v["a"],QDialog:y["a"],QCard:b["a"],QCardSection:w["a"],QCardActions:C["a"]}),g()(I,"directives",{ClosePopup:Q["a"]})}}]);