(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[36],{2759:function(t,e,n){},"50a1":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("q-page",{staticClass:"q-pa-md"},[n("div",{staticClass:"row top-title"},[n("div",{staticClass:"col-12"},[t._v("Danh sách các phôi chờ nhận")])]),n("div",{staticClass:"row q-mt-sm"},[n("div",{staticClass:"col-12"},[n("q-select",{attrs:{options:t.departments,label:"Công đoạn"},on:{input:t.chonCongDoan},model:{value:t.myDepartment,callback:function(e){t.myDepartment=e},expression:"myDepartment"}})],1)]),n("div",{staticClass:"row q-mt-sm justify-center"},[n("div",{staticClass:"col-12 justify-center"},[n("div",{staticClass:"border q-pa-sm"},[n("span",{staticClass:"help"},[t._v(t._s(t.resultString))])])])]),n("div",{staticClass:"row"},[n("div",{staticClass:"col-12 q-pa-sm"},[n("q-input",{attrs:{outlined:"",type:"text",label:"Tìm kiếm"},model:{value:t.searchQuery,callback:function(e){t.searchQuery=e},expression:"searchQuery"}})],1)]),n("q-separator",{attrs:{spaced:""}}),n("div",{staticClass:"row q-mt-sm"},[t._l(t.phoiChoNhanVes,(function(e){return n("div",{key:e.code,staticClass:"col-12 q-mt-sm"},[n("q-card",{staticClass:"my-card"},[n("q-card-section",[n("div",{staticClass:"row"},[n("div",{staticClass:"text-subtitle2 sub-receipt"},[t._v("\n              ["+t._s(e.itemCode)+"] "+t._s(e.itemName)+" ("+t._s(e.itemHeight)+"*"+t._s(e.itemWidth)+"*"+t._s(e.itemLength)+")\n            ")])]),n("q-input",{attrs:{readonly:!1,type:"number",label:"Số lượng phôi(Kế hoạch ghép)"},model:{value:e.nhanVe,callback:function(n){t.$set(e,"nhanVe",t._n(n))},expression:"item.nhanVe"}})],1),n("q-card-actions",{attrs:{align:"right"}},[n("q-btn",{attrs:{dense:"",icon:"cloud_download","no-caps":"",color:"primary",label:"Nhận"},on:{click:function(n){return t.capPhoiPoCode(e.code,e.nhanVe)}}})],1)],1)],1)})),t._l(t.dataReceiptFilter,(function(e){return n("div",{key:e.id,staticClass:"col-12 q-mt-sm"},[n("q-card",{staticClass:"my-card"},[n("q-card-section",[n("div",{staticClass:"row"},[n("div",{staticClass:"text-subtitle2 sub-receipt"},[t._v("\n              ["+t._s(e.itemCode)+"] "+t._s(e.itemName)+" ("+t._s(e.itemHeight)+"*"+t._s(e.itemWidth)+"*"+t._s(e.itemLength)+")\n            ")])]),n("q-input",{attrs:{readonly:!1,type:"number",label:"Số lượng phôi"},model:{value:e.quantity,callback:function(n){t.$set(e,"quantity",t._n(n))},expression:"item.quantity"}})],1),n("q-card-actions",{attrs:{align:"right"}},[n("q-btn",{attrs:{dense:"",icon:"cloud_download","no-caps":"",color:"primary",label:"Nhận"},on:{click:function(n){return t.layPackageIds(t.myDepartment.value,e.itemId,e.quantity)}}})],1)],1)],1)}))],2),n("q-dialog",{attrs:{persistent:""},model:{value:t.showConfirmDialog,callback:function(e){t.showConfirmDialog=e},expression:"showConfirmDialog"}},[n("q-card",{staticStyle:{"min-width":"300px"}},[n("q-card-section",{staticClass:"row items-center"},[n("span",{staticClass:"q-ml-sm text-h6"},[t._v("Bạn đã chắc chắn !")])]),n("q-card-section",[t._v("\n        Nhận số :\n        "),n("strong",[t._v(t._s(t.soLuongNhan2))]),t._v(" về\n        "),n("span",{staticStyle:{color:"green"}},[t._v(t._s(t.myDepartment.label))])]),n("q-card-actions",{attrs:{align:"right"}},[n("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Hủy",color:"primary"}}),n("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Đồng Ý",color:"primary"},on:{click:function(e){return t.receipt()}}})],1)],1)],1)],1)},s=[],o=n("a34a"),i=n.n(o),r=(n("96cf"),n("c973")),c=n.n(r),l=(n("7f7f"),n("6762"),n("2fdb"),n("fa7d")),u={data:function(){return{myDepartment:null,departments:[],dataReceipt:[],sanluongnhan:[],showConfirmDialog:!1,currentNo:{},searchQuery:"",dupplicateData:[],resultString:"",soLuongNhan2:0,phoiChoNhanVes:[]}},computed:{dataReceiptFilter:function(){var t=this;return this.searchQuery?this.dataReceipt.filter((function(e){var n=e.itemName+" ";return e.itemHeight,e.itemWidth,e.itemLength,n.toLowerCase().includes(t.searchQuery.toLowerCase())})):this.dataReceipt}},created:function(){var t=this;this.$store.getters["base/mySources"].forEach((function(e){t.departments.push({value:e.id,label:e.name})})),this.departments.length>0&&(this.myDepartment=this.departments[0]),this.myDepartment&&this.load()},watch:{myDepartment:function(){this.searchQuery=""}},methods:{capPhoiPoCode:function(t,e){var n=this;return c()(i.a.mark((function a(){return i.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return console.log("code"),console.log(t),a.next=4,n.receipt(t,e);case 4:n.load();case 5:case"end":return a.stop()}}),a)})))()},layPackageIds:function(t,e,n){var a=this;return c()(i.a.mark((function s(){var o,r;return i.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return o={stepId:t,itemId:e},s.next=3,a.$store.dispatch("production/GET_LOT_WAIT_RECEIPT_PHUONG",o);case 3:r=s.sent,a.sanluongnhan=r.data,a.soLuongNhan2=n,console.log(r),a.showConfirmDialog=!0;case 8:case"end":return s.stop()}}),s)})))()},receipt:function(){var t=arguments,e=this;return c()(i.a.mark((function n(){var a,s,o,r,c,u;return i.a.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(a=t.length>0&&void 0!==t[0]?t[0]:"",s=t.length>1&&void 0!==t[1]?t[1]:0,!a){n.next=6;break}return n.next=5,e.$store.dispatch("po/themTonKeHoach3",{code:a,quantity:s});case 5:return n.abrupt("return");case 6:console.log("kjskdfjksjfjsdkfjkd"),o=0;case 8:if(!(o<e.sanluongnhan.length)){n.next=30;break}return r={packageId:e.sanluongnhan[o].id,numberInventory:e.myDepartment.value,nhanTon:e.dataReceipt[0].nhanTon,itemId:e.sanluongnhan[o].itemId},n.next=12,e.$store.dispatch("production/POST_NHAN_LOT_NO",r);case 12:if(c=n.sent,console.log(e.sanluongnhan[o].quantiy),console.log(e.sanluongnhan[o].x),console.log(e.soLuongNhan2),!(e.soLuongNhan2-e.sanluongnhan[o].quantiy<0)){n.next=25;break}return console.log("chao mưng den với sua san luong"),u={ID:e.sanluongnhan[o].x,QUANTITY:e.soLuongNhan2},n.next=21,e.$store.dispatch("production/PUT_SAN_LUONG_ID",u);case 21:n.sent,e.soLuongNhan2=0,n.next=26;break;case 25:e.soLuongNhan2=e.soLuongNhan2-e.sanluongnhan[o].quantiy;case 26:c.meta.success?e.load():Object(l["n"])();case 27:o++,n.next=8;break;case 30:case"end":return n.stop()}}),n)})))()},chonCongDoan:function(){this.load()},load:function(){var t=this;return c()(i.a.mark((function e(){var n;return i.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$store.dispatch("production/getPhoiNhapVe",{stepId:t.myDepartment.value});case 2:return t.phoiChoNhanVes=e.sent,e.next=5,t.$store.dispatch("production/GET_LOT_WAIT_RECEIPT",{stepId:t.myDepartment.value});case 5:n=e.sent,t.dataReceipt=n.data;case 7:case"end":return e.stop()}}),e)})))()},chon:function(t){this.currentNo=t,this.showConfirmDialog=!0}}},d=u,h=(n("8717"),n("2877")),p=n("9989"),m=n("ddd8"),g=n("27f9"),f=n("eb85"),v=n("f09f"),y=n("a370"),C=n("4b7e"),_=n("9c40"),b=n("24e8"),w=n("7f67"),q=n("eebe"),k=n.n(q),N=Object(h["a"])(d,a,s,!1,null,"e403535e",null);e["default"]=N.exports;k()(N,"components",{QPage:p["a"],QSelect:m["a"],QInput:g["a"],QSeparator:f["a"],QCard:v["a"],QCardSection:y["a"],QCardActions:C["a"],QBtn:_["a"],QDialog:b["a"]}),k()(N,"directives",{ClosePopup:w["a"]})},8717:function(t,e,n){"use strict";var a=n("2759"),s=n.n(a);s.a}}]);