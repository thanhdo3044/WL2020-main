(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[11],{0:function(e,t){},"077a":function(e,t,a){},"2cbc":function(e,t,a){"use strict";var n=a("077a"),r=a.n(n);r.a},4:function(e,t){},"43b0":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-page",[a("order-header",{attrs:{order:e.order}}),a("q-card",{staticClass:"my-card"},[a("MuaHang",{attrs:{order:e.order,metaValue:e.metaValue,disable:e.disable}})],1),a("div",{staticClass:"q-mt-sm q-mr-lg float-right"},[a("div",{},[void 0==e.order.Requests||e.order.Requests&&!Object.keys(e.order.Requests).length?a("q-checkbox",{attrs:{label:"Xác nhận thông tin"},model:{value:e.disable,callback:function(t){e.disable=t},expression:"disable"}}):e._e()],1)]),e.disable?a("order-approved",{staticStyle:{"margin-top":"50px"},attrs:{metaValue:e.metaValue,order:e.order}}):e._e(),a("send-message",{attrs:{order:e.order}})],1)},r=[],s=(a("8e6e"),a("8a81"),a("ac6a"),a("cadf"),a("06db"),a("456d"),a("f751"),a("9523")),o=a.n(s),l=a("2f62"),i=a("932a"),c=a("6664"),u=a("0ac8"),d=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-card-section",["Không được duyệt"==e.order.status?a("div",[a("div",{staticClass:"row q-mb-sm"},[a("q-input",{staticClass:"q-mt-sm q-pr-sm col",attrs:{outlined:"",label:"Tên tôi là : ",readonly:!e.disable},model:{value:e.userInfo.lastName,callback:function(t){e.$set(e.userInfo,"lastName",t)},expression:"userInfo.lastName"}}),a("q-input",{staticClass:"q-mt-sm col",attrs:{outlined:"",label:"Chức danh : ",readonly:e.disable},model:{value:e.userInfo.position,callback:function(t){e.$set(e.userInfo,"position",t)},expression:"userInfo.position"}}),a("q-input",{staticClass:"q-mt-sm q-pr-sm col",attrs:{outlined:"",label:"Phòng ban/bộ phận : ",readonly:!e.disable},model:{value:e.nameDepartmentName.NAME,callback:function(t){e.$set(e.nameDepartmentName,"NAME",t)},expression:"nameDepartmentName.NAME"}}),a("q-input",{staticClass:"q-mt-sm col",attrs:{filled:"",outlined:"",label:"SĐT : ",readonly:!e.disable},model:{value:e.userInfo.PHONE,callback:function(t){e.$set(e.userInfo,"PHONE",t)},expression:"userInfo.PHONE"}})],1),a("div",{staticClass:"row"},[a("q-input",{staticClass:"q-mt-sm col",attrs:{filled:"",outlined:"",label:"Mục đích sử dụng : ",readonly:e.disable},model:{value:e.order.intendedUse,callback:function(t){e.$set(e.order,"intendedUse",t)},expression:"order.intendedUse"}})],1),a("div",{},[a("q-table",{staticClass:"my-sticky-header-column-table",attrs:{title:"Treats",data:e.data,columns:e.columns,"row-key":"name"},on:{"row-click":e.click}})],1),a("div",{staticClass:"row q-mt-sm"},[a("div",{staticClass:"col-md-12"},[a("div",{staticClass:"large-12 medium-12 small-12 cell"},[a("label",[a("b",[e._v("Vui lòng ấn chọn file cần tải lên :")]),a("input",{ref:"file",staticClass:"q-ml-sm",attrs:{type:"file",id:"file"},on:{change:e.handleDrop}})])])])]),a("div",{staticClass:"row q-mt-sm"},[a("div",[a("table",{staticClass:"table table-striped table-hover table-condensed table-responsive"},[a("thead",[a("tr",e._l(e.state.headers,(function(t){return a("th",{staticClass:"q-pa-sm",staticStyle:{border:"1px solid #ccc"}},[e._v(e._s(t))])})),0)]),a("tbody",e._l(e.state.tickets,(function(t){return a("tr",{staticStyle:{border:"1px solid #ccc"}},e._l(t,(function(n){return a("td",{staticClass:"q-pa-sm",staticStyle:{border:"1px solid #ccc"}},[a("label",[e._v(e._s(n))]),a("p",[e._v(e._s(t.key))])])})),0)})),0),a("tfoot")])])]),a("q-btn",{staticClass:"q-mt-sm",attrs:{color:"primary","text-color":"white",label:"Sửa"},on:{click:e.updatedOrderMeta}})],1):a("div",[a("div",{attrs:{id:"app"}},[a("div",{staticClass:"container-responsive"})]),a("div",{staticClass:"row"}),a("div",{staticClass:"row q-mb-sm"},[a("q-input",{staticClass:"q-mt-sm q-pr-sm col",attrs:{outlined:"",label:"Tên tôi là : ",readonly:e.disable},model:{value:e.userInfo.lastName,callback:function(t){e.$set(e.userInfo,"lastName",t)},expression:"userInfo.lastName"}}),a("q-input",{staticClass:"q-mt-sm q-pr-sm col",attrs:{outlined:"",label:"Chức danh : ",readonly:e.disable},model:{value:e.userInfo.position,callback:function(t){e.$set(e.userInfo,"position",t)},expression:"userInfo.position"}}),a("q-input",{staticClass:"q-mt-sm q-pr-sm col",attrs:{outlined:"",label:"Phòng ban/bộ phận : ",readonly:e.disable},model:{value:e.nameDepartmentName.NAME,callback:function(t){e.$set(e.nameDepartmentName,"NAME",t)},expression:"nameDepartmentName.NAME"}}),a("q-input",{staticClass:"q-mt-sm col",attrs:{filled:"",outlined:"",label:"SĐT : ",readonly:!0},model:{value:e.userInfo.PHONE,callback:function(t){e.$set(e.userInfo,"PHONE",t)},expression:"userInfo.PHONE"}})],1),a("div",{staticClass:"row"},[a("q-input",{staticClass:" col q-mb-sm",attrs:{filled:"",outlined:"",label:"Mục đích sử dụng : ",readonly:e.disable},model:{value:e.order.intendedUse,callback:function(t){e.$set(e.order,"intendedUse",t)},expression:"order.intendedUse"}})],1),a("div",{},[a("q-table",{staticClass:"my-sticky-header-column-table bg-yellow-1",attrs:{title:"Nội dung đề xuất",data:e.data,columns:e.columns,"row-key":"name",separator:e.separator},on:{"row-click":e.click}})],1),a("div",{staticClass:"row q-mt-sm"},[a("div",{staticClass:"col-md-12"},[a("div",{staticClass:"large-12 medium-12 small-12 cell"},[a("label",{attrs:{disabled:e.disable}},[a("b",[e._v("Vui lòng ấn chọn file cần tải lên :")]),a("input",{ref:"file",staticClass:"q-ml-sm",attrs:{disabled:e.disable,type:"file",id:"file"},on:{change:e.handleDrop}})])])])]),a("div",{staticClass:"row q-mt-sm"},[a("div",[a("table",{staticClass:"table table-striped table-hover table-condensed table-responsive"},[a("thead",[a("tr",e._l(e.state.headers,(function(t){return a("th",{staticClass:"q-pa-sm",staticStyle:{border:"1px solid #ccc"}},[e._v(e._s(t))])})),0)]),a("tbody",e._l(e.state.tickets,(function(t){return a("tr",{staticStyle:{border:"1px solid #ccc"}},e._l(t,(function(n){return a("td",{staticClass:"q-pa-sm",staticStyle:{border:"1px solid #ccc"}},[a("label",[e._v(e._s(n))]),a("p",[e._v(e._s(t.key))])])})),0)})),0),a("tfoot")])])]),a("q-btn",{directives:[{name:"show",rawName:"v-show",value:!e.disable,expression:"!disable"}],staticClass:"q-mt-lg q-mb-sm float-right",staticStyle:{"z-index":"99"},attrs:{color:"primary","text-color":"white",label:"Thêm"},on:{click:e.initNewRow}})],1),a("q-dialog",{attrs:{persistent:"","transition-show":"rotate","transition-hide":"rotate","full-width":""},model:{value:e.activeFormAdd,callback:function(t){e.activeFormAdd=t},expression:"activeFormAdd"}},[a("q-card",[a("q-card-section",{staticClass:"bg-primary text-white text-h5"},[e._v("\n        Thêm dữ liệu\n      ")]),e._l(e.dataAddRow,(function(t,n){return a("q-card-section",{key:n,staticClass:"q-pt-none"},[a("div",{staticClass:"row"},[a("q-input",{staticClass:"q-mt-sm q-pl-sm q-pr-sm col-sm-2 col-12",attrs:{outlined:"",readonly:!0,label:"STT : "},model:{value:t.STT,callback:function(a){e.$set(t,"STT",a)},expression:"task.STT"}}),a("q-input",{staticClass:"q-mt-sm q-pl-sm q-pr-sm col-sm-2 col-12",attrs:{outlined:"",label:"Mã vật tư : "},on:{input:function(a){return e.selectMaVT(t)}},model:{value:t.maVT,callback:function(a){e.$set(t,"maVT",a)},expression:"task.maVT"}}),a("q-input",{staticClass:"q-mt-sm q-pl-sm q-pr-sm col-sm-2 col-12",attrs:{outlined:"",label:"Tên vật tư : "},model:{value:t.tenVT,callback:function(a){e.$set(t,"tenVT",a)},expression:"task.tenVT"}}),a("q-input",{staticClass:"q-mt-sm q-pl-sm q-pr-sm col-sm-2 col-12",attrs:{outlined:"",label:"Đơn vị tính : "},model:{value:t.donViTinh,callback:function(a){e.$set(t,"donViTinh",a)},expression:"task.donViTinh"}}),a("q-input",{staticClass:"q-mt-sm q-pl-sm q-pr-sm col-sm-2 col-12",attrs:{outlined:"",type:"number",placeholder:"Vui lòng nhập số",label:"Số lượng : "},model:{value:t.number,callback:function(a){e.$set(t,"number",a)},expression:"task.number"}}),a("q-input",{staticClass:"q-mt-sm q-pl-sm q-pr-sm col-sm-2 col-12",attrs:{outlined:"",label:"Yêu cầu kỹ thuật : "},model:{value:t.yeuCauKyThuat,callback:function(a){e.$set(t,"yeuCauKyThuat",a)},expression:"task.yeuCauKyThuat"}})],1)])})),a("q-card-actions",{attrs:{align:"right"}},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"bg-primary text-white",attrs:{flat:"",label:"Đồng ý",color:"primary"},on:{click:e.acceptAdd}})],1)],2)],1),a("q-dialog",{attrs:{"transition-show":"rotate","transition-hide":"rotate","full-width":""},model:{value:e.activeFormEdit,callback:function(t){e.activeFormEdit=t},expression:"activeFormEdit"}},[a("q-card",[a("q-card-section",{staticClass:"bg-primary text-white text-h5"},[e._v("\n        Sửa dữ liệu\n      ")]),a("q-card-section",{staticClass:"q-pt-none"},[a("div",{staticClass:"row"},[a("q-input",{staticClass:"q-mt-sm q-pl-sm q-pr-sm col-sm-2 col-12",attrs:{readonly:!0,outlined:"",label:"STT : "},model:{value:e.task.STT,callback:function(t){e.$set(e.task,"STT",t)},expression:"task.STT"}}),a("q-input",{staticClass:"q-mt-sm q-pl-sm q-pr-sm col-sm-2 col-12",attrs:{outlined:"",label:"Mã vật tư : "},model:{value:e.task.maVT,callback:function(t){e.$set(e.task,"maVT",t)},expression:"task.maVT"}}),a("q-input",{staticClass:"q-mt-sm q-pl-sm q-pr-sm col-sm-2 col-12",attrs:{outlined:"",label:"Tên vật tư : "},model:{value:e.task.tenVT,callback:function(t){e.$set(e.task,"tenVT",t)},expression:"task.tenVT"}}),a("q-input",{staticClass:"q-mt-sm q-pl-sm q-pr-sm col-sm-2 col-12",attrs:{outlined:"",label:"Đơn vị tính : "},model:{value:e.task.donViTinh,callback:function(t){e.$set(e.task,"donViTinh",t)},expression:"task.donViTinh"}}),a("q-input",{staticClass:"q-mt-sm q-pl-sm q-pr-sm col-sm-2 col-12",attrs:{outlined:"",type:"number",placeholder:"Vui lòng nhập số",label:"Số lượng : "},model:{value:e.task.number,callback:function(t){e.$set(e.task,"number",t)},expression:"task.number"}}),a("q-input",{staticClass:"q-mt-sm q-pl-sm q-pr-sm col-sm-2 col-12",attrs:{outlined:"",label:"Yêu cầu kỹ thuật : "},model:{value:e.task.yeuCauKyThuat,callback:function(t){e.$set(e.task,"yeuCauKyThuat",t)},expression:"task.yeuCauKyThuat"}})],1)]),a("q-card-actions",{attrs:{align:"right"}},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"bg-red text-white",attrs:{flat:"",label:"Xóa",color:"primary"},on:{click:e.deleted}}),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"bg-primary text-white",attrs:{flat:"",id:"activeFormEdit",label:"Sửa",color:"primary"},on:{click:e.acceptEdit}})],1)],1)],1)],1)},m=[],p=(a("6b54"),a("7f7f"),a("34ef"),a("a34a")),f=a.n(p),h=(a("96cf"),a("c973")),b=a.n(h),g=a("bc3a"),v=a.n(g),q=a("2a19"),T=(a("f508"),a("d9b2"),a("1146")),y=a.n(T);function k(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function w(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?k(Object(a),!0).forEach((function(t){o()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):k(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var x={props:["metaValue","disable","order"],created:function(){var e=this;return b()(f.a.mark((function t(){return f.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.state={tickets:[{}],headers:[]},t.next=3,e.GET_DEPARTMENTSBYID(e.userInfo.department);case 3:e.nameDepartmentName=t.sent,console.log("this.nameDepartmentName",e.nameDepartmentName.NAME),e.status=e.$route.query.status,e.loadData(e.$route.query.id),console.log("status",e.status),console.log("dsCongDoans",e.dsCongDoans),console.log("userInfo",e.userInfo),console.log("priorityLevel2",e.priorityLevel2),console.log("computerEquipment2",e.computerEquipment2),e.priorityLevel2=e.order.priorityLevel,e.computerEquipment2=e.order.computerEquipment,console.log("priorityLevel2",e.priorityLevel2),console.log("computerEquipment2",e.computerEquipment2);case 16:case"end":return t.stop()}}),t)})))()},data:function(){return{file:"",uploadPercentage:0,state:null,disabledToggle:!1,computerEquipment2:null,priorityLevel2:null,separator:"cell",selected:[],events:[],nameDepartment:{},status:"",phoneNumber:"",nameDepartmentName:null,dataAddRow:[],activeFormAdd:!1,activeFormEdit:!1,intendedUse:"",task:{maVT:null,tenVT:null,yeuCauKyThuat:null,mucDichSuDung:null,number:null,donViTinh:null,id:null,STT:null},columns:[{name:"STT",required:!0,label:"STT",align:"left",field:function(e){return null==e.STT?"":e.STT},format:function(e){return"".concat(e)},sortable:!0},{name:"maVT",required:!0,label:"Mã vật tư",align:"left",field:function(e){return null==e.maVT?"":e.maVT},format:function(e){return"".concat(e)},sortable:!0},{name:"tenVT",required:!0,label:"Tên vật tư",align:"left",field:function(e){return null==e.tenVT?"":e.tenVT},format:function(e){return"".concat(e)},sortable:!0},{name:"Số lượng",required:!0,label:"Số lượng",align:"left",field:function(e){return null==e.number?"":e.number},format:function(e){return"".concat(e)},sortable:!0},{name:"Đơn vị",required:!0,label:"Đơn vị",align:"left",field:function(e){return null==e.donViTinh?"":e.donViTinh},format:function(e){return"".concat(e)},sortable:!0},{name:"Yêu cầu kỹ thuật",required:!0,label:"Yêu cầu kỹ thuật",align:"left",field:function(e){return null==e.yeuCauKyThuat?"":e.yeuCauKyThuat},format:function(e){return"".concat(e)},sortable:!0},{name:"Trạng thái phê duyệt",required:!0,label:"Trạng thái phê duyệt",align:"left",text:"red",field:function(e){return null==e.statusRequests?"":e.statusRequests},format:function(e){return"".concat(e)},sortable:!0}],data:[],resultData:[]}},computed:w(w({},Object(l["c"])("orders",["order"])),Object(l["c"])("base",["userInfo","dsCongDoans"])),watch:{selected:function(e,t){console.log("selected",this.selected),console.log("oldValue",t),console.log("newValue",e)}},methods:w(w(w(w(w({},Object(l["b"])("base",["GET_DEPARTMENTSBYID"])),Object(l["b"])("orders",["getOneOrder","getAllRequests","confirmPriorityLevel","confirmComputerEquipment","updOrder","getMaVT"])),Object(l["b"])("orderMetas",["getOneOrderMeta",,"addMulRow","addorderMeta","deleteOrderMeta","updateOrderMeta"])),Object(l["b"])("requests",["deleteRequest","resetOrder"])),{},{handleFileUpload:function(){this.file=this.$refs.file.files[0],console.log("this.file",this.file)},submitFile:function(){var e=new FormData;e.append("file",this.file)},get_header_row:function(e){var t,a=[],n=y.a.utils.decode_range(e["!ref"]),r=n.s.r;for(t=n.s.c;t<=n.e.c;++t){var s=e[y.a.utils.encode_cell({c:t,r:r})],o="UNKNOWN "+t;s&&s.t&&(o=y.a.utils.format_cell(s)),a.push(o)}return a},fixdata:function(e){for(var t="",a=0,n=10240;a<e.byteLength/n;++a)t+=String.fromCharCode.apply(null,new Uint8Array(e.slice(a*n,a*n+n)));return t+=String.fromCharCode.apply(null,new Uint8Array(e.slice(a*n))),t},workbook_to_json:function(e){var t={};return e.SheetNames.forEach((function(a){var n=y.a.utils.sheet_to_row_object_array(e.Sheets[a]);n.length>0&&(t[a]=n)})),t},handleDrop:function(e){var t=this;return b()(f.a.mark((function a(){var n,r,s,o,l;return f.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(null!=t.order.intendedUse){for(e.stopPropagation(),e.preventDefault(),console.log("DROPPED"),console.log("file",e),t.file=t.$refs.file.files[0],console.log("files",n),console.log("this.files",t.file),o=function(){l=new FileReader,s.name;var e=[];t.resultData=[],l.onload=function(){var a=b()(f.a.mark((function a(n){var r,s,o,l,i;return f.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r=n.target.result,a.next=3,t.fixdata(r);case 3:return s=a.sent,o=y.a.read(btoa(s),{type:"base64"}),l=o.SheetNames[0],i=o.Sheets[l],t.state.headers=t.get_header_row(i),e=y.a.utils.sheet_to_json(i),console.log("results",e),a.next=12,e.forEach((function(e){t.resultData.push({STT:e.STT,tenVT:e.TenVT,maVT:e.MaVT,number:e.SoLuong,donViTinh:e.DVT,yeuCauKyThuat:e.YeuCauKyThuat,orderId:t.$route.query.id,fullName:t.userInfo.lastName,department:t.nameDepartmentName.NAME.toString(),phoneNumber:null==t.userInfo.PHONE?" ":t.userInfo.PHONE,position:t.userInfo.position,mucDichSuDung:e.mucDichSuDung})}));case 12:t.state.tickets=e,t.file="";case 14:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),l.readAsArrayBuffer(s)},r=0,s=t.file;r<1;++r)o();console.log("state",t.resultData)}else q["a"].create({message:"Vui lòng nhập thông tin mục đích sử dụng !",color:"red"}),t.loadData(t.$route.query.id);case 1:case"end":return a.stop()}}),a)})))()},selectMaVT:function(e){var t=this;return b()(f.a.mark((function a(){var n,r;return f.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return console.log("serach",e),n={ma_vt:e.maVT},a.next=4,t.getMaVT(n);case 4:r=a.sent,console.log("this.dataAddRow",t.dataAddRow),t.dataAddRow.forEach((function(t){e.STT==t.STT&&(t.tenVT="",t.donViTinh="",t.tenVT=r.data.data[0].ten_vt,t.donViTinh=r.data.data[0].dvt)})),console.log("data2",r.data.data);case 8:case"end":return a.stop()}}),a)})))()},handleDragover:function(e){e.stopPropagation(),e.preventDefault(),e.dataTransfer.dropEffect="copy"},confimPriorityLevel:function(e,t){var a=this;return b()(f.a.mark((function n(){var r,s;return f.a.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(console.log(e),console.log(t),r={id:a.$route.query.id,priorityLevel:e?1:0},!(a.order.Requests.length>0)){n.next=8;break}a.disabledToggle=!0,q["a"].create({message:"Không được sửa vì đã gửi đi chờ xem xét !",color:"orange"}),n.next=14;break;case 8:return n.next=10,a.confirmPriorityLevel(r);case 10:return s=n.sent,n.next=13,a.loadData(a.$route.query.id);case 13:console.log("dataconfimlevel",s);case 14:case"end":return n.stop()}}),n)})))()},confimComputerEquipment:function(e,t){var a=this;return b()(f.a.mark((function t(){var n;return f.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log(e),n={id:a.$route.query.id,computerEquipment:e?1:0},t.next=4,a.confirmComputerEquipment(n);case 4:return t.sent,t.next=7,a.loadData(a.$route.query.id);case 7:case"end":return t.stop()}}),t)})))()},click:function(e,t,a){console.log("evt",e),console.log("row",t),console.log("index",a),this.task.tenVT=t.tenVT,this.task.maVT=t.maVT,this.task.yeuCauKyThuat=t.yeuCauKyThuat,this.task.mucDichSuDung=t.mucDichSuDung,this.task.number=t.number,this.task.donViTinh=t.donViTinh,this.task.STT=t.STT,this.task.id=t.id,"Hủy"==t.statusRequests?this.activeFormEdit=!0:this.order.Requests.length>0&&"Xem xét"==t.statusRequests?q["a"].create({message:"Không được sửa vì đã gửi đi chờ xem xét !",color:"orange"}):0==this.order.Requests.length&&"Xem xét"==t.statusRequests?this.activeFormEdit=!0:q["a"].create({message:"Không được chỉnh sửa do đã được phê duyệt !",color:"blue"})},deleted:function(){var e=this;return b()(f.a.mark((function t(){return f.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.deleteOrderMeta(e.task.id);case 2:return t.next=4,e.loadData(e.$route.query.id);case 4:case"end":return t.stop()}}),t)})))()},acceptEdit:function(){var e=this;return b()(f.a.mark((function t(){var a,n,r,s,o,l,i,c,u,d,m;return f.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e.task.maVT,n=e.task.tenVT,r=e.task.yeuCauKyThuat,s=e.userInfo.lastName,o=e.task.number,l=null==e.userInfo.PHONE?" ":e.userInfo.PHONE,i=e.task.donViTinh,c=e.task.id,u=e.task.STT,d=e.nameDepartmentName.NAME.toString(),t.next=12,e.updateOrderMeta(w(w({},e.order.OrderMeta[0]),{},{metaValue:JSON.stringify([e.metaValue]),maVT:a,tenVT:n,fullName:s,yeuCauKyThuat:r,number:o,donViTinh:i,phoneNumber:l,department:d,STT:u,id:c}));case 12:return m={id:e.$route.query.id,intendedUse:e.order.intendedUse},t.next=15,e.updOrder(m);case 15:return t.next=17,e.loadData(e.$route.query.id);case 17:case"end":return t.stop()}}),t)})))()},acceptAdd:function(){var e=this;return b()(f.a.mark((function t(){var a,n,r,s;return f.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(console.log("state",e.resultData),!(e.resultData.length>0)){t.next=6;break}return t.next=4,e.addMulRow(e.resultData);case 4:a=t.sent,a?(e.state={tickets:[{}],headers:[]},e.resultData=[]):q["a"].create({message:"Xảy ra lỗi khi insert dữ liệu kiểm tra lại dữ liệu file!",color:"red"});case 6:if(console.log("dataaAdd",e.dataAddRow.filter((function(e){return e.maVT}))),null==e.order.intendedUse){t.next=21;break}return t.next=10,e.dataAddRow.filter((function(e){return null!=e.tenVT||null!=e.number||null!=e.donViTinh||null!=e.yeuCauKyThuat}));case 10:return n=t.sent,t.next=13,e.addMulRow(n);case 13:return r=t.sent,s={id:e.$route.query.id,intendedUse:e.order.intendedUse},t.next=17,e.updOrder(s);case 17:console.log("result",r),e.loadData(e.$route.query.id),t.next=23;break;case 21:q["a"].create({message:"Vui lòng nhập thông tin mục đích sử dụng !",color:"red"}),e.loadData(e.$route.query.id);case 23:case"end":return t.stop()}}),t)})))()},cancel:function(){var e=this;return b()(f.a.mark((function t(){return f.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:console.log("dataaAdd",e.dataAddRow),e.dataAddRow=[];case 2:case"end":return t.stop()}}),t)})))()},loadData:function(e){var t=this;return b()(f.a.mark((function a(){var n;return f.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return n=null,a.prev=1,a.next=4,t.getOneOrder(e);case 4:n=a.sent,a.next=10;break;case 7:a.prev=7,a.t0=a["catch"](1),console.log(a.t0);case 10:return n||t.$router.push({path:"/tao-de-xuat"}),t.order=n.data.data,a.next=14,n.data.data.OrderMeta.filter((function(e){return e.STT})).sort((function(e,t){return e.STT-t.STT}));case 14:t.data=a.sent,console.log("data",t.data);case 16:case"end":return a.stop()}}),a,null,[[1,7]])})))()},updatedOrderMeta:function(){var e=this;return b()(f.a.mark((function t(){var a,n,r,s;return f.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e.userInfo.lastName,n=null==e.userInfo.PHONE?" ":e.userInfo.PHONE,r=e.metaValue.selection,s=e.nameDepartmentName.NAME.toString(),e.updateOrderMeta(w(w({},e.order.OrderMeta[0]),{},{metaValue:JSON.stringify([e.metaValue]),fullName:a,phoneNumber:n,selection:r,department:s})),t.next=7,v.a.put("/api/v2/orders?orderId=".concat(e.order.id));case 7:return t.next=9,e.deleteRequest(e.order.id);case 9:location.reload();case 10:case"end":return t.stop()}}),t)})))()},initNewRow:function(){var e=this;return b()(f.a.mark((function t(){var a;return f.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(null==e.order.intendedUse){t.next=20;break}console.log("abc"),e.dataAddRow=[],a=0;case 4:if(!(a<5)){t.next=10;break}return t.next=7,e.dataAddRow.push({STT:++e.order.OrderMeta.length-1,fullName:e.userInfo.lastName,department:e.nameDepartmentName.NAME.toString(),phoneNumber:null==e.userInfo.PHONE?" ":e.userInfo.PHONE,position:e.userInfo.position,tenVT:null,maVT:null,number:null,donViTinh:null,yeuCauKyThuat:null,orderId:e.$route.query.id});case 7:a++,t.next=4;break;case 10:if(console.log("this.dataAddRow",e.dataAddRow),!(e.resultData.length>0)){t.next=17;break}return t.next=14,e.acceptAdd();case 14:e.dataAddRow=[],t.next=18;break;case 17:e.activeFormAdd=!0;case 18:t.next=22;break;case 20:q["a"].create({message:"Vui lòng nhập thông tin mục đích sử dụng !",color:"red"}),e.loadData(e.$route.query.id);case 22:case"end":return t.stop()}}),t)})))()}})},O=x,C=(a("2cbc"),a("2877")),V=a("a370"),N=a("27f9"),D=a("eaac"),S=a("9c40"),E=a("24e8"),I=a("f09f"),M=a("4b7e"),_=a("7f67"),P=a("eebe"),$=a.n(P),A=Object(C["a"])(O,d,m,!1,null,null,null),R=A.exports;function j(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function K(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?j(Object(a),!0).forEach((function(t){o()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):j(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}$()(A,"components",{QCardSection:V["a"],QInput:N["a"],QTable:D["a"],QBtn:S["a"],QDialog:E["a"],QCard:I["a"],QCardActions:M["a"]}),$()(A,"directives",{ClosePopup:_["a"]});var H={data:function(){return{disable:!1,metaValue:{kinhGui:"Ban TGĐ - Trưởng phòng/phó phòng ban :  -\tGĐSX/Phó GĐSX/Phụ trách nhà máy :",noiDungTT:"",soTien:0,vietBangChu:"",kemTheo:"",STT:"12",locationWork:"",position:"",position2:"",number:"",timeRecruit:"",description:"",fullName:"",fullName2:"",maNV:"",department:"",department2:"",stepDepartment:"",lyDo:"",dateStart:"",dateEnd:"",selection1:null,selection2:null,selection3:null,selection4:null,selection:null,thoiGianMangThai:"",xinRaCong:"",luongHienTai:"",luongDeXuat:"",thoiGianTangLuongGanNhat:"",phoneNumber:""}}},components:{SendMessage:i["a"],OrderHeader:c["a"],OrderApproved:u["a"],MuaHang:R},methods:K(K({},Object(l["b"])("orders",["getOneOrder","getAllRequests"])),Object(l["b"])("orderMetas",["getOneOrderMeta","addorderMeta"])),computed:K(K({},Object(l["c"])("orders",["order"])),Object(l["c"])("base",["userInfo","myFactoryInfor"])),created:function(){var e=this;this.metaValue.fullName=this.userInfo.lastName,this.metaValue.position=this.userInfo.position,this.metaValue.phoneNumber=this.userInfo.PHONE,this.metaValue.maNV=this.userInfo.id;this.$route.query.status;console.log("status",this.status),this.$route.query.id?this.getOneOrder(this.$route.query.id).then((function(t){t.data.data.Requests.length&&(e.disable=!0),e.metaValue=Object.assign(e.metaValue,JSON.parse(t.data.data.OrderMeta[0].metaValue)[0])})):this.$router.push({path:"/tao-de-xuat"})}},U=H,F=a("9989"),L=a("8f8e"),Q=Object(C["a"])(U,n,r,!1,null,null,null);t["default"]=Q.exports;$()(Q,"components",{QPage:F["a"],QCard:I["a"],QCheckbox:L["a"]})},5:function(e,t){}}]);