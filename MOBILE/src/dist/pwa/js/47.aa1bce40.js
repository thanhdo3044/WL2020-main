(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[47],{"210e":function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"row q-mb-sm"},[r("q-input",{attrs:{outlined:"",label:"Due date",value:e.dueDate},on:{input:function(t){return e.$emit("update:dueDate",t)}},scopedSlots:e._u([{key:"append",fn:function(){return[e.dueDate?r("q-icon",{staticClass:"cursor-pointer",attrs:{name:"close"},on:{click:function(t){return e.$emit("clear")}}}):e._e(),r("q-icon",{staticClass:"cursor-pointer",attrs:{name:"event"}},[r("q-popup-proxy",[r("q-date",{attrs:{value:e.dueDate},on:{input:function(t){return e.$emit("update:dueDate",t)}}})],1)],1)]},proxy:!0}])})],1)},a=[],o={props:["dueDate"]},s=o,i=r("2877"),d=r("27f9"),c=r("0016"),u=r("7cbe"),l=r("52ee"),m=r("eebe"),p=r.n(m),b=Object(i["a"])(s,n,a,!1,null,null,null);t["default"]=b.exports;p()(b,"components",{QInput:d["a"],QIcon:c["a"],QPopupProxy:u["a"],QDate:l["a"]})},"5be2":function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"row q-mb-sm"},[r("q-input",{ref:"name",staticClass:"col",attrs:{outlined:"",value:e.name,rules:[function(e){return!!e||"Field is required"}],autofocus:"",label:"Tên mặt hàng"},on:{input:function(t){return e.$emit("update:name",t)}},scopedSlots:e._u([{key:"append",fn:function(){return[e.name?r("q-icon",{staticClass:"cursor-pointer",attrs:{name:"close"},on:{click:function(t){return e.$emit("update:name","")}}}):e._e()]},proxy:!0}])})],1)},a=[],o={props:["name"]},s=o,i=r("2877"),d=r("27f9"),c=r("0016"),u=r("eebe"),l=r.n(u),m=Object(i["a"])(s,n,a,!1,null,null,null);t["default"]=m.exports;l()(m,"components",{QInput:d["a"],QIcon:c["a"]})},9501:function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("q-page",[r("order-header",{attrs:{order:e.order}}),r("order-lines-todo",{attrs:{orderLines:e.orderLines}}),e.order.Requests&&!Object.keys(e.order.Requests).length?r("q-checkbox",{attrs:{label:"Đồng ý"},model:{value:e.disable,callback:function(t){e.disable=t},expression:"disable"}}):e._e(),e.disable?r("order-approved",{attrs:{order:e.order}}):e._e(),r("send-message",{attrs:{order:e.order}}),e.order.Requests&&!Object.keys(e.order.Requests).length?r("div",{staticClass:"absolute-bottom-right text-center q-mb-lg"},[r("q-btn",{attrs:{round:"",color:"primary",size:"24px",icon:"add"},on:{click:e.addTask}})],1):e._e(),r("q-dialog",{model:{value:e.showAddTask,callback:function(t){e.showAddTask=t},expression:"showAddTask"}},[r("add-order-line",{attrs:{orderMeta:e.orderMeta},on:{close:function(t){e.showAddTask=!1}}})],1)],1)},a=[],o=(r("8e6e"),r("8a81"),r("ac6a"),r("cadf"),r("06db"),r("456d"),r("9523")),s=r.n(o),i=r("2f62"),d=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("q-card",[r("modal-header",[e._v("Thêm mặt hàng đề xuất")]),r("form",{on:{submit:function(t){return t.preventDefault(),e.submitForm(t)}}},[r("q-card-section",[r("modal-task-name",{ref:"modalTaskName",attrs:{name:e.orderLineToSubmit.name},on:{"update:name":function(t){return e.$set(e.orderLineToSubmit,"name",t)}}}),r("q-input",{attrs:{outlined:"",label:"Mã VT"},model:{value:e.orderLineToSubmit.quyCach,callback:function(t){e.$set(e.orderLineToSubmit,"quyCach",t)},expression:"orderLineToSubmit.quyCach"}}),r("q-input",{attrs:{outlined:"",label:"ĐVT"},model:{value:e.orderLineToSubmit.unitId,callback:function(t){e.$set(e.orderLineToSubmit,"unitId",t)},expression:"orderLineToSubmit.unitId"}}),r("q-input",{attrs:{outlined:"",label:"SL"},model:{value:e.orderLineToSubmit.quantity,callback:function(t){e.$set(e.orderLineToSubmit,"quantity",t)},expression:"orderLineToSubmit.quantity"}}),r("q-input",{attrs:{outlined:"",label:"Mục đích sử dụng"},model:{value:e.orderLineToSubmit.mucDichSuDung,callback:function(t){e.$set(e.orderLineToSubmit,"mucDichSuDung",t)},expression:"orderLineToSubmit.mucDichSuDung"}}),r("q-input",{staticClass:"q-mt-sm",attrs:{label:" Ngày kết thúc phiếu : ",filled:"",readonly:e.disable},scopedSlots:e._u([{key:"prepend",fn:function(){return[r("q-icon",{staticClass:"cursor-pointer",attrs:{name:"event"}},[r("q-popup-proxy",{attrs:{"transition-show":"scale","transition-hide":"scale"}},[r("q-date",{attrs:{mask:"YYYY-MM-DD HH:mm",disable:e.disable},model:{value:e.orderLineToSubmit.finishedAt,callback:function(t){e.$set(e.orderLineToSubmit,"finishedAt",t)},expression:"orderLineToSubmit.finishedAt"}},[r("div",{staticClass:"row items-center justify-end"},[r("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Close",color:"primary",flat:""}})],1)])],1)],1)]},proxy:!0},{key:"append",fn:function(){return[r("q-icon",{staticClass:"cursor-pointer",attrs:{name:"access_time"}},[r("q-popup-proxy",{attrs:{"transition-show":"scale","transition-hide":"scale"}},[r("q-time",{attrs:{mask:"YYYY-MM-DD HH:mm",format24h:"",disable:e.disable},model:{value:e.orderLineToSubmit.finishedAt,callback:function(t){e.$set(e.orderLineToSubmit,"finishedAt",t)},expression:"orderLineToSubmit.finishedAt"}},[r("div",{staticClass:"row items-center justify-end"},[r("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Close",color:"primary",flat:""}})],1)])],1)],1)]},proxy:!0}]),model:{value:e.orderLineToSubmit.finishedAt,callback:function(t){e.$set(e.orderLineToSubmit,"finishedAt",t)},expression:"orderLineToSubmit.finishedAt"}})],1),r("modal-buttons")],1)],1)},c=[],u=r("448a"),l=r.n(u),m=(r("7f7f"),r("1732"));function p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function b(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?p(Object(r),!0).forEach((function(t){s()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var f={data:function(){return{orderLineToSubmit:{id:Object(m["a"])(),name:"TEST",origin:"TQ",unitId:"C",quantity:0,title:"Lý do mua",finishedAt:"",quyCach:"",mucDichSuDung:""}}},props:["orderLine"],computed:b(b(b(b({},Object(i["c"])("base",["userInfo"])),Object(i["c"])("orders",["order"])),Object(i["c"])("orderMetas",["orderMeta"])),{},{orderLines:function(){var e=[];return this.orderMeta&&this.orderMeta.metaValue&&(e=JSON.parse(this.orderMeta.metaValue)),console.log(e),e}}),methods:b(b({},Object(i["b"])("orderMetas",["addorderMeta"])),{},{submitForm:function(){this.$refs.modalTaskName.$refs.name.validate(),this.$refs.modalTaskName.$refs.name.hasError||this.submitTask()},submitTask:function(){var e=[].concat(l()(this.orderLines),[b(b({},this.orderLineToSubmit),{},{userId:this.userInfo.account,orderId:this.order.id,costcenterId:this.order.id,companyId:this.order.id})]);this.addorderMeta(b(b({},this.orderMeta),{},{metaValue:JSON.stringify(e)})),this.$emit("close")},clearDueDate:function(){this.orderLineToSubmit.finishedAt=""}}),components:{"modal-header":r("a07c").default,"modal-task-name":r("5be2").default,"modal-due-date":r("210e").default,"modal-buttons":r("cdf1").default}},h=f,v=r("2877"),O=r("f09f"),g=r("a370"),y=r("27f9"),T=r("0016"),q=r("7cbe"),k=r("52ee"),x=r("9c40"),_=r("ca78"),L=r("7f67"),S=r("eebe"),j=r.n(S),C=Object(v["a"])(h,d,c,!1,null,null,null),w=C.exports;j()(C,"components",{QCard:O["a"],QCardSection:g["a"],QInput:y["a"],QIcon:T["a"],QPopupProxy:q["a"],QDate:k["a"],QBtn:x["a"],QTime:_["a"]}),j()(C,"directives",{ClosePopup:L["a"]});var D=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("q-card",{staticClass:"my-card"},[e.orderLines||e.orderLines.length?r("q-markup-table",[r("thead",[r("tr",[r("th",{staticClass:"text-left"},[e._v("TT")]),r("th",{staticClass:"text-right"},[e._v("Tên mặt hàng")]),r("th",{staticClass:"text-right"},[e._v("Xuất xứ")]),r("th",{staticClass:"text-right"},[e._v("ĐVT")]),r("th",{staticClass:"text-right"},[e._v("SL")]),r("th",{staticClass:"text-right"},[e._v("Yêu cầu kỹ thuật")]),r("th",{staticClass:"text-right"},[e._v("Thời gian cung cấp")]),r("th",{staticClass:"text-right"},[e._v("Lý do yêu cầu")])])]),r("tbody",e._l(e.orderLines,(function(t,n){return r("tr",{key:t.id},[r("td",{staticClass:"text-left"},[e._v(e._s(n+1))]),r("td",{staticClass:"text-right"},[e._v(e._s(t.name))]),r("td",{staticClass:"text-right"},[e._v(e._s(t.origin))]),r("td",{staticClass:"text-right"},[e._v(e._s(t.unitId.trim()))]),r("td",{staticClass:"text-right"},[e._v(e._s(t.quantity))]),r("td",{staticClass:"text-right"},[e._v(e._s(t.title))]),r("td",{staticClass:"text-right"},[e._v(e._s(e._f("ngay")(t.finishedAt)))]),r("td",{staticClass:"text-right"},[e._v(e._s(t.note))])])})),0)]):r("no-order-lines")],1)},$=[],M=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("q-banner",{staticClass:"bg-grey-3",scopedSlots:e._u([{key:"avatar",fn:function(){return[r("q-icon",{attrs:{name:"check",color:"primary"}})]},proxy:!0},{key:"action",fn:function(){return[r("q-btn",{attrs:{flat:"",color:"primary",label:"Thêm mặt hàng đề xuất"},on:{click:function(t){return e.$root.$emit("showAddOrderLine")}}})]},proxy:!0}])},[e._v("\n  Không có mặt hàng đề xuất!\n  ")])},I=[],A={},Q=A,P=r("54e1"),E=Object(v["a"])(Q,M,I,!1,null,null,null),N=E.exports;j()(E,"components",{QBanner:P["a"],QIcon:T["a"],QBtn:x["a"]});var Y={props:["orderLines"],components:{NoOrderLines:N}},V=Y,R=r("2bb1"),H=Object(v["a"])(V,D,$,!1,null,null,null),J=H.exports;j()(H,"components",{QCard:O["a"],QMarkupTable:R["a"]});var B=r("932a"),F=r("6664"),z=r("0ac8");function K(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function X(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?K(Object(r),!0).forEach((function(t){s()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):K(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var G={data:function(){return{disable:!1,showAddTask:!1}},computed:X(X(X(X(X({},Object(i["c"])("orders",["order"])),Object(i["c"])("base",["userInfo"])),Object(i["c"])("messages",["messages"])),Object(i["c"])("orderMetas",["orderMeta"])),{},{orderLines:function(){var e=[];return this.orderMeta&&this.orderMeta.metaValue&&(e=JSON.parse(this.orderMeta.metaValue)),console.log(e),e}}),methods:X(X(X({},Object(i["b"])("orders",["getOneOrder","addMessage","getAllRequests","sendToApproved"])),Object(i["b"])("orderMetas",["selectOrderMeta","addorderMeta","resetOrderLine"])),{},{addTask:function(){this.showAddTask=!0,this.resetOrderLine({userId:this.userInfo.account,orderId:this.order.id,costcenterId:this.order.id,companyId:this.order.id})}}),created:function(){var e=this;this.$route.query.id?this.getOneOrder(this.$route.query.id).then((function(t){e.selectOrderMeta(t.data.data.OrderMeta[0]),t.data.data.Requests.length&&(e.disable=!0)})):this.$router.push({path:"/tao-de-xuat"})},mounted:function(){var e=this;this.$root.$on("showAddOrderLine",(function(){e.showAddTask=!0,e.resetOrderLine({userId:e.userInfo.account,orderId:e.order.id,costcenterId:e.order.id,companyId:e.order.id,origin:"Trung quốc"})}))},components:{AddOrderLine:w,SendMessage:B["a"],OrderHeader:F["a"],OrderApproved:z["a"],OrderLinesTodo:J}},U=G,W=r("9989"),Z=r("8f8e"),ee=r("24e8"),te=Object(v["a"])(U,n,a,!1,null,null,null);t["default"]=te.exports;j()(te,"components",{QPage:W["a"],QCheckbox:Z["a"],QBtn:x["a"],QDialog:ee["a"]})}}]);