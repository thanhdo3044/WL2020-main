(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[38],{"097c":function(t,e,a){},"2b89":function(t,e,a){"use strict";var s=a("097c"),i=a.n(s);i.a},"2dd4":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-page",{staticClass:"q-pa-md"},[a("div",{staticClass:"row justify-center"},[a("div",{staticClass:"col-12 col-sm-6 q-mt-sm"},[a("q-card",[a("q-card-section",[a("div",{staticClass:"prodTextTitle"},[t._v("Thông tin chính phẩm")])]),a("q-card-section",[a("p",{staticClass:"woodText"},[t._v("- Loại gỗ : "+t._s(t.receipt?t.receipt.WOOD_TYPE:"..."))]),a("p",{staticClass:"woodText"},[t._v("- Tổng số tấm : "+t._s(t.receipt?t.receipt.PCS_PER_PACKAGE*t.receipt.PACKAGE_QUANTITY:"..."))]),a("p",{staticClass:"woodText"},[t._v("- Tổng khối lượng : "+t._s(t.receipt?t.receipt.VOLUMN:"...")+" (m³)")]),a("p",{staticClass:"woodText",staticStyle:{"font-weight":"800","text-align":"center"}},[t._v(t._s(t.receipt?t.receipt.HEIGHT:"")+"*"+t._s(t.receipt?t.receipt.WIDTH:"")+"*"+t._s(t.receipt?t.receipt.LENGTH:""))])])],1)],1)]),a("div",{staticClass:"row justify-center q-mt-sm"},[a("div",{staticClass:"col-12 col-sm-6"},[a("q-input",{attrs:{outlined:"",type:"number",label:"Số tờ mẫu"},model:{value:t.sampleQty,callback:function(e){t.sampleQty=t._n(e)},expression:"sampleQty"}})],1)]),a("div",{staticClass:"row justify-center q-mt-sm"},[a("div",{staticClass:"col-12 col-sm-6"},[a("q-input",{attrs:{outlined:"",label:"Tỷ lệ A1",suffix:"%"},model:{value:t.rateA1,callback:function(e){t.rateA1=e},expression:"rateA1"}})],1)]),a("div",{staticClass:"row justify-center q-mt-sm"},[a("div",{staticClass:"col-12 col-sm-6"},[a("q-input",{attrs:{outlined:"",suffix:"%",label:"Độ ẩm",rules:[function(t){return!!t||"Field is required"}]},model:{value:t.humidity,callback:function(e){t.humidity=e},expression:"humidity"}})],1)]),a("div",{staticClass:"row justify-center q-mt-sm"},[a("div",{staticClass:"col-12 col-sm-6"},[a("q-input",{attrs:{outlined:"",type:"textarea",label:"Ghi chú",placeholder:"Lẫn keo + tạp màu 2%"},model:{value:t.note,callback:function(e){t.note=e},expression:"note"}})],1)]),a("div",{staticClass:"row justify-center"},[a("div",{staticClass:"col-12 col-sm-6",attrs:{align:"right"}},[a("span",{staticClass:"fake-link",on:{click:function(e){t.showAdd=!0}}},[t._v("Thêm")])])]),a("div",{staticClass:"row justify-center q-mt-sm"},[a("div",{staticClass:"col-12 col-sm-6"},[a("table",{staticStyle:{width:"100%"}},[a("tr",[a("th",[t._v("Phân loại")]),a("th",[t._v("Kích thước")]),a("th",[t._v("Tình trạng")]),a("th",[t._v("Số lượng")]),a("th",[t._v("Tỷ lệ (%)")]),a("td")]),0===t.arrayData.length?a("tr",{staticStyle:{"text-align":"center"}},[a("td",{attrs:{colspan:"6"}},[a("span",{staticClass:"fake-link",on:{click:function(e){t.showAdd=!0}}},[t._v("Nhấn để thêm dữ liêu !")])])]):t._l(t.arrayData,(function(e,s){return a("tr",{key:s},[a("td",[t._v(t._s(e.ITYPE_NAME))]),a("td",[t._v(t._s(e.ITEM_NAME))]),a("td",[t._v(t._s(e.DTYPE_NAME))]),a("td",{staticStyle:{"text-align":"center"}},[t._v(t._s(e.DEFECT_QTY))]),a("td",{staticStyle:{"text-align":"center"}},[t._v(t._s(e.DEFECT_QTY>0?100*(e.DEFECT_QTY/t.receipt.SAMPLE_QTY).toFixed(4):100*e.PAY_RATE.toFixed(4)))]),a("td",[a("span",{staticClass:"fake-link",on:{click:function(a){return t.removeArray(s,e.ID)}}},[t._v("Xóa")])])])}))],2)])]),a("div",{staticClass:"row justify-center q-mt-md"},[a("div",{staticClass:"col-12 col-sm-6"},[a("q-btn",{staticClass:"full-width",attrs:{color:"primary",label:"Lưu lại"},on:{click:t.save}})],1)]),a("q-dialog",{attrs:{persistent:""},model:{value:t.showAdd,callback:function(e){t.showAdd=e},expression:"showAdd"}},[a("q-card",{staticStyle:{"min-width":"350px"}},[a("q-card-section",{staticClass:"row items-center"},[a("span",{staticClass:"q-ml-sm"},[t._v("Chọn kích thước nghiệm thu")])]),a("q-card-section",[a("div",{staticClass:"row justify-center q-mt-sm"},[a("div",{staticClass:"col-12"},[a("q-select",{attrs:{outlined:"",options:t.iTypes,label:"Phận loại"},model:{value:t.iType,callback:function(e){t.iType=e},expression:"iType"}})],1)]),a("div",{staticClass:"row justify-center q-mt-sm"},[a("div",{staticClass:"col-12"},[a("q-select",{attrs:{outlined:"",options:t.dTypes,label:"Tình trạng gỗ"},model:{value:t.dType,callback:function(e){t.dType=e},expression:"dType"}})],1)]),a("div",{staticClass:"row justify-center q-mt-sm"},[a("div",{staticClass:"col-12"},[a("q-select",{attrs:{outlined:"",options:t.items,label:"Kích thước nghiệm thu"},model:{value:t.item,callback:function(e){t.item=e},expression:"item"}})],1)]),a("div",{staticClass:"row justify-center q-mt-sm"},[a("div",{staticClass:"col-12"},[a("q-input",{attrs:{outlined:"",type:"number",label:"Số tấm loại"},model:{value:t.defectQty,callback:function(e){t.defectQty=t._n(e)},expression:"defectQty"}})],1)]),a("div",{staticClass:"row justify-center q-mt-sm"},[a("div",{staticClass:"col-12"},[a("q-input",{attrs:{outlined:"",type:"number",label:"Tỷ lệ loại"},model:{value:t.rateInspect,callback:function(e){t.rateInspect=t._n(e)},expression:"rateInspect"}})],1)])]),a("q-card-actions",{attrs:{align:"right"}},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{glossy:"",label:"Hủy",color:"deep-orange"}}),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{glossy:"",label:"Đồng ý",color:"primary"},on:{click:t.addKT}})],1)],1)],1)],1)},i=[],n=(a("551c"),a("06db"),a("20d6"),a("a34a")),c=a.n(n),r=(a("96cf"),a("c973")),l=a.n(r),o=a("fa7d"),d={data:function(){return{receipt:{},sampleQty:0,dTypes:[],dType:null,items:[],item:null,iTypes:[],iType:null,rateA1:"",humidity:"",note:"",arrayData:[],showAdd:!1,defectQty:"",rateInspect:""}},created:function(){this.loadInputType(),this.loadDetailInput(),this.loadDType()},methods:{save:function(){var t=this;return l()(c.a.mark((function e(){var a,s;return c.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.$route.params.id,a={id:t.receipt.INS_ID,receiptDetailId:t.$route.params.id,note:t.note,humidity:t.humidity,sampleQuantity:t.sampleQty,rateA1:t.rateA1,arrayInspection:t.arrayData},e.next=4,t.$store.dispatch("wood/EDIT_INSPECTION",a);case 4:s=e.sent,s.meta.success&&(Object(o["o"])("Thành công !"),t.$router.push({name:"wood-inspection",params:{id:t.receipt.WH_RECEIPT_ID}}));case 6:case"end":return e.stop()}}),e)})))()},addKT:function(){var t=0;t=parseInt(this.defectQty)>0?this.defectQty/this.sampleQty:this.rateInspect,this.arrayData.push({ITEM_ID:this.item.value,ITEM_NAME:this.item.label,ITYPE_NAME:this.iType.label,INPUT_TYPE_ID:this.iType.value,DTYPE_NAME:this.dType.label,DTYPE:this.dType.value,DEFECT_QTY:parseInt(this.defectQty)>0?this.defectQty:0,WTYPE:this.receipt.WOOD_TYPE_ID,RATE:t,PAY_RATE:t/100})},removeArray:function(t,e){this.arrayData.splice(t,1)},loadDetailInput:function(){var t=this;return l()(c.a.mark((function e(){var a,s;return c.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t.$route.params.id,e.next=3,t.$store.dispatch("wood/GET_DETAIL_DLT",a);case 3:s=e.sent,t.receipt=s.data[0],t.receipt&&(t.sampleQty=t.receipt.SAMPLE_QTY,t.note=t.receipt.INS_NOTE,t.humidity=t.receipt.HUMIDITY_RATE,t.rateA1=t.receipt.A1_RATE,t.loadItems(),t.loadArrayData());case 6:case"end":return e.stop()}}),e)})))()},loadDType:function(){var t=this;return l()(c.a.mark((function e(){var a;return c.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$store.dispatch("wood/GET_DTYPE","VCN");case 2:a=e.sent,a.data.forEach((function(e){var a={label:e.NAME,value:e.CODE};t.dTypes.push(a)})),t.dTypes.length>0&&(t.dType=t.dTypes[0]);case 5:case"end":return e.stop()}}),e)})))()},loadItems:function(){var t=this;return l()(c.a.mark((function e(){var a,s,i,n;return c.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.receipt.XTYPE,a=100010,s={typeId:a},e.next=5,t.$store.dispatch("wood/GET_ITEM_BY_TYPE",s);case 5:i=e.sent,i.data.length>0&&(i.data.forEach((function(e){var a={value:e.id,label:e.height+"*"+e.width+"*"+e.length+" ("+t.receipt.WOOD_TYPE+")"};t.items.push(a)})),n=t.items.findIndex((function(e){return e.value===t.receipt.ITEM_ID})),t.item=t.items[n]);case 7:case"end":return e.stop()}}),e)})))()},loadInputType:function(){var t=this;return new Promise(function(){var e=l()(c.a.mark((function e(a,s){var i,n;return c.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i={moduleCode:"vcn",type:"INSPECTION"},e.next=3,t.$store.dispatch("wood/GET_INPUT_TYPE",i);case 3:n=e.sent,n.data.forEach((function(e){var a={label:e.NAME,value:e.ID};t.iTypes.push(a)})),t.iTypes.length>0&&(t.iType=t.iTypes[0]),a(!0);case 7:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}())},loadArrayData:function(){var t=this;return l()(c.a.mark((function e(){var a,s;return c.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t.$route.params.id,e.next=3,t.$store.dispatch("wood/GET_LIST_INSP_BY_RDLT_ID",a);case 3:s=e.sent,t.arrayData=s.data;case 5:case"end":return e.stop()}}),e)})))()}}},p=d,u=(a("2b89"),a("2877")),m=a("9989"),h=a("f09f"),T=a("a370"),v=a("27f9"),y=a("9c40"),f=a("24e8"),_=a("ddd8"),E=a("4b7e"),w=a("7f67"),C=a("eebe"),I=a.n(C),b=Object(u["a"])(p,s,i,!1,null,"4261f282",null);e["default"]=b.exports;I()(b,"components",{QPage:m["a"],QCard:h["a"],QCardSection:T["a"],QInput:v["a"],QBtn:y["a"],QDialog:f["a"],QSelect:_["a"],QCardActions:E["a"]}),I()(b,"directives",{ClosePopup:w["a"]})}}]);