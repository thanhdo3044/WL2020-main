(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[24],{"258b":function(t,a,c){"use strict";var e=c("b6c0"),s=c.n(e);s.a},6538:function(t,a,c){"use strict";c.r(a);var e=function(){var t=this,a=t.$createElement,c=t._self._c||a;return c("q-page",{staticClass:"q-pa-md"},[c("div",{staticClass:"row justify-center"},[c("div",{staticClass:"col-8"},[c("div",{staticClass:"prodTextTitle"},[t._v("BIỂU MẪU KIỂM TRA ĐỘ ẨM GỖ SẤY")])]),c("div",{staticClass:"col-4"},[c("q-btn",{attrs:{color:"secondary",label:"Hoàn thành"},on:{click:function(a){t.confirm=!0}}})],1)]),c("q-separator"),c("div",{staticClass:"row justify-center"},[c("div",{staticClass:"col-12 col-sm-6"},[c("p",[t._v("Ngày kiểm tra : "+t._s((new Date).toISOString().slice(0,10)))]),c("p",[t._v("Đơn vị quản lý : Sấy phôi")]),c("p",[t._v("Mẻ sấy : "),c("strong",[t._v(t._s(t.currentKinlBatchId))])]),c("p",[t._v("Số lượng : "+t._s(t.mc.length))])])]),c("div",{staticClass:"row justify-center"},[c("div",{staticClass:"col-12 col-sm-6"},[c("q-card",[c("q-card-section",[c("div",{staticClass:"prodTextTitle"},[t._v("Bảng phân bố độ ẩm")])]),c("q-separator"),c("q-card-section",[c("table",{staticStyle:{width:"100%"}},[c("tr",[c("th",[t._v("Độ ẩm(MC%)")]),c("th",[t._v("SL Mẫu")]),c("th",[t._v("Tỷ lệ")])]),c("tr",[c("td",{staticStyle:{"text-align":"center"}},[t._v("Thấp (nhỏ hơn "+t._s(t.cacmoc[0])+")")]),c("td",{staticStyle:{"text-align":"center"}},[t._v(t._s(t.thap))]),c("td",{staticStyle:{"text-align":"center"}},[t._v(t._s((t.thap/t.mc.length*100).toFixed(2))+" %")])]),c("tr",{staticStyle:{"background-color":"cadetblue"}},[c("td",{staticStyle:{"text-align":"center"}},[c("strong",[t._v("Đích ("+t._s(t.cacmoc[0])+"-"+t._s(t.cacmoc[1]-1)+")")])]),c("td",{staticStyle:{"text-align":"center"}},[t._v(t._s(t.dich))]),c("td",{staticStyle:{"text-align":"center"}},[t._v(t._s((t.dich/t.mc.length*100).toFixed(2))+" %")])]),c("tr",{staticStyle:{"background-color":"yellow"}},[c("td",{staticStyle:{"text-align":"center"}},[t._v("Cao("+t._s(t.cacmoc[1])+"-"+t._s(t.cacmoc[2]-1)+")")]),c("td",{staticStyle:{"text-align":"center"}},[t._v(t._s(t.cao))]),c("td",{staticStyle:{"text-align":"center"}},[t._v(t._s((t.cao/t.mc.length*100).toFixed(2))+" %")])]),c("tr",{staticStyle:{"background-color":"red"}},[c("td",{staticStyle:{"text-align":"center"}},[t._v("Rất cao("+t._s(t.cacmoc[2])+" trở lên)")]),c("td",{staticStyle:{"text-align":"center"}},[t._v(t._s(t.ratcao))]),c("td",{staticStyle:{"text-align":"center"}},[t._v(t._s((t.ratcao/t.mc.length*100).toFixed(2)||0)+" %")])])])])],1)],1)]),c("div",{staticClass:"row justify-center q-mt-sm"},[c("div",{staticClass:"col-8"},[c("q-input",{attrs:{outlined:"",placeholder:"81",label:"Độ ẩm "},on:{keyup:function(a){return!a.type.indexOf("key")&&t._k(a.keyCode,"enter",13,a.key,"Enter")?null:t.add(a)}},model:{value:t.doam,callback:function(a){t.doam=t._n(a)},expression:"doam"}})],1),c("div",{staticClass:"col-4"},[c("q-btn",{staticStyle:{height:"100%","margin-left":"10px",width:"90%"},attrs:{color:"primary",glossy:"",label:"Ghi"},on:{click:t.add}})],1)]),c("div",{staticClass:"row justify-center q-mt-sm"},[c("div",{staticClass:"col-12 col-sm-6"},[c("table",{staticStyle:{width:"100%"}},[c("tr",[c("th",[t._v("STT")]),c("th",[t._v("Độ ẩm")])]),t._l(t.mc,(function(a,e){return c("tr",{key:e},[c("td",{staticStyle:{"text-align":"center"}},[t._v(t._s(e+1))]),c("td",{staticStyle:{"text-align":"center"}},[t._v(t._s(a))])])}))],2)])]),c("q-dialog",{staticStyle:{"min-width":"300px"},attrs:{persistent:""},model:{value:t.confirm,callback:function(a){t.confirm=a},expression:"confirm"}},[c("q-card",[c("q-card-section",{staticClass:"row items-center"},[c("span",{staticClass:"q-ml-sm"},[t._v("Xác nhận hoàn thành !")])]),c("q-separator"),c("q-card-section",[c("div",{staticClass:"col-12"},[c("strong",[t._v("Kết luận : ")])]),c("div",{staticClass:"col-12"},[c("q-option-group",{attrs:{options:t.options,color:"primary",disable:t.disableOption,inline:""},model:{value:t.group,callback:function(a){t.group=a},expression:"group"}})],1),c("div",{directives:[{name:"show",rawName:"v-show",value:t.showTextCachKhac,expression:"showTextCachKhac"}],staticClass:"col-12"},[c("q-input",{attrs:{outlined:"",label:"Hướng xử lý "},model:{value:t.cachkhac,callback:function(a){t.cachkhac=a},expression:"cachkhac"}})],1)]),c("q-card-actions",{attrs:{align:"right"}},[c("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Hủy",color:"primary"}}),c("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Đồng ý",color:"primary"},on:{click:t.save}})],1)],1)],1)],1)},s=[],o=c("a34a"),i=c.n(o),n=(c("96cf"),c("c973")),r=c.n(n),l=(c("7514"),c("f79b")),h={data:function(){return{mc:[],currentKinlBatchId:null,doam:"",thap:0,dich:0,cao:0,ratcao:0,connectionStatus:"",confirm:!1,cachkhac:"",group:null,showTextCachKhac:!1,disableOption:!1,cacmoc:[60,100,150],options:[{label:"Ra lò",value:"ralo"},{label:"Sấy tiếp",value:"saytiep"},{label:"Cách khác",value:"cachkhac"}]}},created:function(){var t=this,a=this.$route.params.kinlbatchid;this.currentKinlBatchId=a;(new Date).toISOString();var c=this.$store.state.production.batchs.find((function(t){return t.id===a})).type||"other";if("OUTDOOR"===c&&(this.cacmoc=[80,140,170]),a){var e=localStorage.getItem("mc"+a);if(console.log(e),e){var s=JSON.parse(e);this.mc=s,s.forEach((function(a){parseInt(a)<t.cacmoc[0]?t.thap+=1:parseInt(a)<t.cacmoc[1]?t.dich+=1:parseInt(a)<t.cacmoc[2]?t.cao+=1:t.ratcao+=1}))}}},watch:{confirm:function(t){if(t){var a=parseInt(this.dich+this.thap)/this.mc.length;a>=.9?(this.group="ralo",this.disableOption=!0):(this.group="saytiep",this.disableOption=!1)}},group:function(t){this.showTextCachKhac="cachkhac"===t}},methods:{save:function(){var t=this;return r()(i.a.mark((function a(){var c,e,s;return i.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(!navigator.onLine){a.next=10;break}return t.$q.loading.show(),c={kilnBatchId:t.currentKinlBatchId,type:l["a"].BB_KIEM_TRA_DO_AM_LO_SAY,linkId:t.currentKinlBatchId,linkType:"kilnBatch",mc:t.mc,alloc:{quantity:{thap:t.thap,dich:t.dich,cao:t.cao,ratcao:t.ratcao},rate:{thap:(t.thap/t.mc.length*100).toFixed(2),dich:(t.dich/t.mc.length*100).toFixed(2),cao:(t.cao/t.mc.length*100).toFixed(2),ratcao:(t.ratcao/t.mc.length*100).toFixed(2)}},result:{type:t.group,note:t.cachkhac}},a.next=5,t.$store.dispatch("production/ACTION_CREATE_BB_MC",c);case 5:e=a.sent,t.$q.loading.hide(),!0===e.meta.success?(t.$q.notify({message:"Tạo biên bản thành công !",color:"green"}),localStorage.setItem("mc"+t.currentKinlBatchId,"[]"),"ralo"===t.group&&(s={batchId:t.$store.state.production.batchSelected.id,data:{token:t.$store.state.production.userInfo.token,humidity:(t.thap+t.dich)/t.mc.length*100,state:"ok"}},t.$store.dispatch("production/ACTION_QC_CONFIRM_BATCH",s).then((function(a){!0===a.meta.success?(t.$router.go(-1),t.showButtonComfirmBatch=!0):t.$q.notify({message:a.meta.messages.message,color:"red"})})).catch((function(a){console.log(a),t.$q.notify({message:a,color:"red"})}))),t.$router.go(-1)):t.$q.notify({message:e.meta.messages.message,color:"red"}),a.next=12;break;case 10:t.connectionStatus="Không có kết nối internet",t.$q.notify({message:t.connectionStatus,color:"red"});case 12:case"end":return a.stop()}}),a)})))()},add:function(){parseInt(this.doam)>0&&parseInt(this.doam)<300?(this.mc.push(this.doam),localStorage.setItem("mc"+this.currentKinlBatchId,JSON.stringify(this.mc)),parseInt(this.doam)<this.cacmoc[0]?this.thap+=1:parseInt(this.doam)<this.cacmoc[1]?this.dich+=1:parseInt(this.doam)<this.cacmoc[2]?this.cao+=1:this.ratcao+=1):this.$q.notify({message:"Số lượng nhập vào không chính xác !",color:"red"}),this.doam=""}}},d=h,p=(c("258b"),c("2877")),m=c("9989"),u=c("9c40"),g=c("eb85"),v=c("f09f"),_=c("a370"),f=c("27f9"),y=c("24e8"),b=c("9f0a"),S=c("4b7e"),x=c("7f67"),k=c("eebe"),C=c.n(k),w=Object(p["a"])(d,e,s,!1,null,"4e74b48e",null);a["default"]=w.exports;C()(w,"components",{QPage:m["a"],QBtn:u["a"],QSeparator:g["a"],QCard:v["a"],QCardSection:_["a"],QInput:f["a"],QDialog:y["a"],QOptionGroup:b["a"],QCardActions:S["a"]}),C()(w,"directives",{ClosePopup:x["a"]})},b6c0:function(t,a,c){}}]);