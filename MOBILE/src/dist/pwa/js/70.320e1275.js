(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[70],{a19e:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-page",[a("order-header",{attrs:{order:e.order}}),a("q-card",{staticClass:"my-card"},[a("XinRaCong",{attrs:{order:e.order,metaValue:e.metaValue,disable:e.disable}})],1),a("q-card",[a("q-card-section",{staticClass:" q-mr-lg q-mt-lg"},[void 0==e.order.Requests||e.order.Requests&&!Object.keys(e.order.Requests).length?a("q-checkbox",{attrs:{label:"Đồng ý"},model:{value:e.disable,callback:function(t){e.disable=t},expression:"disable"}}):e._e()],1)],1),e.disable?a("order-approved",{staticClass:"q-mt-lg",attrs:{metaValue:e.metaValue,order:e.order}}):e._e(),a("send-message",{attrs:{order:e.order}})],1)},n=[],s=(a("8e6e"),a("8a81"),a("ac6a"),a("cadf"),a("06db"),a("456d"),a("f751"),a("9523")),o=a.n(s),i=a("2f62"),d=a("932a"),l=a("6664"),c=a("0ac8"),u=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-card-section",["Không được duyệt"==e.order.status?a("div",[a("div",{staticClass:"flex"},[a("q-input",{staticClass:"q-mt-sm q-pr-sm",staticStyle:{width:"50% !important"},attrs:{outlined:"",label:"Tên tôi là : ",readonly:!e.disable},model:{value:e.userInfo.lastName,callback:function(t){e.$set(e.userInfo,"lastName",t)},expression:"userInfo.lastName"}}),a("q-input",{staticClass:"q-mt-sm",staticStyle:{width:"50% !important"},attrs:{outlined:"",label:"Mã nhân viên : ",readonly:!e.disable},model:{value:e.userInfo.account,callback:function(t){e.$set(e.userInfo,"account",t)},expression:"userInfo.account"}})],1),a("div",{staticClass:"flex"},[a("q-input",{staticClass:"q-mt-sm q-pr-sm",staticStyle:{width:"50% !important"},attrs:{outlined:"",label:"Chức vụ : ",readonly:!e.disable},model:{value:e.userInfo.position,callback:function(t){e.$set(e.userInfo,"position",t)},expression:"userInfo.position"}}),a("q-input",{staticClass:"q-mt-sm",staticStyle:{width:"50% !important"},attrs:{outlined:"",label:"Phòng ban/bộ phận : ",readonly:!e.disable},model:{value:e.nameDepartmentName.NAME,callback:function(t){e.$set(e.nameDepartmentName,"NAME",t)},expression:"nameDepartmentName.NAME"}})],1),a("q-select",{staticClass:"q-mt-sm",attrs:{standout:"bg-teal text-white",readonly:!e.disable,options:e.options2,label:"Lý do"},model:{value:e.order.OrderMeta[0].description,callback:function(t){e.$set(e.order.OrderMeta[0],"description",t)},expression:"order.OrderMeta[0].description"}}),a("div",{staticClass:"row q-mt-sm"},[a("div",{staticClass:"col"},[a("div",{staticClass:"text-h8"},[e._v("  Thời gian ra :")]),a("div",{},[a("q-input",{staticClass:"q-mb-sm",attrs:{readonly:!e.disable,filled:""},scopedSlots:e._u([{key:"prepend",fn:function(){return[a("q-icon",{staticClass:"cursor-pointer",attrs:{name:"event"}},[a("q-popup-proxy",{ref:"qDateProxy",attrs:{"transition-show":"scale","transition-hide":"scale"}},[a("q-date",{attrs:{readonly:!e.disable,mask:"DD-MM-YYYY HH:mm"},model:{value:e.order.OrderMeta[0].dateStart,callback:function(t){e.$set(e.order.OrderMeta[0],"dateStart",t)},expression:"order.OrderMeta[0].dateStart"}},[a("div",{staticClass:"row items-center justify-end"},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Close",color:"primary",flat:""}})],1)])],1)],1)]},proxy:!0},{key:"append",fn:function(){return[a("q-icon",{staticClass:"cursor-pointer",attrs:{name:"access_time"}},[a("q-popup-proxy",{attrs:{"transition-show":"scale","transition-hide":"scale"}},[a("q-time",{attrs:{readonly:!e.disable,mask:"DD-MM-YYYY HH:mm",format24h:""},model:{value:e.order.OrderMeta[0].dateStart,callback:function(t){e.$set(e.order.OrderMeta[0],"dateStart",t)},expression:"order.OrderMeta[0].dateStart"}},[a("div",{staticClass:"row items-center justify-end"},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Close",color:"primary",flat:""}})],1)])],1)],1)]},proxy:!0}],null,!1,1303548521),model:{value:e.order.OrderMeta[0].dateStart,callback:function(t){e.$set(e.order.OrderMeta[0],"dateStart",t)},expression:"order.OrderMeta[0].dateStart"}})],1)]),a("div",{staticClass:"col q-pl-sm"},[a("div",{staticClass:"text-h8"},[e._v("Thời gian vào :")]),a("div",{},[a("q-input",{staticClass:"q-mb-sm",attrs:{readonly:!e.disable,filled:""},scopedSlots:e._u([{key:"prepend",fn:function(){return[a("q-icon",{staticClass:"cursor-pointer",attrs:{name:"event"}},[a("q-popup-proxy",{ref:"qDateProxy",attrs:{"transition-show":"scale","transition-hide":"scale"}},[a("q-date",{attrs:{readonly:e.disable,mask:"DD-MM-YYYY HH:mm"},model:{value:e.order.OrderMeta[0].dateEnd,callback:function(t){e.$set(e.order.OrderMeta[0],"dateEnd",t)},expression:"order.OrderMeta[0].dateEnd"}},[a("div",{staticClass:"row items-center justify-end"},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Close",color:"primary",flat:""}})],1)])],1)],1)]},proxy:!0},{key:"append",fn:function(){return[a("q-icon",{staticClass:"cursor-pointer",attrs:{name:"access_time"}},[a("q-popup-proxy",{attrs:{"transition-show":"scale","transition-hide":"scale"}},[a("q-time",{attrs:{readonly:e.disable,mask:"DD-MM-YYYY HH:mm",format24h:""},model:{value:e.order.OrderMeta[0].dateEnd,callback:function(t){e.$set(e.order.OrderMeta[0],"dateEnd",t)},expression:"order.OrderMeta[0].dateEnd"}},[a("div",{staticClass:"row items-center justify-end"},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Close",color:"primary",flat:""}})],1)])],1)],1)]},proxy:!0}],null,!1,2705003113),model:{value:e.order.OrderMeta[0].dateEnd,callback:function(t){e.$set(e.order.OrderMeta[0],"dateEnd",t)},expression:"order.OrderMeta[0].dateEnd"}})],1)])]),a("q-btn",{staticClass:"q-mt-sm",attrs:{color:"primary","text-color":"white",label:"Sửa"},on:{click:e.updatedOrderMeta}})],1):a("div",[a("div",{staticClass:"flex"},[a("q-input",{staticClass:"q-mt-sm q-pr-sm",staticStyle:{width:"50% !important"},attrs:{outlined:"",label:"Tên tôi là : ",readonly:e.disable},model:{value:e.userInfo.lastName,callback:function(t){e.$set(e.userInfo,"lastName",t)},expression:"userInfo.lastName"}}),a("q-input",{staticClass:"q-mt-sm",staticStyle:{width:"50% !important"},attrs:{outlined:"",label:"Mã nhân viên : ",readonly:e.disable},model:{value:e.userInfo.account,callback:function(t){e.$set(e.userInfo,"account",t)},expression:"userInfo.account"}})],1),a("div",{staticClass:"flex"},[a("q-input",{staticClass:"q-mt-sm q-pr-sm",staticStyle:{width:"50% !important"},attrs:{outlined:"",label:"Chức vụ : ",readonly:e.disable},model:{value:e.userInfo.position,callback:function(t){e.$set(e.userInfo,"position",t)},expression:"userInfo.position"}}),a("q-input",{staticClass:"q-mt-sm",staticStyle:{width:"50% !important"},attrs:{outlined:"",label:"Phòng ban/bộ phận : ",readonly:e.disable},model:{value:e.nameDepartmentName.NAME,callback:function(t){e.$set(e.nameDepartmentName,"NAME",t)},expression:"nameDepartmentName.NAME"}})],1),a("q-select",{staticClass:"q-mt-sm",attrs:{standout:"bg-teal text-white",readonly:e.disable,options:e.options2,label:"Lý do"},model:{value:e.order.OrderMeta[0].description,callback:function(t){e.$set(e.order.OrderMeta[0],"description",t)},expression:"order.OrderMeta[0].description"}}),a("div",{staticClass:"row q-mt-sm"},[a("div",{staticClass:"col"},[a("div",{staticClass:"text-h8"},[e._v("  Thời gian ra :")]),a("div",{},[a("q-input",{staticClass:"q-mb-sm",attrs:{readonly:e.disable,filled:""},scopedSlots:e._u([{key:"prepend",fn:function(){return[a("q-icon",{staticClass:"cursor-pointer",attrs:{name:"event"}},[a("q-popup-proxy",{ref:"qDateProxy",attrs:{"transition-show":"scale","transition-hide":"scale"}},[a("q-date",{attrs:{readonly:e.disable,mask:"DD-MM-YYYY HH:mm"},model:{value:e.order.OrderMeta[0].dateStart,callback:function(t){e.$set(e.order.OrderMeta[0],"dateStart",t)},expression:"order.OrderMeta[0].dateStart"}},[a("div",{staticClass:"row items-center justify-end"},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Close",color:"primary",flat:""}})],1)])],1)],1)]},proxy:!0},{key:"append",fn:function(){return[a("q-icon",{staticClass:"cursor-pointer",attrs:{name:"access_time"}},[a("q-popup-proxy",{attrs:{"transition-show":"scale","transition-hide":"scale"}},[a("q-time",{attrs:{readonly:e.disable,mask:"DD-MM-YYYY HH:mm",format24h:""},model:{value:e.order.OrderMeta[0].dateStart,callback:function(t){e.$set(e.order.OrderMeta[0],"dateStart",t)},expression:"order.OrderMeta[0].dateStart"}},[a("div",{staticClass:"row items-center justify-end"},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Close",color:"primary",flat:""}})],1)])],1)],1)]},proxy:!0}]),model:{value:e.order.OrderMeta[0].dateStart,callback:function(t){e.$set(e.order.OrderMeta[0],"dateStart",t)},expression:"order.OrderMeta[0].dateStart"}})],1)]),a("div",{staticClass:"col q-pl-sm"},[a("div",{staticClass:"text-h8"},[e._v("Thời gian vào :")]),a("div",{},[a("q-input",{staticClass:"q-mb-sm",attrs:{filled:""},scopedSlots:e._u([{key:"prepend",fn:function(){return[a("q-icon",{staticClass:"cursor-pointer",attrs:{name:"event"}},[a("q-popup-proxy",{ref:"qDateProxy",attrs:{"transition-show":"scale","transition-hide":"scale"}},[a("q-date",{attrs:{readonly:e.disable,mask:"DD-MM-YYYY HH:mm"},model:{value:e.order.OrderMeta[0].dateEnd,callback:function(t){e.$set(e.order.OrderMeta[0],"dateEnd",t)},expression:"order.OrderMeta[0].dateEnd"}},[a("div",{staticClass:"row items-center justify-end"},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Close",color:"primary",flat:""}})],1)])],1)],1)]},proxy:!0},{key:"append",fn:function(){return[a("q-icon",{staticClass:"cursor-pointer",attrs:{name:"access_time"}},[a("q-popup-proxy",{attrs:{"transition-show":"scale","transition-hide":"scale"}},[a("q-time",{attrs:{readonly:e.disable,mask:"DD-MM-YYYY HH:mm",format24h:""},model:{value:e.order.OrderMeta[0].dateEnd,callback:function(t){e.$set(e.order.OrderMeta[0],"dateEnd",t)},expression:"order.OrderMeta[0].dateEnd"}},[a("div",{staticClass:"row items-center justify-end"},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Close",color:"primary",flat:""}})],1)])],1)],1)]},proxy:!0}]),model:{value:e.order.OrderMeta[0].dateEnd,callback:function(t){e.$set(e.order.OrderMeta[0],"dateEnd",t)},expression:"order.OrderMeta[0].dateEnd"}})],1)])])],1)])},p=[],m=(a("7f7f"),a("a34a")),f=a.n(m),b=(a("96cf"),a("c973")),h=a.n(b),O=a("e96d"),v=a.n(O),M=a("6191"),y=a.n(M),x=a("bc3a"),q=a.n(x),C=a("d30a");function g(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function D(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?g(Object(a),!0).forEach((function(t){o()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):g(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var w={components:{DxDataGrid:C["DxDataGrid"],DxColumn:C["DxColumn"],DxEditing:C["DxEditing"],DxPaging:C["DxPaging"],DxButton:y.a,DxDateBox:v.a,DxLookup:C["DxLookup"]},props:["metaValue","disable","order"],data:function(){return{myDepartment:null,stepDepartment:null,departments:[],events:[],options:null,nameDepartmentName:null,account:[],active:!1,options2:["Công việc","Lý do cá nhân"]}},created:function(){var e=this;return h()(f.a.mark((function t(){var a,r;return f.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.GET_DEPARTMENTSALL();case 2:return a=t.sent,console.log("dataa",a),t.next=6,e.GET_ACCOUNTS();case 6:return r=t.sent,console.log("account2",r),t.next=10,r.data.forEach((function(t){e.account.push({value:t.id,label:t.lastName,position:t.position,departmentId:t.departmentId})}));case 10:return console.log("account",e.account),t.next=13,e.GET_DEPARTMENTSBYID(e.userInfo.department);case 13:return e.nameDepartmentName=t.sent,t.next=16,a.forEach((function(t){e.departments.push({value:t.ID,label:t.NAME})}));case 16:console.log("options",e.departments);case 17:case"end":return t.stop()}}),t)})))()},methods:D(D(D(D(D({changed:function(){var e=this;return h()(f.a.mark((function t(){var a;return f.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log("changed"),console.log("this.order.OrderMeta[0].position2 ",e.order.OrderMeta[0].position2),console.log("this.metaValue.account2.id",e.metaValue.accountName),e.order.OrderMeta[0].position2=e.metaValue.accountName.position,t.next=6,e.GET_DEPARTMENTSBYID(e.metaValue.accountName.departmentId);case 6:a=t.sent,console.log("department2",a),e.order.OrderMeta[0].department2=a.NAME;case 9:case"end":return t.stop()}}),t)})))()},filterFn:function(e,t){var a=this;t(""!==e?function(){var t=e.toLowerCase();a.options=a.account.filter((function(e){return e.label.toLowerCase().indexOf(t)>-1}))}:function(){a.options=a.account})}},Object(i["b"])("base",["GET_DEPARTMENTSBYID","GET_DEPARTMENTSALL","GET_ACCOUNTS"])),Object(i["b"])("orders",["getOneOrder","getAllRequests"])),Object(i["b"])("orderMetas",["getOneOrderMeta","addorderMeta","deleteOrderMeta","updateOrderMeta"])),Object(i["b"])("requests",["deleteRequest","resetOrder"])),{},{chonCongDoan:function(){console.log("myDepartment",this.myDepartment.value)},loadDepartment:function(){var e=this;return h()(f.a.mark((function t(){var a;return f.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("base/GET_DEPARTMENTS",{factoryId:e.myFactoryInfor.id});case 2:return a=t.sent,console.log("data",a.data),t.next=6,a.data.forEach((function(t){e.departments.push({id:t.id,value:t.name})}));case 6:console.log("this.departments",e.departments);case 7:case"end":return t.stop()}}),t)})))()},updatedOrderMeta:function(){var e=this;return h()(f.a.mark((function t(){var a,r,n,s,o,i,d,l,c,u;return f.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log("this.metaValue.account2.id",e.metaValue.accountName),a=e.order.OrderMeta[0].kinhGui,r=e.userInfo.lastName,n=e.metaValue.selection,s=e.userInfo.position,o=e.userInfo.account,i=null==e.order.OrderMeta[0].dateStart?" ":e.order.OrderMeta[0].dateStart,d=null==e.order.OrderMeta[0].dateEnd?" ":e.order.OrderMeta[0].dateEnd,l=null==e.order.OrderMeta[0].description?" ":e.order.OrderMeta[0].description,c=null==e.nameDepartmentName.NAME?" ":e.nameDepartmentName.NAME,u=null==e.order.OrderMeta[0].xinRaCong?" ":e.order.OrderMeta[0].xinRaCong,t.next=13,e.updateOrderMeta(D(D({},e.order.OrderMeta[0]),{},{metaValue:JSON.stringify([e.metaValue]),fullName:r,selection:n,position:s,maNV:o,dateEnd:d,dateStart:i,description:l,department:c,xinRaCong:u,kinhGui:a}));case 13:return t.next=15,q.a.put("/api/v2/orders?orderId=".concat(e.order.id));case 15:return t.next=17,e.deleteRequest(e.order.id);case 17:location.reload();case 18:case"end":return t.stop()}}),t)})))()}}),computed:D(D({},Object(i["c"])("orders",["order"])),Object(i["c"])("base",["myFactoryInfor","userInfo","dsCongDoans"])),watch:{disable:function(e){if(e){console.log("this.metaValue.account2.id",this.metaValue.accountName);var t=this.order.OrderMeta[0].kinhGui,a=this.userInfo.lastName,r=this.metaValue.selection,n=this.userInfo.position,s=this.userInfo.account,o=null==this.order.OrderMeta[0].dateStart?" ":this.order.OrderMeta[0].dateStart,i=null==this.order.OrderMeta[0].dateEnd?" ":this.order.OrderMeta[0].dateEnd,d=null==this.order.OrderMeta[0].description?" ":this.order.OrderMeta[0].description,l=null==this.nameDepartmentName.NAME?" ":this.nameDepartmentName.NAME,c=null==this.order.OrderMeta[0].xinRaCong?" ":this.order.OrderMeta[0].xinRaCong;this.updateOrderMeta(D(D({},this.order.OrderMeta[0]),{},{metaValue:JSON.stringify([this.metaValue]),fullName:a,selection:r,position:n,maNV:s,dateEnd:i,dateStart:o,description:d,department:l,xinRaCong:c,kinhGui:t}))}}}},E=w,N=a("2877"),k=a("a370"),S=a("27f9"),j=a("ddd8"),I=a("0016"),T=a("7cbe"),P=a("52ee"),Y=a("9c40"),$=a("ca78"),V=a("7f67"),_=a("eebe"),A=a.n(_),R=Object(N["a"])(E,u,p,!1,null,null,null),G=R.exports;function H(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function Q(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?H(Object(a),!0).forEach((function(t){o()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):H(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}A()(R,"components",{QCardSection:k["a"],QInput:S["a"],QSelect:j["a"],QIcon:I["a"],QPopupProxy:T["a"],QDate:P["a"],QBtn:Y["a"],QTime:$["a"]}),A()(R,"directives",{ClosePopup:V["a"]});var L={data:function(){return{disable:!1,metaValue:{kinhGui:"Ban TGĐ - Trưởng phòng/phó phòng ban :  -\tGĐSX/Phó GĐSX/Phụ trách nhà máy :",noiDungTT:"",soTien:0,vietBangChu:"",kemTheo:"",STT:"12",locationWork:"",position:"",position2:"",number:"",timeRecruit:"",description:"",fullName:"",fullName2:"",maNV:"",department:"",department2:"",stepDepartment:"",lyDo:"",dateStart:"",dateEnd:"",selection1:null,selection2:null,selection3:null,selection4:null,selection:null,thoiGianMangThai:"",xinRaCong:""}}},components:{SendMessage:d["a"],OrderHeader:l["a"],OrderApproved:c["a"],XinRaCong:G},methods:Q(Q({},Object(i["b"])("orders",["getOneOrder","getAllRequests"])),Object(i["b"])("orderMetas",["getOneOrderMeta","addorderMeta"])),computed:Q(Q({},Object(i["c"])("orders",["order"])),Object(i["c"])("base",["userInfo","myFactoryInfor"])),created:function(){var e=this;this.$route.query.id?this.getOneOrder(this.$route.query.id).then((function(t){t.data.data.Requests.length&&(e.disable=!0),e.metaValue=Object.assign(e.metaValue,JSON.parse(t.data.data.OrderMeta[0].metaValue)[0])})):this.$router.push({path:"/tao-de-xuat"})}},B=L,J=a("9989"),F=a("f09f"),X=a("8f8e"),U=Object(N["a"])(B,r,n,!1,null,null,null);t["default"]=U.exports;A()(U,"components",{QPage:J["a"],QCard:F["a"],QCardSection:k["a"],QCheckbox:X["a"]})}}]);