(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[104],{"7a25":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-page",{staticClass:"q-pa-md"},[a("app-bar",[t._v("Danh sách pallet chờ nhận về công đoạn "+t._s(this.$store.state.production.sourceSelected.name))]),a("div",{staticClass:"row justify-center"},[t._l(t.pallets,(function(e){return a("div",{key:e.id,staticClass:"col-12 col-md-3 q-ma-sm"},[a("transition",{attrs:{appear:"","enter-active-class":"animated fadeIn","leave-active-class":"animated hinge"}},[a("card-pallet",{attrs:{pallet:e}},[a("div",{attrs:{slot:"action"},slot:"action"},[a("q-btn",{attrs:{color:"primary",glossy:"",label:"Nhận"},on:{click:function(a){return t.recive(e)}}})],1)])],1)],1)})),a("q-dialog",{attrs:{"transition-show":"rotate","transition-hide":"rotate"},model:{value:t.showSearchModel,callback:function(e){t.showSearchModel=e},expression:"showSearchModel"}},[a("q-card",{staticStyle:{width:"300px"}},[a("q-card-section",[a("div",{staticClass:"prodTextTitle"},[t._v("Tìm kiếm")])]),a("q-card-section",[a("q-input",{attrs:{outlined:"",label:"Tìm theo qui cách"},on:{input:t.search},model:{value:t.quicachSearch,callback:function(e){t.quicachSearch=e},expression:"quicachSearch"}})],1),a("q-card-actions",{staticClass:"bg-white text-teal",attrs:{align:"right"}},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"OK"}})],1)],1)],1)],2),a("q-inner-loading",{attrs:{showing:t.visible}},[a("q-spinner-gears",{attrs:{size:"150px",color:"primary"}})],1),a("q-page-sticky",{attrs:{position:"top-right",offset:[18,18]}},[a("q-fab",{attrs:{icon:"search",color:"accent"},on:{click:t.showSearch}})],1)],1)},i=[],n=a("a34a"),c=a.n(n),o=(a("7f7f"),a("96cf"),a("c973")),r=a.n(o),l=(a("6b54"),a("06db"),a("386d"),a("dd38")),h=a("0aa7"),p=a("d534"),d={components:{"app-bar":l["a"],"wait-recive-screen":h["a"],"card-pallet":p["a"]},data:function(){return{visible:!0,pallets:[],quicachSearch:"",showSearchModel:!1}},created:function(){this.initData()},methods:{initData:function(){var t=this,e={token:this.$store.state.production.userInfo.token,stepId:this.$store.getters["base/mySources"][0].id};this.$store.dispatch("production/ACTION_FETCH_PALLET_WAIT_RECIVE",e).then((function(e){t.pallets=e.data.pallet,t.visible=!1})).catch((function(e){t.visible=!1,console.log("fetch Errr: "+e)})),this.pallets=this.$store.state.production.palletWaitRecive},showSearch:function(){this.quicachSearch="",this.search(""),this.showSearchModel=!0},search:function(t){var e=this.$store.state.production.palletWaitRecive.filter((function(e){if(e.id){var a=e.item[0].height.toString()+e.item[0].width.toString()+e.item[0].length.toString();if(-1!==a.toString().search(t))return e}}));e.length>0?(this.pallets=e,this.numberPalletFound=e.length,this.showFiltterResult=!0):this.pallets=this.$store.state.production.palletWaitRecive},recive:function(t){var e=this;return r()(c.a.mark((function a(){var s,i,n;return c.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e.visible=!0,s={token:e.$store.state.production.userInfo.token,packageId:t.packageId},a.next=4,e.$store.dispatch("production/ACTION_RECIVED_PALLET",s);case 4:i=a.sent,!0===i.meta.success?(e.$q.notify({message:"Đã nhận pallet về công đoạn "+e.$store.state.production.sourceSelected.name,color:"green"}),e.visible=!1,n=e.pallets.filter((function(e){return e.id!==t.id})),console.log(n),e.pallets=n):e.$q.notify({message:i.meta.messages.message,color:"red"});case 6:case"end":return a.stop()}}),a)})))()}}},u=d,f=a("2877"),g=a("9989"),v=a("9c40"),m=a("24e8"),b=a("f09f"),w=a("a370"),q=a("27f9"),S=a("4b7e"),k=a("74f7"),C=a("cf57"),I=a("de5e"),$=a("c294"),_=a("7f67"),y=a("eebe"),Q=a.n(y),T=Object(f["a"])(u,s,i,!1,null,null,null);e["default"]=T.exports;Q()(T,"components",{QPage:g["a"],QBtn:v["a"],QDialog:m["a"],QCard:b["a"],QCardSection:w["a"],QInput:q["a"],QCardActions:S["a"],QInnerLoading:k["a"],QSpinnerGears:C["a"],QPageSticky:I["a"],QFab:$["a"]}),Q()(T,"directives",{ClosePopup:_["a"]})}}]);