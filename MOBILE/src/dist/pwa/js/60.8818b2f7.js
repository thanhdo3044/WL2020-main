(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[60],{f0c1:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-page",[a("order-header",{attrs:{order:e.order}}),a("q-card",{staticClass:"my-card"},[a("DeNghiLuong",{attrs:{order:e.order,metaValue:e.metaValue,disable:e.disable}})],1),a("q-card",[a("q-card-section",[void 0==e.order.Requests||e.order.Requests&&!Object.keys(e.order.Requests).length?a("q-checkbox",{attrs:{label:"Đồng ý"},model:{value:e.disable,callback:function(t){e.disable=t},expression:"disable"}}):e._e()],1)],1),e.disable?a("order-approved",{attrs:{order:e.order,metaValue:e.metaValue}}):e._e(),a("send-message",{attrs:{order:e.order}})],1)},r=[],o=(a("8e6e"),a("8a81"),a("ac6a"),a("cadf"),a("06db"),a("456d"),a("f751"),a("9523")),s=a.n(o),i=a("2f62"),l=a("932a"),u=a("6664"),d=a("0ac8"),c=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-card-section",[a("div",{staticClass:"q-gutter-sm text-primary text-h6"},[e._v("\n      Chọn loại mẫu đề nghị :\n      "),a("br")]),a("div",{staticClass:"q-gutter-sm q-mt-sm"}),a("div",{staticClass:"q-gutter-sm q-mt-sm"},[null==e.order.OrderMeta[0].selection?a("div",[a("q-radio",{attrs:{dense:"",val:"Tăng lương",label:"Tăng lương",color:"teal"},model:{value:e.metaValue.selection,callback:function(t){e.$set(e.metaValue,"selection",t)},expression:"metaValue.selection"}}),a("q-radio",{attrs:{dense:"",val:"Tăng thưởng",label:"Tăng thưởng",color:"red"},model:{value:e.metaValue.selection,callback:function(t){e.$set(e.metaValue,"selection",t)},expression:"metaValue.selection"}})],1):a("div",["Tăng lương"==e.order.OrderMeta[0].selection?a("span",[a("q-radio",{attrs:{dense:"",val:"Tăng lương",color:"red"},model:{value:e.metaValue.selection,callback:function(t){e.$set(e.metaValue,"selection",t)},expression:"metaValue.selection"}})],1):a("span",[a("q-radio",{attrs:{dense:"",val:"Tăng thưởng",color:"red"},model:{value:e.metaValue.selection,callback:function(t){e.$set(e.metaValue,"selection",t)},expression:"metaValue.selection"}})],1),a("span",{staticClass:"q-ml-sm",staticStyle:{"font-size":"20px"}},[e._v(e._s(e.metaValue.selection))])])]),"Tăng lương"==e.metaValue.selection?a("div",["Không được duyệt"==e.order.status?a("div",[a("q-input",{staticClass:"q-mt-sm",attrs:{outlined:"",label:"Kính gửi : ",readonly:!e.disable},model:{value:e.metaValue.kinhGui,callback:function(t){e.$set(e.metaValue,"kinhGui",t)},expression:"metaValue.kinhGui"}}),a("div",{staticClass:"flex"},[a("q-input",{staticClass:"q-mt-sm q-pr-sm",staticStyle:{width:"50% !important"},attrs:{outlined:"",label:"Tên tôi là : ",readonly:!e.disable},model:{value:e.userInfo.lastName,callback:function(t){e.$set(e.userInfo,"lastName",t)},expression:"userInfo.lastName"}}),a("q-input",{staticClass:"q-mt-sm",staticStyle:{width:"50% !important"},attrs:{outlined:"",label:"Mã nhân viên : ",readonly:!e.disable},model:{value:e.userInfo.account,callback:function(t){e.$set(e.userInfo,"account",t)},expression:"userInfo.account"}})],1),a("div",{staticClass:"flex"},[a("q-input",{staticClass:"q-mt-sm q-pr-sm",staticStyle:{width:"50% !important"},attrs:{outlined:"",label:"Chức vụ : ",readonly:!e.disable},model:{value:e.userInfo.position,callback:function(t){e.$set(e.userInfo,"position",t)},expression:"userInfo.position"}}),a("q-input",{staticClass:"q-mt-sm",staticStyle:{width:"50% !important"},attrs:{outlined:"",label:"Phòng ban/bộ phận : ",readonly:!e.disable},model:{value:e.nameDepartmentName.NAME,callback:function(t){e.$set(e.nameDepartmentName,"NAME",t)},expression:"nameDepartmentName.NAME"}})],1),a("div",{staticClass:"q-mt-sm",attrs:{outlined:""}},[e._v("Sau khi xem xét năng lực và ý thức làm việc, tôi xin đề xuất BTGĐ tăng bậc lương hiện tại cho các CBCNV sau : \n  ")]),a("DxDataGrid",{attrs:{id:"gridContainer","data-source":e.order.OrderMeta,"allow-column-reordering":!0,"show-borders":!0,"show-row-lines":!0},on:{"init-new-row":e.initNewRow,"row-inserted":e.RowInserted,"row-updated":e.RowUpdated,"row-removed":e.RowDelted}},[a("DxPaging",{attrs:{enabled:!0}}),a("DxEditing",{attrs:{"allow-updating":!e.order.Requests.length||"Không được duyệt"==e.order.status,"allow-deleting":!e.order.Requests.length||"Không được duyệt"==e.order.status,"allow-adding":!e.order.Requests.length||"Không được duyệt"==e.order.status,mode:"row"}}),a("DxColumn",{attrs:{"data-field":"STT",caption:"STT","data-type":"number"}}),a("DxColumn",{attrs:{caption:"Mã NV","data-field":"maVT"}}),a("DxColumn",{attrs:{caption:"Họ và tên","data-field":"fullName2"}}),a("DxColumn",{attrs:{caption:"Chức vụ","data-field":"position2"}}),a("DxColumn",{attrs:{"data-field":"luongHienTai",caption:"Bậc lương hiện tại","data-type":"number"}}),a("DxColumn",{attrs:{caption:"Bấc lương đề xuất","data-field":"luongDeXuat","data-type":"number"}}),a("DxColumn",{attrs:{caption:"Thời gian tăng lương gần nhất","data-field":"thoiGianTangLuongGanNhat","data-type":"date"}})],1),a("q-btn",{staticClass:"q-mt-sm",attrs:{color:"primary","text-color":"white",label:"Sửa"},on:{click:e.updatedOrderMeta}})],1):a("div",[a("q-input",{staticClass:"q-mt-sm",attrs:{outlined:"",label:"Kính gửi : ",readonly:e.disable},model:{value:e.metaValue.kinhGui,callback:function(t){e.$set(e.metaValue,"kinhGui",t)},expression:"metaValue.kinhGui"}}),a("div",{staticClass:"flex"},[a("q-input",{staticClass:"q-mt-sm q-pr-sm",staticStyle:{width:"50% !important"},attrs:{outlined:"",label:"Tên tôi là : ",readonly:e.disable},model:{value:e.userInfo.lastName,callback:function(t){e.$set(e.userInfo,"lastName",t)},expression:"userInfo.lastName"}}),a("q-input",{staticClass:"q-mt-sm",staticStyle:{width:"50% !important"},attrs:{outlined:"",label:"Mã nhân viên : ",readonly:e.disable},model:{value:e.userInfo.account,callback:function(t){e.$set(e.userInfo,"account",t)},expression:"userInfo.account"}})],1),a("div",{staticClass:"flex"},[a("q-input",{staticClass:"q-mt-sm q-pr-sm",staticStyle:{width:"50% !important"},attrs:{outlined:"",label:"Chức vụ : ",readonly:e.disable},model:{value:e.userInfo.position,callback:function(t){e.$set(e.userInfo,"position",t)},expression:"userInfo.position"}}),a("q-input",{staticClass:"q-mt-sm",staticStyle:{width:"50% !important"},attrs:{outlined:"",label:"Phòng ban/bộ phận : ",readonly:e.disable},model:{value:e.nameDepartmentName.NAME,callback:function(t){e.$set(e.nameDepartmentName,"NAME",t)},expression:"nameDepartmentName.NAME"}})],1),a("div",{staticClass:"q-mt-sm",attrs:{outlined:""}},[e._v("Sau khi xem xét năng lực và ý thức làm việc, tôi xin đề xuất BTGĐ tăng bậc lương hiện tại cho các CBCNV sau : \n  ")]),a("DxDataGrid",{attrs:{id:"gridContainer","data-source":e.order.OrderMeta,"allow-column-reordering":!0,"show-borders":!0,"show-row-lines":!0},on:{"init-new-row":e.initNewRow,"row-inserted":e.RowInserted,"row-updated":e.RowUpdated,"row-removed":e.RowDelted}},[a("DxPaging",{attrs:{enabled:!0}}),a("DxEditing",{attrs:{"allow-updating":!e.order.Requests.length||"Không được duyệt"==e.order.status,"allow-deleting":!e.order.Requests.length||"Không được duyệt"==e.order.status,"allow-adding":!e.order.Requests.length||"Không được duyệt"==e.order.status,mode:"row"}}),a("DxColumn",{attrs:{"data-field":"STT",caption:"STT","data-type":"number"}}),a("DxColumn",{attrs:{caption:"Mã NV","data-field":"maVT"}}),a("DxColumn",{attrs:{caption:"Họ và tên","data-field":"fullName2"}}),a("DxColumn",{attrs:{caption:"Chức vụ","data-field":"position2"}}),a("DxColumn",{attrs:{"data-field":"luongHienTai",caption:"Bậc lương hiện tại","data-type":"number"}}),a("DxColumn",{attrs:{caption:"Bấc lương đề xuất","data-field":"luongDeXuat","data-type":"number"}}),a("DxColumn",{attrs:{caption:"Thời gian tăng lương gần nhất","data-field":"thoiGianTangLuongGanNhat","data-type":"date"}})],1)],1)]):e._e()])},m=[],p=(a("6b54"),a("a34a")),g=a.n(p),h=(a("96cf"),a("c973")),f=a.n(h),b=a("6191"),v=a.n(b),O=a("c1df"),w=a.n(O),x=a("bc3a"),T=a.n(x),D=a("d30a");function N(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function y(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?N(Object(a),!0).forEach((function(t){s()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):N(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var q={components:{DxDataGrid:D["DxDataGrid"],DxColumn:D["DxColumn"],DxEditing:D["DxEditing"],DxPaging:D["DxPaging"],DxButton:v.a,DxLookup:D["DxLookup"]},props:["metaValue","disable","order"],created:function(){var e=this;return f()(g.a.mark((function t(){return g.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.GET_DEPARTMENTSBYID(e.userInfo.department);case 2:e.nameDepartmentName=t.sent,e.status=e.$route.query.status,console.log("status",e.status),console.log("userInfo",e.userInfo),e.$route.query.id?e.getOneOrder(e.$route.query.id).then((function(t){t.data.data.Requests.length&&(e.disable=!0),e.metaValue=Object.assign(e.metaValue,JSON.parse(t.data.data.OrderMeta[0].metaValue)[0])})):e.$router.push({path:"/tao-de-xuat"});case 7:case"end":return t.stop()}}),t)})))()},data:function(){var e;return e={events:[],nameDepartment:{},status:""},s()(e,"nameDepartment",null),s()(e,"nameDepartmentName",null),e},computed:y(y({},Object(i["c"])("orders",["order"])),Object(i["c"])("base",["userInfo"])),methods:y(y(y(y(y({},Object(i["b"])("base",["GET_DEPARTMENTSBYID"])),Object(i["b"])("orders",["getOneOrder","getAllRequests"])),Object(i["b"])("orderMetas",["getOneOrderMeta","addorderMeta","deleteOrderMeta","updateOrderMeta"])),Object(i["b"])("requests",["deleteRequest","resetOrder"])),{},{loadData:function(e){var t=this;return f()(g.a.mark((function a(){var n;return g.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return n=null,a.prev=1,a.next=4,t.getOneOrder(e);case 4:n=a.sent,a.next=10;break;case 7:a.prev=7,a.t0=a["catch"](1),console.log(a.t0);case 10:n||t.$router.push({path:"/tao-de-xuat"}),t.order=n.data.data,console.log(n);case 13:case"end":return a.stop()}}),a,null,[[1,7]])})))()},RowInserted:function(e){var t=this;return f()(g.a.mark((function a(){var n,r,o,s,i,l,u,d,c,m,p,h,f;return g.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return console.log("STT",e.data.STT),console.log("STT",e.data.id),n=e.data.STT.toString(),r=t.metaValue.kinhGui,o=t.userInfo.account,s=e.data.luongHienTai.toString(),i=e.data.luongDeXuat.toString(),l=e.data.thoiGianTangLuongGanNhat,u=t.userInfo.lastName,d=e.data.fullName2,c=e.data.position2,m=t.userInfo.position,p=t.metaValue.selection,h=t.nameDepartmentName.NAME,f=e.data.maVT,a.next=17,t.addorderMeta(y(y({},t.order.OrderMeta[0]),{},{metaValue:JSON.stringify([t.metaValue]),maVT:f,kinhGui:r,maNV:o,selection:p,STT:n,luongHienTai:s,fullName:u,luongDeXuat:i,department:h,thoiGianTangLuongGanNhat:l,position:m,fullName2:d,position2:c}));case 17:return a.next=19,t.loadData(t.$route.query.id);case 19:case"end":return a.stop()}}),a)})))()},RowDelted:function(e){var t=this;return f()(g.a.mark((function a(){return g.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return console.log("STT",e.data.STT),console.log("STT",e.data.id),a.next=4,t.deleteOrderMeta(e.data.id);case 4:case"end":return a.stop()}}),a)})))()},RowUpdated:function(e){var t=this;return f()(g.a.mark((function a(){var n,r,o,s,i,l,u,d,c,m,p,h,f;return g.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return console.log("STT",e.data.STT),console.log("thoiGianTangLuongGanNhat",w()(e.data.thoiGianTangLuongGanNhat).format("L")),w()(e.data.thoiGianTangLuongGanNhat).format("L"),n=e.data.STT.toString(),r=t.metaValue.kinhGui,o=t.userInfo.account,s=e.data.luongHienTai.toString(),i=e.data.luongDeXuat.toString(),l=e.data.thoiGianTangLuongGanNhat,u=t.userInfo.lastName,d=e.data.fullName2,c=e.data.position2,m=t.userInfo.position,p=t.metaValue.selection,h=t.nameDepartmentName.NAME,f=e.data.maVT,a.next=18,t.updateOrderMeta(y(y({},t.order.OrderMeta[0]),{},{metaValue:JSON.stringify([t.metaValue]),maVT:f,kinhGui:r,maNV:o,selection:p,STT:n,luongHienTai:s,fullName:u,luongDeXuat:i,department:h,thoiGianTangLuongGanNhat:l,position:m,fullName2:d,position2:c}));case 18:return a.next=20,t.loadData(t.$route.query.id);case 20:case"end":return a.stop()}}),a)})))()},initNewRow:function(e){var t=e.data;console.log("vao initNewRow"),Object.assign(t,{STT:this.order.OrderMeta.length+1})},updatedOrderMeta:function(){var e=this;return f()(g.a.mark((function t(){var a,n,r,o,s,i;return g.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e.metaValue.kinhGui,n=e.userInfo.account,r=e.userInfo.lastName,o=e.userInfo.position,s=e.metaValue.selection,i=e.nameDepartmentName.NAME,e.updateOrderMeta(y(y({},e.order.OrderMeta[0]),{},{metaValue:JSON.stringify([e.metaValue]),kinhGui:a,maNV:n,fullName:r,position:o,selection:s,department:i})),t.next=9,T.a.put("/api/v2/orders?orderId=".concat(e.order.id));case 9:return t.next=11,e.deleteRequest(e.order.id);case 11:location.reload();case 12:case"end":return t.stop()}}),t)})))()}})},V=q,C=a("2877"),S=a("a370"),k=a("3786"),G=a("27f9"),I=a("9c40"),M=a("eebe"),j=a.n(M),R=Object(C["a"])(V,c,m,!1,null,null,null),$=R.exports;function E(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function P(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?E(Object(a),!0).forEach((function(t){s()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):E(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}j()(R,"components",{QCardSection:S["a"],QRadio:k["a"],QInput:G["a"],QBtn:I["a"]});var L={data:function(){return{disable:!1,metaValue:{kinhGui:"Ban TGĐ - Trưởng phòng Nhân sự",noiDungTT:"",soTien:0,vietBangChu:"",kemTheo:"",STT:"12",locationWork:"",position:"",position2:"",number:"",timeRecruit:"",description:"",fullName:"",fullName2:"",maNV:"",department:"",department2:"",stepDepartment:"",lyDo:"",dateStart:"",dateEnd:"",selection1:null,selection2:null,selection3:null,selection4:null,selection:null,thoiGianMangThai:"",xinRaCong:"",luongHienTai:"",luongDeXuat:"",thoiGianTangLuongGanNhat:""}}},components:{SendMessage:l["a"],OrderHeader:u["a"],OrderApproved:d["a"],DeNghiLuong:$},methods:P(P({},Object(i["b"])("orders",["getOneOrder","getAllRequests"])),Object(i["b"])("orderMetas",["getOneOrderMeta","addorderMeta"])),computed:P(P({},Object(i["c"])("orders",["order"])),Object(i["c"])("base",["userInfo","myFactoryInfor"])),created:function(){var e=this;this.metaValue.fullName=this.userInfo.lastName,this.metaValue.position=this.userInfo.position,this.metaValue.maNV=this.userInfo.id;this.$route.query.status;console.log("status",this.status),this.$route.query.id?this.getOneOrder(this.$route.query.id).then((function(t){t.data.data.Requests.length&&(e.disable=!0),e.metaValue=Object.assign(e.metaValue,JSON.parse(t.data.data.OrderMeta[0].metaValue)[0])})):this.$router.push({path:"/tao-de-xuat"})}},A=L,B=a("9989"),_=a("f09f"),H=a("8f8e"),K=Object(C["a"])(A,n,r,!1,null,null,null);t["default"]=K.exports;j()(K,"components",{QPage:B["a"],QCard:_["a"],QCardSection:S["a"],QCheckbox:H["a"]})}}]);